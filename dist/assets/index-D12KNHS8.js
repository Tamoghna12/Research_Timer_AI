(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))c(m);new MutationObserver(m=>{for(const p of m)if(p.type==="childList")for(const x of p.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&c(x)}).observe(document,{childList:!0,subtree:!0});function d(m){const p={};return m.integrity&&(p.integrity=m.integrity),m.referrerPolicy&&(p.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?p.credentials="include":m.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function c(m){if(m.ep)return;m.ep=!0;const p=d(m);fetch(m.href,p)}})();var s0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ug(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var gd={exports:{}},Xs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm;function u0(){if(Mm)return Xs;Mm=1;var r=Symbol.for("react.transitional.element"),u=Symbol.for("react.fragment");function d(c,m,p){var x=null;if(p!==void 0&&(x=""+p),m.key!==void 0&&(x=""+m.key),"key"in m){p={};for(var j in m)j!=="key"&&(p[j]=m[j])}else p=m;return m=p.ref,{$$typeof:r,type:c,key:x,ref:m!==void 0?m:null,props:p}}return Xs.Fragment=u,Xs.jsx=d,Xs.jsxs=d,Xs}var Om;function o0(){return Om||(Om=1,gd.exports=u0()),gd.exports}var s=o0(),pd={exports:{}},Je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm;function c0(){if(Rm)return Je;Rm=1;var r=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),p=Symbol.for("react.consumer"),x=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.iterator;function Q(C){return C===null||typeof C!="object"?null:(C=T&&C[T]||C["@@iterator"],typeof C=="function"?C:null)}var ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,de={};function fe(C,te,ge){this.props=C,this.context=te,this.refs=de,this.updater=ge||ee}fe.prototype.isReactComponent={},fe.prototype.setState=function(C,te){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,te,"setState")},fe.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function he(){}he.prototype=fe.prototype;function se(C,te,ge){this.props=C,this.context=te,this.refs=de,this.updater=ge||ee}var U=se.prototype=new he;U.constructor=se,V(U,fe.prototype),U.isPureReactComponent=!0;var Y=Array.isArray,re={H:null,A:null,T:null,S:null,V:null},ue=Object.prototype.hasOwnProperty;function pe(C,te,ge,ye,De,Ye){return ge=Ye.ref,{$$typeof:r,type:C,key:te,ref:ge!==void 0?ge:null,props:Ye}}function _e(C,te){return pe(C.type,te,void 0,void 0,void 0,C.props)}function Le(C){return typeof C=="object"&&C!==null&&C.$$typeof===r}function me(C){var te={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(ge){return te[ge]})}var Ae=/\/+/g;function Ce(C,te){return typeof C=="object"&&C!==null&&C.key!=null?me(""+C.key):te.toString(36)}function ce(){}function dt(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(ce,ce):(C.status="pending",C.then(function(te){C.status==="pending"&&(C.status="fulfilled",C.value=te)},function(te){C.status==="pending"&&(C.status="rejected",C.reason=te)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function Pe(C,te,ge,ye,De){var Ye=typeof C;(Ye==="undefined"||Ye==="boolean")&&(C=null);var Ue=!1;if(C===null)Ue=!0;else switch(Ye){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(C.$$typeof){case r:case u:Ue=!0;break;case S:return Ue=C._init,Pe(Ue(C._payload),te,ge,ye,De)}}if(Ue)return De=De(C),Ue=ye===""?"."+Ce(C,0):ye,Y(De)?(ge="",Ue!=null&&(ge=Ue.replace(Ae,"$&/")+"/"),Pe(De,te,ge,"",function(Oe){return Oe})):De!=null&&(Le(De)&&(De=_e(De,ge+(De.key==null||C&&C.key===De.key?"":(""+De.key).replace(Ae,"$&/")+"/")+Ue)),te.push(De)),1;Ue=0;var Zt=ye===""?".":ye+":";if(Y(C))for(var vt=0;vt<C.length;vt++)ye=C[vt],Ye=Zt+Ce(ye,vt),Ue+=Pe(ye,te,ge,Ye,De);else if(vt=Q(C),typeof vt=="function")for(C=vt.call(C),vt=0;!(ye=C.next()).done;)ye=ye.value,Ye=Zt+Ce(ye,vt++),Ue+=Pe(ye,te,ge,Ye,De);else if(Ye==="object"){if(typeof C.then=="function")return Pe(dt(C),te,ge,ye,De);throw te=String(C),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function Z(C,te,ge){if(C==null)return C;var ye=[],De=0;return Pe(C,ye,"","",function(Ye){return te.call(ge,Ye,De++)}),ye}function xe(C){if(C._status===-1){var te=C._result;te=te(),te.then(function(ge){(C._status===0||C._status===-1)&&(C._status=1,C._result=ge)},function(ge){(C._status===0||C._status===-1)&&(C._status=2,C._result=ge)}),C._status===-1&&(C._status=0,C._result=te)}if(C._status===1)return C._result.default;throw C._result}var Me=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function Ve(){}return Je.Children={map:Z,forEach:function(C,te,ge){Z(C,function(){te.apply(this,arguments)},ge)},count:function(C){var te=0;return Z(C,function(){te++}),te},toArray:function(C){return Z(C,function(te){return te})||[]},only:function(C){if(!Le(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Je.Component=fe,Je.Fragment=d,Je.Profiler=m,Je.PureComponent=se,Je.StrictMode=c,Je.Suspense=N,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=re,Je.__COMPILER_RUNTIME={__proto__:null,c:function(C){return re.H.useMemoCache(C)}},Je.cache=function(C){return function(){return C.apply(null,arguments)}},Je.cloneElement=function(C,te,ge){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var ye=V({},C.props),De=C.key,Ye=void 0;if(te!=null)for(Ue in te.ref!==void 0&&(Ye=void 0),te.key!==void 0&&(De=""+te.key),te)!ue.call(te,Ue)||Ue==="key"||Ue==="__self"||Ue==="__source"||Ue==="ref"&&te.ref===void 0||(ye[Ue]=te[Ue]);var Ue=arguments.length-2;if(Ue===1)ye.children=ge;else if(1<Ue){for(var Zt=Array(Ue),vt=0;vt<Ue;vt++)Zt[vt]=arguments[vt+2];ye.children=Zt}return pe(C.type,De,void 0,void 0,Ye,ye)},Je.createContext=function(C){return C={$$typeof:x,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:p,_context:C},C},Je.createElement=function(C,te,ge){var ye,De={},Ye=null;if(te!=null)for(ye in te.key!==void 0&&(Ye=""+te.key),te)ue.call(te,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(De[ye]=te[ye]);var Ue=arguments.length-2;if(Ue===1)De.children=ge;else if(1<Ue){for(var Zt=Array(Ue),vt=0;vt<Ue;vt++)Zt[vt]=arguments[vt+2];De.children=Zt}if(C&&C.defaultProps)for(ye in Ue=C.defaultProps,Ue)De[ye]===void 0&&(De[ye]=Ue[ye]);return pe(C,Ye,void 0,void 0,null,De)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(C){return{$$typeof:j,render:C}},Je.isValidElement=Le,Je.lazy=function(C){return{$$typeof:S,_payload:{_status:-1,_result:C},_init:xe}},Je.memo=function(C,te){return{$$typeof:b,type:C,compare:te===void 0?null:te}},Je.startTransition=function(C){var te=re.T,ge={};re.T=ge;try{var ye=C(),De=re.S;De!==null&&De(ge,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(Ve,Me)}catch(Ye){Me(Ye)}finally{re.T=te}},Je.unstable_useCacheRefresh=function(){return re.H.useCacheRefresh()},Je.use=function(C){return re.H.use(C)},Je.useActionState=function(C,te,ge){return re.H.useActionState(C,te,ge)},Je.useCallback=function(C,te){return re.H.useCallback(C,te)},Je.useContext=function(C){return re.H.useContext(C)},Je.useDebugValue=function(){},Je.useDeferredValue=function(C,te){return re.H.useDeferredValue(C,te)},Je.useEffect=function(C,te,ge){var ye=re.H;if(typeof ge=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ye.useEffect(C,te)},Je.useId=function(){return re.H.useId()},Je.useImperativeHandle=function(C,te,ge){return re.H.useImperativeHandle(C,te,ge)},Je.useInsertionEffect=function(C,te){return re.H.useInsertionEffect(C,te)},Je.useLayoutEffect=function(C,te){return re.H.useLayoutEffect(C,te)},Je.useMemo=function(C,te){return re.H.useMemo(C,te)},Je.useOptimistic=function(C,te){return re.H.useOptimistic(C,te)},Je.useReducer=function(C,te,ge){return re.H.useReducer(C,te,ge)},Je.useRef=function(C){return re.H.useRef(C)},Je.useState=function(C){return re.H.useState(C)},Je.useSyncExternalStore=function(C,te,ge){return re.H.useSyncExternalStore(C,te,ge)},Je.useTransition=function(){return re.H.useTransition()},Je.version="19.1.1",Je}var zm;function Dd(){return zm||(zm=1,pd.exports=c0()),pd.exports}var E=Dd();const da=ug(E);var yd={exports:{}},Qs={},vd={exports:{}},xd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm;function d0(){return Bm||(Bm=1,(function(r){function u(Z,xe){var Me=Z.length;Z.push(xe);e:for(;0<Me;){var Ve=Me-1>>>1,C=Z[Ve];if(0<m(C,xe))Z[Ve]=xe,Z[Me]=C,Me=Ve;else break e}}function d(Z){return Z.length===0?null:Z[0]}function c(Z){if(Z.length===0)return null;var xe=Z[0],Me=Z.pop();if(Me!==xe){Z[0]=Me;e:for(var Ve=0,C=Z.length,te=C>>>1;Ve<te;){var ge=2*(Ve+1)-1,ye=Z[ge],De=ge+1,Ye=Z[De];if(0>m(ye,Me))De<C&&0>m(Ye,ye)?(Z[Ve]=Ye,Z[De]=Me,Ve=De):(Z[Ve]=ye,Z[ge]=Me,Ve=ge);else if(De<C&&0>m(Ye,Me))Z[Ve]=Ye,Z[De]=Me,Ve=De;else break e}}return xe}function m(Z,xe){var Me=Z.sortIndex-xe.sortIndex;return Me!==0?Me:Z.id-xe.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var p=performance;r.unstable_now=function(){return p.now()}}else{var x=Date,j=x.now();r.unstable_now=function(){return x.now()-j}}var N=[],b=[],S=1,T=null,Q=3,ee=!1,V=!1,de=!1,fe=!1,he=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function Y(Z){for(var xe=d(b);xe!==null;){if(xe.callback===null)c(b);else if(xe.startTime<=Z)c(b),xe.sortIndex=xe.expirationTime,u(N,xe);else break;xe=d(b)}}function re(Z){if(de=!1,Y(Z),!V)if(d(N)!==null)V=!0,ue||(ue=!0,Ce());else{var xe=d(b);xe!==null&&Pe(re,xe.startTime-Z)}}var ue=!1,pe=-1,_e=5,Le=-1;function me(){return fe?!0:!(r.unstable_now()-Le<_e)}function Ae(){if(fe=!1,ue){var Z=r.unstable_now();Le=Z;var xe=!0;try{e:{V=!1,de&&(de=!1,se(pe),pe=-1),ee=!0;var Me=Q;try{t:{for(Y(Z),T=d(N);T!==null&&!(T.expirationTime>Z&&me());){var Ve=T.callback;if(typeof Ve=="function"){T.callback=null,Q=T.priorityLevel;var C=Ve(T.expirationTime<=Z);if(Z=r.unstable_now(),typeof C=="function"){T.callback=C,Y(Z),xe=!0;break t}T===d(N)&&c(N),Y(Z)}else c(N);T=d(N)}if(T!==null)xe=!0;else{var te=d(b);te!==null&&Pe(re,te.startTime-Z),xe=!1}}break e}finally{T=null,Q=Me,ee=!1}xe=void 0}}finally{xe?Ce():ue=!1}}}var Ce;if(typeof U=="function")Ce=function(){U(Ae)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,dt=ce.port2;ce.port1.onmessage=Ae,Ce=function(){dt.postMessage(null)}}else Ce=function(){he(Ae,0)};function Pe(Z,xe){pe=he(function(){Z(r.unstable_now())},xe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Z){Z.callback=null},r.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_e=0<Z?Math.floor(1e3/Z):5},r.unstable_getCurrentPriorityLevel=function(){return Q},r.unstable_next=function(Z){switch(Q){case 1:case 2:case 3:var xe=3;break;default:xe=Q}var Me=Q;Q=xe;try{return Z()}finally{Q=Me}},r.unstable_requestPaint=function(){fe=!0},r.unstable_runWithPriority=function(Z,xe){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var Me=Q;Q=Z;try{return xe()}finally{Q=Me}},r.unstable_scheduleCallback=function(Z,xe,Me){var Ve=r.unstable_now();switch(typeof Me=="object"&&Me!==null?(Me=Me.delay,Me=typeof Me=="number"&&0<Me?Ve+Me:Ve):Me=Ve,Z){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=Me+C,Z={id:S++,callback:xe,priorityLevel:Z,startTime:Me,expirationTime:C,sortIndex:-1},Me>Ve?(Z.sortIndex=Me,u(b,Z),d(N)===null&&Z===d(b)&&(de?(se(pe),pe=-1):de=!0,Pe(re,Me-Ve))):(Z.sortIndex=C,u(N,Z),V||ee||(V=!0,ue||(ue=!0,Ce()))),Z},r.unstable_shouldYield=me,r.unstable_wrapCallback=function(Z){var xe=Q;return function(){var Me=Q;Q=xe;try{return Z.apply(this,arguments)}finally{Q=Me}}}})(xd)),xd}var Um;function f0(){return Um||(Um=1,vd.exports=d0()),vd.exports}var bd={exports:{}},gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm;function h0(){if(qm)return gn;qm=1;var r=Dd();function u(N){var b="https://react.dev/errors/"+N;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)b+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+N+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(){}var c={d:{f:d,r:function(){throw Error(u(522))},D:d,C:d,L:d,m:d,X:d,S:d,M:d},p:0,findDOMNode:null},m=Symbol.for("react.portal");function p(N,b,S){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:T==null?null:""+T,children:N,containerInfo:b,implementation:S}}var x=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function j(N,b){if(N==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,gn.createPortal=function(N,b){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(u(299));return p(N,b,null,S)},gn.flushSync=function(N){var b=x.T,S=c.p;try{if(x.T=null,c.p=2,N)return N()}finally{x.T=b,c.p=S,c.d.f()}},gn.preconnect=function(N,b){typeof N=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,c.d.C(N,b))},gn.prefetchDNS=function(N){typeof N=="string"&&c.d.D(N)},gn.preinit=function(N,b){if(typeof N=="string"&&b&&typeof b.as=="string"){var S=b.as,T=j(S,b.crossOrigin),Q=typeof b.integrity=="string"?b.integrity:void 0,ee=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;S==="style"?c.d.S(N,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:T,integrity:Q,fetchPriority:ee}):S==="script"&&c.d.X(N,{crossOrigin:T,integrity:Q,fetchPriority:ee,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},gn.preinitModule=function(N,b){if(typeof N=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var S=j(b.as,b.crossOrigin);c.d.M(N,{crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&c.d.M(N)},gn.preload=function(N,b){if(typeof N=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var S=b.as,T=j(S,b.crossOrigin);c.d.L(N,S,{crossOrigin:T,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},gn.preloadModule=function(N,b){if(typeof N=="string")if(b){var S=j(b.as,b.crossOrigin);c.d.m(N,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else c.d.m(N)},gn.requestFormReset=function(N){c.d.r(N)},gn.unstable_batchedUpdates=function(N,b){return N(b)},gn.useFormState=function(N,b,S){return x.H.useFormState(N,b,S)},gn.useFormStatus=function(){return x.H.useHostTransitionStatus()},gn.version="19.1.1",gn}var Lm;function og(){if(Lm)return bd.exports;Lm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(u){console.error(u)}}return r(),bd.exports=h0(),bd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm;function m0(){if(Hm)return Qs;Hm=1;var r=f0(),u=Dd(),d=og();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function p(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function x(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function j(e){if(p(e)!==e)throw Error(c(188))}function N(e){var t=e.alternate;if(!t){if(t=p(e),t===null)throw Error(c(188));return t!==e?null:e}for(var n=e,a=t;;){var i=n.return;if(i===null)break;var f=i.alternate;if(f===null){if(a=i.return,a!==null){n=a;continue}break}if(i.child===f.child){for(f=i.child;f;){if(f===n)return j(i),e;if(f===a)return j(i),t;f=f.sibling}throw Error(c(188))}if(n.return!==a.return)n=i,a=f;else{for(var v=!1,k=i.child;k;){if(k===n){v=!0,n=i,a=f;break}if(k===a){v=!0,a=i,n=f;break}k=k.sibling}if(!v){for(k=f.child;k;){if(k===n){v=!0,n=f,a=i;break}if(k===a){v=!0,a=f,n=i;break}k=k.sibling}if(!v)throw Error(c(189))}}if(n.alternate!==a)throw Error(c(190))}if(n.tag!==3)throw Error(c(188));return n.stateNode.current===n?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var S=Object.assign,T=Symbol.for("react.element"),Q=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),de=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),he=Symbol.for("react.provider"),se=Symbol.for("react.consumer"),U=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),_e=Symbol.for("react.lazy"),Le=Symbol.for("react.activity"),me=Symbol.for("react.memo_cache_sentinel"),Ae=Symbol.iterator;function Ce(e){return e===null||typeof e!="object"?null:(e=Ae&&e[Ae]||e["@@iterator"],typeof e=="function"?e:null)}var ce=Symbol.for("react.client.reference");function dt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ce?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case V:return"Fragment";case fe:return"Profiler";case de:return"StrictMode";case re:return"Suspense";case ue:return"SuspenseList";case Le:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ee:return"Portal";case U:return(e.displayName||"Context")+".Provider";case se:return(e._context.displayName||"Context")+".Consumer";case Y:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pe:return t=e.displayName||null,t!==null?t:dt(e.type)||"Memo";case _e:t=e._payload,e=e._init;try{return dt(e(t))}catch{}}return null}var Pe=Array.isArray,Z=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe=d.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Me={pending:!1,data:null,method:null,action:null},Ve=[],C=-1;function te(e){return{current:e}}function ge(e){0>C||(e.current=Ve[C],Ve[C]=null,C--)}function ye(e,t){C++,Ve[C]=e.current,e.current=t}var De=te(null),Ye=te(null),Ue=te(null),Zt=te(null);function vt(e,t){switch(ye(Ue,t),ye(Ye,e),ye(De,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?im(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=im(t),e=sm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ge(De),ye(De,e)}function Oe(){ge(De),ge(Ye),ge(Ue)}function fa(e){e.memoizedState!==null&&ye(Zt,e);var t=De.current,n=sm(t,e.type);t!==n&&(ye(Ye,e),ye(De,n))}function Gn(e){Ye.current===e&&(ge(De),ge(Ye)),Zt.current===e&&(ge(Zt),Hs._currentValue=Me)}var st=Object.prototype.hasOwnProperty,ta=r.unstable_scheduleCallback,_a=r.unstable_cancelCallback,na=r.unstable_shouldYield,be=r.unstable_requestPaint,Fe=r.unstable_now,pn=r.unstable_getCurrentPriorityLevel,ha=r.unstable_ImmediatePriority,Nt=r.unstable_UserBlockingPriority,Dt=r.unstable_NormalPriority,yn=r.unstable_LowPriority,Nn=r.unstable_IdlePriority,tl=r.log,aa=r.unstable_setDisableYieldValue,cn=null,Tt=null;function vn(e){if(typeof tl=="function"&&aa(e),Tt&&typeof Tt.setStrictMode=="function")try{Tt.setStrictMode(cn,e)}catch{}}var Mt=Math.clz32?Math.clz32:$n,sr=Math.log,ma=Math.LN2;function $n(e){return e>>>=0,e===0?32:31-(sr(e)/ma|0)|0}var Dn=256,ur=4194304;function dn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ze(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var i=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var k=a&134217727;return k!==0?(a=k&~f,a!==0?i=dn(a):(v&=k,v!==0?i=dn(v):n||(n=k&~e,n!==0&&(i=dn(n))))):(k=a&~f,k!==0?i=dn(k):v!==0?i=dn(v):n||(n=a&~e,n!==0&&(i=dn(n)))),i===0?0:t!==0&&t!==i&&(t&f)===0&&(f=i&-i,n=t&-t,f>=n||f===32&&(n&4194048)!==0)?t:i}function ra(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Da(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nl(){var e=Dn;return Dn<<=1,(Dn&4194048)===0&&(Dn=256),e}function Te(){var e=ur;return ur<<=1,(ur&62914560)===0&&(ur=4194304),e}function al(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function or(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function zi(e,t,n,a,i,f){var v=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var k=e.entanglements,M=e.expirationTimes,F=e.hiddenUpdates;for(n=v&~n;0<n;){var le=31-Mt(n),oe=1<<le;k[le]=0,M[le]=-1;var J=F[le];if(J!==null)for(F[le]=null,le=0;le<J.length;le++){var W=J[le];W!==null&&(W.lane&=-536870913)}n&=~oe}a!==0&&Bi(e,a,0),f!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~t))}function Bi(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-Mt(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&4194090}function zl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Mt(n),i=1<<a;i&t|e[a]&t&&(e[a]|=t),n&=~i}}function Ui(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function qi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ma(){var e=xe.p;return e!==0?e:(e=window.event,e===void 0?32:Em(e.type))}function cr(e,t){var n=xe.p;try{return xe.p=e,t()}finally{xe.p=n}}var Xn=Math.random().toString(36).slice(2),Ht="__reactFiber$"+Xn,Ie="__reactProps$"+Xn,At="__reactContainer$"+Xn,Li="__reactEvents$"+Xn,Bl="__reactListeners$"+Xn,Ul="__reactHandles$"+Xn,rl="__reactResources$"+Xn,ll="__reactMarker$"+Xn;function Qn(e){delete e[Ht],delete e[Ie],delete e[Li],delete e[Bl],delete e[Ul]}function Mn(e){var t=e[Ht];if(t)return t;for(var n=e.parentNode;n;){if(t=n[At]||n[Ht]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=dm(e);e!==null;){if(n=e[Ht])return n;e=dm(e)}return t}e=n,n=e.parentNode}return null}function xn(e){if(e=e[Ht]||e[At]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function ga(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function dr(e){var t=e[rl];return t||(t=e[rl]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function St(e){e[ll]=!0}var Hi=new Set,pa={};function ya(e,t){va(e,t),va(e+"Capture",t)}function va(e,t){for(pa[e]=t,e=0;e<t.length;e++)Hi.add(t[e])}var Ot=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xa={},Vn={};function tu(e){return st.call(Vn,e)?!0:st.call(xa,e)?!1:Ot.test(e)?Vn[e]=!0:(xa[e]=!0,!1)}function la(e,t,n){if(tu(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Oa(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function On(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}var il,ba;function Ra(e){if(il===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);il=t&&t[1]||"",ba=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+il+e+ba}var fr=!1;function ql(e,t){if(!e||fr)return"";fr=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(W){var J=W}Reflect.construct(e,[],oe)}else{try{oe.call()}catch(W){J=W}e.call(oe.prototype)}}else{try{throw Error()}catch(W){J=W}(oe=e())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(W){if(W&&J&&typeof W.stack=="string")return[W.stack,J.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=a.DetermineComponentFrameRoot(),v=f[0],k=f[1];if(v&&k){var M=v.split(`
`),F=k.split(`
`);for(i=a=0;a<M.length&&!M[a].includes("DetermineComponentFrameRoot");)a++;for(;i<F.length&&!F[i].includes("DetermineComponentFrameRoot");)i++;if(a===M.length||i===F.length)for(a=M.length-1,i=F.length-1;1<=a&&0<=i&&M[a]!==F[i];)i--;for(;1<=a&&0<=i;a--,i--)if(M[a]!==F[i]){if(a!==1||i!==1)do if(a--,i--,0>i||M[a]!==F[i]){var le=`
`+M[a].replace(" at new "," at ");return e.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",e.displayName)),le}while(1<=a&&0<=i);break}}}finally{fr=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Ra(n):""}function nt(e){switch(e.tag){case 26:case 27:case 5:return Ra(e.type);case 16:return Ra("Lazy");case 13:return Ra("Suspense");case 19:return Ra("SuspenseList");case 0:case 15:return ql(e.type,!1);case 11:return ql(e.type.render,!1);case 1:return ql(e.type,!0);case 31:return Ra("Activity");default:return""}}function Yi(e){try{var t="";do t+=nt(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function bn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sl(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nu(e){var t=sl(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,f=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(v){a=""+v,f.call(this,v)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ft(e){e._valueTracker||(e._valueTracker=nu(e))}function hr(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=sl(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function wa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var mr=/[\n"\\]/g;function fn(e){return e.replace(mr,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ul(e,t,n,a,i,f,v,k){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+bn(t)):e.value!==""+bn(t)&&(e.value=""+bn(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?Ll(e,v,bn(t)):n!=null?Ll(e,v,bn(n)):a!=null&&e.removeAttribute("value"),i==null&&f!=null&&(e.defaultChecked=!!f),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?e.name=""+bn(k):e.removeAttribute("name")}function ol(e,t,n,a,i,f,v,k){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||n!=null){if(!(f!=="submit"&&f!=="reset"||t!=null))return;n=n!=null?""+bn(n):"",t=t!=null?""+bn(t):n,k||t===e.value||(e.value=t),e.defaultValue=t}a=a??i,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=k?e.checked:!!a,e.defaultChecked=!!a,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function Ll(e,t,n){t==="number"&&wa(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ia(e,t,n,a){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&a&&(e[n].defaultSelected=!0)}else{for(n=""+bn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,a&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ki(e,t,n){if(t!=null&&(t=""+bn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+bn(n):""}function gr(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(c(92));if(Pe(a)){if(1<a.length)throw Error(c(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=bn(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a)}function za(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Co=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lt(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||Co.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Gi(e,t,n){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var i in t)a=t[i],t.hasOwnProperty(i)&&n[i]!==a&&lt(e,i,a)}else for(var f in t)t.hasOwnProperty(f)&&lt(e,f,t[f])}function $i(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _o=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sa(e){return wn.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var pr=null;function Pn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ba=null,Ua=null;function Yt(e){var t=xn(e);if(t&&(e=t.stateNode)){var n=e[Ie]||null;e:switch(e=t.stateNode,t.type){case"input":if(ul(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+fn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var i=a[Ie]||null;if(!i)throw Error(c(90));ul(a,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&hr(a)}break e;case"textarea":Ki(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&ia(e,!!n.multiple,t,!1)}}}var En=!1;function yr(e,t,n){if(En)return e(t,n);En=!0;try{var a=e(t);return a}finally{if(En=!1,(Ba!==null||Ua!==null)&&(Xu(),Ba&&(t=Ba,e=Ua,Ua=Ba=null,Yt(t),e)))for(t=0;t<e.length;t++)Yt(e[t])}}function ua(e,t){var n=e.stateNode;if(n===null)return null;var a=n[Ie]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(c(231,t,typeof n));return n}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fn=!1;if(Rn)try{var cl={};Object.defineProperty(cl,"passive",{get:function(){Fn=!0}}),window.addEventListener("test",cl,cl),window.removeEventListener("test",cl,cl)}catch{Fn=!1}var Jt=null,dl=null,fl=null;function Hl(){if(fl)return fl;var e,t=dl,n=t.length,a,i="value"in Jt?Jt.value:Jt.textContent,f=i.length;for(e=0;e<n&&t[e]===i[e];e++);var v=n-e;for(a=1;a<=v&&t[n-a]===i[f-a];a++);return fl=i.slice(e,1<a?1-a:void 0)}function Sa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function vr(){return!0}function Xi(){return!1}function hn(e){function t(n,a,i,f,v){this._reactName=n,this._targetInst=i,this.type=a,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var k in e)e.hasOwnProperty(k)&&(n=e[k],this[k]=n?n(f):f[k]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?vr:Xi,this.isPropagationStopped=Xi,this}return S(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vr)},persist:function(){},isPersistent:vr}),t}var zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yl=hn(zn),hl=S({},zn,{view:0,detail:0}),Kl=hn(hl),xr,ml,gl,Gl=S({},hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gl&&(gl&&e.type==="mousemove"?(xr=e.screenX-gl.screenX,ml=e.screenY-gl.screenY):ml=xr=0,gl=e),xr)},movementY:function(e){return"movementY"in e?e.movementY:ml}}),au=hn(Gl),Qi=S({},Gl,{dataTransfer:0}),Vi=hn(Qi),ru=S({},hl,{relatedTarget:0}),br=hn(ru),$l=S({},zn,{animationName:0,elapsedTime:0,pseudoElement:0}),Xl=hn($l),lu=S({},zn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Do=hn(lu),wr=S({},zn,{data:0}),Ql=hn(wr),Pi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function en(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zi[e])?!!t[e]:!1}function qa(){return en}var pl=S({},hl,{key:function(e){if(e.key){var t=Pi[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Sa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qa,charCode:function(e){return e.type==="keypress"?Sa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Sa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),iu=hn(pl),Vl=S({},Gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ji=hn(Vl),su=S({},hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qa}),Pl=hn(su),Wi=S({},zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),La=hn(Wi),Ii=S({},Gl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),es=hn(Ii),Fl=S({},zn,{newState:0,oldState:0}),ts=hn(Fl),uu=[9,13,27,32],ns=Rn&&"CompositionEvent"in window,Ha=null;Rn&&"documentMode"in document&&(Ha=document.documentMode);var Zl=Rn&&"TextEvent"in window&&!Ha,ou=Rn&&(!ns||Ha&&8<Ha&&11>=Ha),Jl=" ",Wl=!1;function cu(e,t){switch(e){case"keyup":return uu.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function as(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Sr=!1;function du(e,t){switch(e){case"compositionend":return as(t);case"keypress":return t.which!==32?null:(Wl=!0,Jl);case"textInput":return e=t.data,e===Jl&&Wl?null:e;default:return null}}function fu(e,t){if(Sr)return e==="compositionend"||!ns&&cu(e,t)?(e=Hl(),fl=dl=Jt=null,Sr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ou&&t.locale!=="ko"?null:t.data;default:return null}}var Mo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mo[e.type]:t==="textarea"}function Il(e,t,n,a){Ba?Ua?Ua.push(a):Ua=[a]:Ba=a,t=Ju(t,"onChange"),0<t.length&&(n=new Yl("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var jr=null,kr=null;function Oo(e){tm(e,0)}function ei(e){var t=ga(e);if(hr(t))return e}function hu(e,t){if(e==="change")return t}var yl=!1;if(Rn){var Bn;if(Rn){var Ct="oninput"in document;if(!Ct){var vl=document.createElement("div");vl.setAttribute("oninput","return;"),Ct=typeof vl.oninput=="function"}Bn=Ct}else Bn=!1;yl=Bn&&(!document.documentMode||9<document.documentMode)}function Sn(){jr&&(jr.detachEvent("onpropertychange",mu),kr=jr=null)}function mu(e){if(e.propertyName==="value"&&ei(kr)){var t=[];Il(t,kr,e,Pn(e)),yr(Oo,t)}}function ls(e,t,n){e==="focusin"?(Sn(),jr=t,kr=n,jr.attachEvent("onpropertychange",mu)):e==="focusout"&&Sn()}function gu(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ei(kr)}function Ya(e,t){if(e==="click")return ei(t)}function is(e,t){if(e==="input"||e==="change")return ei(t)}function Nr(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ut=typeof Object.is=="function"?Object.is:Nr;function Er(e,t){if(Ut(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var i=n[a];if(!st.call(t,i)||!Ut(e[i],t[i]))return!1}return!0}function l(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function o(e,t){var n=l(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=l(n)}}function h(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?h(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function g(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=wa(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=wa(e.document)}return t}function y(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var w=Rn&&"documentMode"in document&&11>=document.documentMode,A=null,_=null,O=null,B=!1;function H(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;B||A==null||A!==wa(a)||(a=A,"selectionStart"in a&&y(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),O&&Er(O,a)||(O=a,a=Ju(_,"onSelect"),0<a.length&&(t=new Yl("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=A)))}function D(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var K={animationend:D("Animation","AnimationEnd"),animationiteration:D("Animation","AnimationIteration"),animationstart:D("Animation","AnimationStart"),transitionrun:D("Transition","TransitionRun"),transitionstart:D("Transition","TransitionStart"),transitioncancel:D("Transition","TransitionCancel"),transitionend:D("Transition","TransitionEnd")},R={},q={};Rn&&(q=document.createElement("div").style,"AnimationEvent"in window||(delete K.animationend.animation,delete K.animationiteration.animation,delete K.animationstart.animation),"TransitionEvent"in window||delete K.transitionend.transition);function L(e){if(R[e])return R[e];if(!K[e])return e;var t=K[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in q)return R[e]=t[n];return e}var G=L("animationend"),X=L("animationiteration"),I=L("animationstart"),ne=L("transitionrun"),ae=L("transitionstart"),ve=L("transitioncancel"),ke=L("transitionend"),we=new Map,Se="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Se.push("scrollEnd");function je(e,t){we.set(e,t),ya(t,[e])}var Ee=new WeakMap;function Ne(e,t){if(typeof e=="object"&&e!==null){var n=Ee.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Yi(t)},Ee.set(e,t),t)}return{value:e,source:t,stack:Yi(t)}}var qe=[],Ze=0,Xe=0;function jt(){for(var e=Ze,t=Xe=Ze=0;t<e;){var n=qe[t];qe[t++]=null;var a=qe[t];qe[t++]=null;var i=qe[t];qe[t++]=null;var f=qe[t];if(qe[t++]=null,a!==null&&i!==null){var v=a.pending;v===null?i.next=i:(i.next=v.next,v.next=i),a.pending=i}f!==0&&xl(n,i,f)}}function Ke(e,t,n,a){qe[Ze++]=e,qe[Ze++]=t,qe[Ze++]=n,qe[Ze++]=a,Xe|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Xt(e,t,n,a){return Ke(e,t,n,a),Qt(e)}function Rt(e,t){return Ke(e,null,null,t),Qt(e)}function xl(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var i=!1,f=e.return;f!==null;)f.childLanes|=n,a=f.alternate,a!==null&&(a.childLanes|=n),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(i=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,i&&t!==null&&(i=31-Mt(n),e=f.hiddenUpdates,a=e[i],a===null?e[i]=[t]:a.push(t),t.lane=n|536870912),f):null}function Qt(e){if(50<Ms)throw Ms=0,Lc=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Tn={};function ss(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(e,t,n,a){return new ss(e,t,n,a)}function Ro(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ka(e,t){var n=e.alternate;return n===null?(n=Un(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ld(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function pu(e,t,n,a,i,f){var v=0;if(a=e,typeof e=="function")Ro(e)&&(v=1);else if(typeof e=="string")v=Pp(e,n,De.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Le:return e=Un(31,n,t,i),e.elementType=Le,e.lanes=f,e;case V:return bl(n.children,i,f,t);case de:v=8,i|=24;break;case fe:return e=Un(12,n,t,i|2),e.elementType=fe,e.lanes=f,e;case re:return e=Un(13,n,t,i),e.elementType=re,e.lanes=f,e;case ue:return e=Un(19,n,t,i),e.elementType=ue,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case he:case U:v=10;break e;case se:v=9;break e;case Y:v=11;break e;case pe:v=14;break e;case _e:v=16,a=null;break e}v=29,n=Error(c(130,e===null?"null":typeof e,"")),a=null}return t=Un(v,n,t,i),t.elementType=e,t.type=a,t.lanes=f,t}function bl(e,t,n,a){return e=Un(7,e,a,t),e.lanes=n,e}function zo(e,t,n){return e=Un(6,e,null,t),e.lanes=n,e}function Bo(e,t,n){return t=Un(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ti=[],ni=0,yu=null,vu=0,Zn=[],Jn=0,wl=null,Ga=1,$a="";function Sl(e,t){ti[ni++]=vu,ti[ni++]=yu,yu=e,vu=t}function Hd(e,t,n){Zn[Jn++]=Ga,Zn[Jn++]=$a,Zn[Jn++]=wl,wl=e;var a=Ga;e=$a;var i=32-Mt(a)-1;a&=~(1<<i),n+=1;var f=32-Mt(t)+i;if(30<f){var v=i-i%5;f=(a&(1<<v)-1).toString(32),a>>=v,i-=v,Ga=1<<32-Mt(t)+i|n<<i|a,$a=f+e}else Ga=1<<f|n<<i|a,$a=e}function Uo(e){e.return!==null&&(Sl(e,1),Hd(e,1,0))}function qo(e){for(;e===yu;)yu=ti[--ni],ti[ni]=null,vu=ti[--ni],ti[ni]=null;for(;e===wl;)wl=Zn[--Jn],Zn[Jn]=null,$a=Zn[--Jn],Zn[Jn]=null,Ga=Zn[--Jn],Zn[Jn]=null}var jn=null,qt=null,ct=!1,jl=null,ja=!1,Lo=Error(c(519));function kl(e){var t=Error(c(418,""));throw cs(Ne(t,e)),Lo}function Yd(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[Ht]=e,t[Ie]=a,n){case"dialog":rt("cancel",t),rt("close",t);break;case"iframe":case"object":case"embed":rt("load",t);break;case"video":case"audio":for(n=0;n<Rs.length;n++)rt(Rs[n],t);break;case"source":rt("error",t);break;case"img":case"image":case"link":rt("error",t),rt("load",t);break;case"details":rt("toggle",t);break;case"input":rt("invalid",t),ol(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0),ft(t);break;case"select":rt("invalid",t);break;case"textarea":rt("invalid",t),gr(t,a.value,a.defaultValue,a.children),ft(t)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||lm(t.textContent,n)?(a.popover!=null&&(rt("beforetoggle",t),rt("toggle",t)),a.onScroll!=null&&rt("scroll",t),a.onScrollEnd!=null&&rt("scrollend",t),a.onClick!=null&&(t.onclick=Wu),t=!0):t=!1,t||kl(e)}function Kd(e){for(jn=e.return;jn;)switch(jn.tag){case 5:case 13:ja=!1;return;case 27:case 3:ja=!0;return;default:jn=jn.return}}function us(e){if(e!==jn)return!1;if(!ct)return Kd(e),ct=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||td(e.type,e.memoizedProps)),n=!n),n&&qt&&kl(e),Kd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){qt=ca(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}qt=null}}else t===27?(t=qt,Kr(e.type)?(e=ld,ld=null,qt=e):qt=t):qt=jn?ca(e.stateNode.nextSibling):null;return!0}function os(){qt=jn=null,ct=!1}function Gd(){var e=jl;return e!==null&&(_n===null?_n=e:_n.push.apply(_n,e),jl=null),e}function cs(e){jl===null?jl=[e]:jl.push(e)}var Ho=te(null),Nl=null,Xa=null;function Tr(e,t,n){ye(Ho,t._currentValue),t._currentValue=n}function Qa(e){e._currentValue=Ho.current,ge(Ho)}function Yo(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Ko(e,t,n,a){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var f=i.dependencies;if(f!==null){var v=i.child;f=f.firstContext;e:for(;f!==null;){var k=f;f=i;for(var M=0;M<t.length;M++)if(k.context===t[M]){f.lanes|=n,k=f.alternate,k!==null&&(k.lanes|=n),Yo(f.return,n,e),a||(v=null);break e}f=k.next}}else if(i.tag===18){if(v=i.return,v===null)throw Error(c(341));v.lanes|=n,f=v.alternate,f!==null&&(f.lanes|=n),Yo(v,n,e),v=null}else v=i.child;if(v!==null)v.return=i;else for(v=i;v!==null;){if(v===e){v=null;break}if(i=v.sibling,i!==null){i.return=v.return,v=i;break}v=v.return}i=v}}function ds(e,t,n,a){e=null;for(var i=t,f=!1;i!==null;){if(!f){if((i.flags&524288)!==0)f=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var v=i.alternate;if(v===null)throw Error(c(387));if(v=v.memoizedProps,v!==null){var k=i.type;Ut(i.pendingProps.value,v.value)||(e!==null?e.push(k):e=[k])}}else if(i===Zt.current){if(v=i.alternate,v===null)throw Error(c(387));v.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(Hs):e=[Hs])}i=i.return}e!==null&&Ko(t,e,n,a),t.flags|=262144}function xu(e){for(e=e.firstContext;e!==null;){if(!Ut(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function El(e){Nl=e,Xa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function mn(e){return $d(Nl,e)}function bu(e,t){return Nl===null&&El(e),$d(e,t)}function $d(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Xa===null){if(e===null)throw Error(c(308));Xa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Xa=Xa.next=t;return n}var Vg=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Pg=r.unstable_scheduleCallback,Fg=r.unstable_NormalPriority,Wt={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Go(){return{controller:new Vg,data:new Map,refCount:0}}function fs(e){e.refCount--,e.refCount===0&&Pg(Fg,function(){e.controller.abort()})}var hs=null,$o=0,ai=0,ri=null;function Zg(e,t){if(hs===null){var n=hs=[];$o=0,ai=Qc(),ri={status:"pending",value:void 0,then:function(a){n.push(a)}}}return $o++,t.then(Xd,Xd),t}function Xd(){if(--$o===0&&hs!==null){ri!==null&&(ri.status="fulfilled");var e=hs;hs=null,ai=0,ri=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Jg(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var i=0;i<n.length;i++)(0,n[i])(t)},function(i){for(a.status="rejected",a.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),a}var Qd=Z.S;Z.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Zg(e,t),Qd!==null&&Qd(e,t)};var Tl=te(null);function Xo(){var e=Tl.current;return e!==null?e:Et.pooledCache}function wu(e,t){t===null?ye(Tl,Tl.current):ye(Tl,t.pool)}function Vd(){var e=Xo();return e===null?null:{parent:Wt._currentValue,pool:e}}var ms=Error(c(460)),Pd=Error(c(474)),Su=Error(c(542)),Qo={then:function(){}};function Fd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ju(){}function Zd(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ju,ju),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Wd(e),e;default:if(typeof t.status=="string")t.then(ju,ju);else{if(e=Et,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=a}},function(a){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Wd(e),e}throw gs=t,ms}}var gs=null;function Jd(){if(gs===null)throw Error(c(459));var e=gs;return gs=null,e}function Wd(e){if(e===ms||e===Su)throw Error(c(483))}var Ar=!1;function Vo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Po(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Cr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _r(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(ht&2)!==0){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,t=Qt(e),xl(e,null,n),t}return Ke(e,a,t,n),Qt(e)}function ps(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,zl(e,n)}}function Fo(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var i=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var v={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};f===null?i=f=v:f=f.next=v,n=n.next}while(n!==null);f===null?i=f=t:f=f.next=t}else i=f=t;n={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:f,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Zo=!1;function ys(){if(Zo){var e=ri;if(e!==null)throw e}}function vs(e,t,n,a){Zo=!1;var i=e.updateQueue;Ar=!1;var f=i.firstBaseUpdate,v=i.lastBaseUpdate,k=i.shared.pending;if(k!==null){i.shared.pending=null;var M=k,F=M.next;M.next=null,v===null?f=F:v.next=F,v=M;var le=e.alternate;le!==null&&(le=le.updateQueue,k=le.lastBaseUpdate,k!==v&&(k===null?le.firstBaseUpdate=F:k.next=F,le.lastBaseUpdate=M))}if(f!==null){var oe=i.baseState;v=0,le=F=M=null,k=f;do{var J=k.lane&-536870913,W=J!==k.lane;if(W?(ut&J)===J:(a&J)===J){J!==0&&J===ai&&(Zo=!0),le!==null&&(le=le.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Qe=e,He=k;J=t;var wt=n;switch(He.tag){case 1:if(Qe=He.payload,typeof Qe=="function"){oe=Qe.call(wt,oe,J);break e}oe=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=He.payload,J=typeof Qe=="function"?Qe.call(wt,oe,J):Qe,J==null)break e;oe=S({},oe,J);break e;case 2:Ar=!0}}J=k.callback,J!==null&&(e.flags|=64,W&&(e.flags|=8192),W=i.callbacks,W===null?i.callbacks=[J]:W.push(J))}else W={lane:J,tag:k.tag,payload:k.payload,callback:k.callback,next:null},le===null?(F=le=W,M=oe):le=le.next=W,v|=J;if(k=k.next,k===null){if(k=i.shared.pending,k===null)break;W=k,k=W.next,W.next=null,i.lastBaseUpdate=W,i.shared.pending=null}}while(!0);le===null&&(M=oe),i.baseState=M,i.firstBaseUpdate=F,i.lastBaseUpdate=le,f===null&&(i.shared.lanes=0),qr|=v,e.lanes=v,e.memoizedState=oe}}function Id(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function ef(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Id(n[e],t)}var li=te(null),ku=te(0);function tf(e,t){e=Ia,ye(ku,e),ye(li,t),Ia=e|t.baseLanes}function Jo(){ye(ku,Ia),ye(li,li.current)}function Wo(){Ia=ku.current,ge(li),ge(ku)}var Dr=0,et=null,xt=null,Vt=null,Nu=!1,ii=!1,Al=!1,Eu=0,xs=0,si=null,Wg=0;function Kt(){throw Error(c(321))}function Io(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ut(e[n],t[n]))return!1;return!0}function ec(e,t,n,a,i,f){return Dr=f,et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Z.H=e===null||e.memoizedState===null?Lf:Hf,Al=!1,f=n(a,i),Al=!1,ii&&(f=af(t,n,a,i)),nf(e),f}function nf(e){Z.H=Mu;var t=xt!==null&&xt.next!==null;if(Dr=0,Vt=xt=et=null,Nu=!1,xs=0,si=null,t)throw Error(c(300));e===null||tn||(e=e.dependencies,e!==null&&xu(e)&&(tn=!0))}function af(e,t,n,a){et=e;var i=0;do{if(ii&&(si=null),xs=0,ii=!1,25<=i)throw Error(c(301));if(i+=1,Vt=xt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Z.H=lp,f=t(n,a)}while(ii);return f}function Ig(){var e=Z.H,t=e.useState()[0];return t=typeof t.then=="function"?bs(t):t,e=e.useState()[0],(xt!==null?xt.memoizedState:null)!==e&&(et.flags|=1024),t}function tc(){var e=Eu!==0;return Eu=0,e}function nc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ac(e){if(Nu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Nu=!1}Dr=0,Vt=xt=et=null,ii=!1,xs=Eu=0,si=null}function An(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?et.memoizedState=Vt=e:Vt=Vt.next=e,Vt}function Pt(){if(xt===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=xt.next;var t=Vt===null?et.memoizedState:Vt.next;if(t!==null)Vt=t,xt=e;else{if(e===null)throw et.alternate===null?Error(c(467)):Error(c(310));xt=e,e={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Vt===null?et.memoizedState=Vt=e:Vt=Vt.next=e}return Vt}function rc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bs(e){var t=xs;return xs+=1,si===null&&(si=[]),e=Zd(si,e,t),t=et,(Vt===null?t.memoizedState:Vt.next)===null&&(t=t.alternate,Z.H=t===null||t.memoizedState===null?Lf:Hf),e}function Tu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return bs(e);if(e.$$typeof===U)return mn(e)}throw Error(c(438,String(e)))}function lc(e){var t=null,n=et.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=et.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=rc(),et.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=me;return t.index++,n}function Va(e,t){return typeof t=="function"?t(e):t}function Au(e){var t=Pt();return ic(t,xt,e)}function ic(e,t,n){var a=e.queue;if(a===null)throw Error(c(311));a.lastRenderedReducer=n;var i=e.baseQueue,f=a.pending;if(f!==null){if(i!==null){var v=i.next;i.next=f.next,f.next=v}t.baseQueue=i=f,a.pending=null}if(f=e.baseState,i===null)e.memoizedState=f;else{t=i.next;var k=v=null,M=null,F=t,le=!1;do{var oe=F.lane&-536870913;if(oe!==F.lane?(ut&oe)===oe:(Dr&oe)===oe){var J=F.revertLane;if(J===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),oe===ai&&(le=!0);else if((Dr&J)===J){F=F.next,J===ai&&(le=!0);continue}else oe={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},M===null?(k=M=oe,v=f):M=M.next=oe,et.lanes|=J,qr|=J;oe=F.action,Al&&n(f,oe),f=F.hasEagerState?F.eagerState:n(f,oe)}else J={lane:oe,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},M===null?(k=M=J,v=f):M=M.next=J,et.lanes|=oe,qr|=oe;F=F.next}while(F!==null&&F!==t);if(M===null?v=f:M.next=k,!Ut(f,e.memoizedState)&&(tn=!0,le&&(n=ri,n!==null)))throw n;e.memoizedState=f,e.baseState=v,e.baseQueue=M,a.lastRenderedState=f}return i===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function sc(e){var t=Pt(),n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var a=n.dispatch,i=n.pending,f=t.memoizedState;if(i!==null){n.pending=null;var v=i=i.next;do f=e(f,v.action),v=v.next;while(v!==i);Ut(f,t.memoizedState)||(tn=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),n.lastRenderedState=f}return[f,a]}function rf(e,t,n){var a=et,i=Pt(),f=ct;if(f){if(n===void 0)throw Error(c(407));n=n()}else n=t();var v=!Ut((xt||i).memoizedState,n);v&&(i.memoizedState=n,tn=!0),i=i.queue;var k=uf.bind(null,a,i,e);if(ws(2048,8,k,[e]),i.getSnapshot!==t||v||Vt!==null&&Vt.memoizedState.tag&1){if(a.flags|=2048,ui(9,Cu(),sf.bind(null,a,i,n,t),null),Et===null)throw Error(c(349));f||(Dr&124)!==0||lf(a,t,n)}return n}function lf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=et.updateQueue,t===null?(t=rc(),et.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function sf(e,t,n,a){t.value=n,t.getSnapshot=a,of(t)&&cf(e)}function uf(e,t,n){return n(function(){of(t)&&cf(e)})}function of(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ut(e,n)}catch{return!0}}function cf(e){var t=Rt(e,2);t!==null&&Kn(t,e,2)}function uc(e){var t=An();if(typeof e=="function"){var n=e;if(e=n(),Al){vn(!0);try{n()}finally{vn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:e},t}function df(e,t,n,a){return e.baseState=n,ic(e,xt,typeof a=="function"?a:Va)}function ep(e,t,n,a,i){if(Du(e))throw Error(c(485));if(e=t.action,e!==null){var f={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};Z.T!==null?n(!0):f.isTransition=!1,a(f),n=t.pending,n===null?(f.next=t.pending=f,ff(t,f)):(f.next=n.next,t.pending=n.next=f)}}function ff(e,t){var n=t.action,a=t.payload,i=e.state;if(t.isTransition){var f=Z.T,v={};Z.T=v;try{var k=n(i,a),M=Z.S;M!==null&&M(v,k),hf(e,t,k)}catch(F){oc(e,t,F)}finally{Z.T=f}}else try{f=n(i,a),hf(e,t,f)}catch(F){oc(e,t,F)}}function hf(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){mf(e,t,a)},function(a){return oc(e,t,a)}):mf(e,t,n)}function mf(e,t,n){t.status="fulfilled",t.value=n,gf(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,ff(e,n)))}function oc(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,gf(t),t=t.next;while(t!==a)}e.action=null}function gf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function pf(e,t){return t}function yf(e,t){if(ct){var n=Et.formState;if(n!==null){e:{var a=et;if(ct){if(qt){t:{for(var i=qt,f=ja;i.nodeType!==8;){if(!f){i=null;break t}if(i=ca(i.nextSibling),i===null){i=null;break t}}f=i.data,i=f==="F!"||f==="F"?i:null}if(i){qt=ca(i.nextSibling),a=i.data==="F!";break e}}kl(a)}a=!1}a&&(t=n[0])}}return n=An(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pf,lastRenderedState:t},n.queue=a,n=Bf.bind(null,et,a),a.dispatch=n,a=uc(!1),f=mc.bind(null,et,!1,a.queue),a=An(),i={state:t,dispatch:null,action:e,pending:null},a.queue=i,n=ep.bind(null,et,i,f,n),i.dispatch=n,a.memoizedState=e,[t,n,!1]}function vf(e){var t=Pt();return xf(t,xt,e)}function xf(e,t,n){if(t=ic(e,t,pf)[0],e=Au(Va)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=bs(t)}catch(v){throw v===ms?Su:v}else a=t;t=Pt();var i=t.queue,f=i.dispatch;return n!==t.memoizedState&&(et.flags|=2048,ui(9,Cu(),tp.bind(null,i,n),null)),[a,f,e]}function tp(e,t){e.action=t}function bf(e){var t=Pt(),n=xt;if(n!==null)return xf(t,n,e);Pt(),t=t.memoizedState,n=Pt();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function ui(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=et.updateQueue,t===null&&(t=rc(),et.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Cu(){return{destroy:void 0,resource:void 0}}function wf(){return Pt().memoizedState}function _u(e,t,n,a){var i=An();a=a===void 0?null:a,et.flags|=e,i.memoizedState=ui(1|t,Cu(),n,a)}function ws(e,t,n,a){var i=Pt();a=a===void 0?null:a;var f=i.memoizedState.inst;xt!==null&&a!==null&&Io(a,xt.memoizedState.deps)?i.memoizedState=ui(t,f,n,a):(et.flags|=e,i.memoizedState=ui(1|t,f,n,a))}function Sf(e,t){_u(8390656,8,e,t)}function jf(e,t){ws(2048,8,e,t)}function kf(e,t){return ws(4,2,e,t)}function Nf(e,t){return ws(4,4,e,t)}function Ef(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Tf(e,t,n){n=n!=null?n.concat([e]):null,ws(4,4,Ef.bind(null,t,e),n)}function cc(){}function Af(e,t){var n=Pt();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&Io(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Cf(e,t){var n=Pt();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&Io(t,a[1]))return a[0];if(a=e(),Al){vn(!0);try{e()}finally{vn(!1)}}return n.memoizedState=[a,t],a}function dc(e,t,n){return n===void 0||(Dr&1073741824)!==0?e.memoizedState=t:(e.memoizedState=n,e=Mh(),et.lanes|=e,qr|=e,n)}function _f(e,t,n,a){return Ut(n,t)?n:li.current!==null?(e=dc(e,n,a),Ut(e,t)||(tn=!0),e):(Dr&42)===0?(tn=!0,e.memoizedState=n):(e=Mh(),et.lanes|=e,qr|=e,t)}function Df(e,t,n,a,i){var f=xe.p;xe.p=f!==0&&8>f?f:8;var v=Z.T,k={};Z.T=k,mc(e,!1,t,n);try{var M=i(),F=Z.S;if(F!==null&&F(k,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var le=Jg(M,a);Ss(e,t,le,Yn(e))}else Ss(e,t,a,Yn(e))}catch(oe){Ss(e,t,{then:function(){},status:"rejected",reason:oe},Yn())}finally{xe.p=f,Z.T=v}}function np(){}function fc(e,t,n,a){if(e.tag!==5)throw Error(c(476));var i=Mf(e).queue;Df(e,i,t,Me,n===null?np:function(){return Of(e),n(a)})}function Mf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Me,baseState:Me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:Me},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Of(e){var t=Mf(e).next.queue;Ss(e,t,{},Yn())}function hc(){return mn(Hs)}function Rf(){return Pt().memoizedState}function zf(){return Pt().memoizedState}function ap(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Yn();e=Cr(n);var a=_r(t,e,n);a!==null&&(Kn(a,t,n),ps(a,t,n)),t={cache:Go()},e.payload=t;return}t=t.return}}function rp(e,t,n){var a=Yn();n={lane:a,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Du(e)?Uf(t,n):(n=Xt(e,t,n,a),n!==null&&(Kn(n,e,a),qf(n,t,a)))}function Bf(e,t,n){var a=Yn();Ss(e,t,n,a)}function Ss(e,t,n,a){var i={lane:a,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Du(e))Uf(t,i);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var v=t.lastRenderedState,k=f(v,n);if(i.hasEagerState=!0,i.eagerState=k,Ut(k,v))return Ke(e,t,i,0),Et===null&&jt(),!1}catch{}finally{}if(n=Xt(e,t,i,a),n!==null)return Kn(n,e,a),qf(n,t,a),!0}return!1}function mc(e,t,n,a){if(a={lane:2,revertLane:Qc(),action:a,hasEagerState:!1,eagerState:null,next:null},Du(e)){if(t)throw Error(c(479))}else t=Xt(e,n,a,2),t!==null&&Kn(t,e,2)}function Du(e){var t=e.alternate;return e===et||t!==null&&t===et}function Uf(e,t){ii=Nu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qf(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,zl(e,n)}}var Mu={readContext:mn,use:Tu,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useLayoutEffect:Kt,useInsertionEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useSyncExternalStore:Kt,useId:Kt,useHostTransitionStatus:Kt,useFormState:Kt,useActionState:Kt,useOptimistic:Kt,useMemoCache:Kt,useCacheRefresh:Kt},Lf={readContext:mn,use:Tu,useCallback:function(e,t){return An().memoizedState=[e,t===void 0?null:t],e},useContext:mn,useEffect:Sf,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,_u(4194308,4,Ef.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _u(4194308,4,e,t)},useInsertionEffect:function(e,t){_u(4,2,e,t)},useMemo:function(e,t){var n=An();t=t===void 0?null:t;var a=e();if(Al){vn(!0);try{e()}finally{vn(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=An();if(n!==void 0){var i=n(t);if(Al){vn(!0);try{n(t)}finally{vn(!1)}}}else i=t;return a.memoizedState=a.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},a.queue=e,e=e.dispatch=rp.bind(null,et,e),[a.memoizedState,e]},useRef:function(e){var t=An();return e={current:e},t.memoizedState=e},useState:function(e){e=uc(e);var t=e.queue,n=Bf.bind(null,et,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:cc,useDeferredValue:function(e,t){var n=An();return dc(n,e,t)},useTransition:function(){var e=uc(!1);return e=Df.bind(null,et,e.queue,!0,!1),An().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=et,i=An();if(ct){if(n===void 0)throw Error(c(407));n=n()}else{if(n=t(),Et===null)throw Error(c(349));(ut&124)!==0||lf(a,t,n)}i.memoizedState=n;var f={value:n,getSnapshot:t};return i.queue=f,Sf(uf.bind(null,a,f,e),[e]),a.flags|=2048,ui(9,Cu(),sf.bind(null,a,f,n,t),null),n},useId:function(){var e=An(),t=Et.identifierPrefix;if(ct){var n=$a,a=Ga;n=(a&~(1<<32-Mt(a)-1)).toString(32)+n,t=""+t+"R"+n,n=Eu++,0<n&&(t+="H"+n.toString(32)),t+=""}else n=Wg++,t=""+t+"r"+n.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:hc,useFormState:yf,useActionState:yf,useOptimistic:function(e){var t=An();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=mc.bind(null,et,!0,n),n.dispatch=t,[e,t]},useMemoCache:lc,useCacheRefresh:function(){return An().memoizedState=ap.bind(null,et)}},Hf={readContext:mn,use:Tu,useCallback:Af,useContext:mn,useEffect:jf,useImperativeHandle:Tf,useInsertionEffect:kf,useLayoutEffect:Nf,useMemo:Cf,useReducer:Au,useRef:wf,useState:function(){return Au(Va)},useDebugValue:cc,useDeferredValue:function(e,t){var n=Pt();return _f(n,xt.memoizedState,e,t)},useTransition:function(){var e=Au(Va)[0],t=Pt().memoizedState;return[typeof e=="boolean"?e:bs(e),t]},useSyncExternalStore:rf,useId:Rf,useHostTransitionStatus:hc,useFormState:vf,useActionState:vf,useOptimistic:function(e,t){var n=Pt();return df(n,xt,e,t)},useMemoCache:lc,useCacheRefresh:zf},lp={readContext:mn,use:Tu,useCallback:Af,useContext:mn,useEffect:jf,useImperativeHandle:Tf,useInsertionEffect:kf,useLayoutEffect:Nf,useMemo:Cf,useReducer:sc,useRef:wf,useState:function(){return sc(Va)},useDebugValue:cc,useDeferredValue:function(e,t){var n=Pt();return xt===null?dc(n,e,t):_f(n,xt.memoizedState,e,t)},useTransition:function(){var e=sc(Va)[0],t=Pt().memoizedState;return[typeof e=="boolean"?e:bs(e),t]},useSyncExternalStore:rf,useId:Rf,useHostTransitionStatus:hc,useFormState:bf,useActionState:bf,useOptimistic:function(e,t){var n=Pt();return xt!==null?df(n,xt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:lc,useCacheRefresh:zf},oi=null,js=0;function Ou(e){var t=js;return js+=1,oi===null&&(oi=[]),Zd(oi,e,t)}function ks(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ru(e,t){throw t.$$typeof===T?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Yf(e){var t=e._init;return t(e._payload)}function Kf(e){function t($,z){if(e){var P=$.deletions;P===null?($.deletions=[z],$.flags|=16):P.push(z)}}function n($,z){if(!e)return null;for(;z!==null;)t($,z),z=z.sibling;return null}function a($){for(var z=new Map;$!==null;)$.key!==null?z.set($.key,$):z.set($.index,$),$=$.sibling;return z}function i($,z){return $=Ka($,z),$.index=0,$.sibling=null,$}function f($,z,P){return $.index=P,e?(P=$.alternate,P!==null?(P=P.index,P<z?($.flags|=67108866,z):P):($.flags|=67108866,z)):($.flags|=1048576,z)}function v($){return e&&$.alternate===null&&($.flags|=67108866),$}function k($,z,P,ie){return z===null||z.tag!==6?(z=zo(P,$.mode,ie),z.return=$,z):(z=i(z,P),z.return=$,z)}function M($,z,P,ie){var Re=P.type;return Re===V?le($,z,P.props.children,ie,P.key):z!==null&&(z.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===_e&&Yf(Re)===z.type)?(z=i(z,P.props),ks(z,P),z.return=$,z):(z=pu(P.type,P.key,P.props,null,$.mode,ie),ks(z,P),z.return=$,z)}function F($,z,P,ie){return z===null||z.tag!==4||z.stateNode.containerInfo!==P.containerInfo||z.stateNode.implementation!==P.implementation?(z=Bo(P,$.mode,ie),z.return=$,z):(z=i(z,P.children||[]),z.return=$,z)}function le($,z,P,ie,Re){return z===null||z.tag!==7?(z=bl(P,$.mode,ie,Re),z.return=$,z):(z=i(z,P),z.return=$,z)}function oe($,z,P){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=zo(""+z,$.mode,P),z.return=$,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Q:return P=pu(z.type,z.key,z.props,null,$.mode,P),ks(P,z),P.return=$,P;case ee:return z=Bo(z,$.mode,P),z.return=$,z;case _e:var ie=z._init;return z=ie(z._payload),oe($,z,P)}if(Pe(z)||Ce(z))return z=bl(z,$.mode,P,null),z.return=$,z;if(typeof z.then=="function")return oe($,Ou(z),P);if(z.$$typeof===U)return oe($,bu($,z),P);Ru($,z)}return null}function J($,z,P,ie){var Re=z!==null?z.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return Re!==null?null:k($,z,""+P,ie);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Q:return P.key===Re?M($,z,P,ie):null;case ee:return P.key===Re?F($,z,P,ie):null;case _e:return Re=P._init,P=Re(P._payload),J($,z,P,ie)}if(Pe(P)||Ce(P))return Re!==null?null:le($,z,P,ie,null);if(typeof P.then=="function")return J($,z,Ou(P),ie);if(P.$$typeof===U)return J($,z,bu($,P),ie);Ru($,P)}return null}function W($,z,P,ie,Re){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return $=$.get(P)||null,k(z,$,""+ie,Re);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case Q:return $=$.get(ie.key===null?P:ie.key)||null,M(z,$,ie,Re);case ee:return $=$.get(ie.key===null?P:ie.key)||null,F(z,$,ie,Re);case _e:var tt=ie._init;return ie=tt(ie._payload),W($,z,P,ie,Re)}if(Pe(ie)||Ce(ie))return $=$.get(P)||null,le(z,$,ie,Re,null);if(typeof ie.then=="function")return W($,z,P,Ou(ie),Re);if(ie.$$typeof===U)return W($,z,P,bu(z,ie),Re);Ru(z,ie)}return null}function Qe($,z,P,ie){for(var Re=null,tt=null,Be=z,Ge=z=0,an=null;Be!==null&&Ge<P.length;Ge++){Be.index>Ge?(an=Be,Be=null):an=Be.sibling;var ot=J($,Be,P[Ge],ie);if(ot===null){Be===null&&(Be=an);break}e&&Be&&ot.alternate===null&&t($,Be),z=f(ot,z,Ge),tt===null?Re=ot:tt.sibling=ot,tt=ot,Be=an}if(Ge===P.length)return n($,Be),ct&&Sl($,Ge),Re;if(Be===null){for(;Ge<P.length;Ge++)Be=oe($,P[Ge],ie),Be!==null&&(z=f(Be,z,Ge),tt===null?Re=Be:tt.sibling=Be,tt=Be);return ct&&Sl($,Ge),Re}for(Be=a(Be);Ge<P.length;Ge++)an=W(Be,$,Ge,P[Ge],ie),an!==null&&(e&&an.alternate!==null&&Be.delete(an.key===null?Ge:an.key),z=f(an,z,Ge),tt===null?Re=an:tt.sibling=an,tt=an);return e&&Be.forEach(function(Vr){return t($,Vr)}),ct&&Sl($,Ge),Re}function He($,z,P,ie){if(P==null)throw Error(c(151));for(var Re=null,tt=null,Be=z,Ge=z=0,an=null,ot=P.next();Be!==null&&!ot.done;Ge++,ot=P.next()){Be.index>Ge?(an=Be,Be=null):an=Be.sibling;var Vr=J($,Be,ot.value,ie);if(Vr===null){Be===null&&(Be=an);break}e&&Be&&Vr.alternate===null&&t($,Be),z=f(Vr,z,Ge),tt===null?Re=Vr:tt.sibling=Vr,tt=Vr,Be=an}if(ot.done)return n($,Be),ct&&Sl($,Ge),Re;if(Be===null){for(;!ot.done;Ge++,ot=P.next())ot=oe($,ot.value,ie),ot!==null&&(z=f(ot,z,Ge),tt===null?Re=ot:tt.sibling=ot,tt=ot);return ct&&Sl($,Ge),Re}for(Be=a(Be);!ot.done;Ge++,ot=P.next())ot=W(Be,$,Ge,ot.value,ie),ot!==null&&(e&&ot.alternate!==null&&Be.delete(ot.key===null?Ge:ot.key),z=f(ot,z,Ge),tt===null?Re=ot:tt.sibling=ot,tt=ot);return e&&Be.forEach(function(i0){return t($,i0)}),ct&&Sl($,Ge),Re}function wt($,z,P,ie){if(typeof P=="object"&&P!==null&&P.type===V&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case Q:e:{for(var Re=P.key;z!==null;){if(z.key===Re){if(Re=P.type,Re===V){if(z.tag===7){n($,z.sibling),ie=i(z,P.props.children),ie.return=$,$=ie;break e}}else if(z.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===_e&&Yf(Re)===z.type){n($,z.sibling),ie=i(z,P.props),ks(ie,P),ie.return=$,$=ie;break e}n($,z);break}else t($,z);z=z.sibling}P.type===V?(ie=bl(P.props.children,$.mode,ie,P.key),ie.return=$,$=ie):(ie=pu(P.type,P.key,P.props,null,$.mode,ie),ks(ie,P),ie.return=$,$=ie)}return v($);case ee:e:{for(Re=P.key;z!==null;){if(z.key===Re)if(z.tag===4&&z.stateNode.containerInfo===P.containerInfo&&z.stateNode.implementation===P.implementation){n($,z.sibling),ie=i(z,P.children||[]),ie.return=$,$=ie;break e}else{n($,z);break}else t($,z);z=z.sibling}ie=Bo(P,$.mode,ie),ie.return=$,$=ie}return v($);case _e:return Re=P._init,P=Re(P._payload),wt($,z,P,ie)}if(Pe(P))return Qe($,z,P,ie);if(Ce(P)){if(Re=Ce(P),typeof Re!="function")throw Error(c(150));return P=Re.call(P),He($,z,P,ie)}if(typeof P.then=="function")return wt($,z,Ou(P),ie);if(P.$$typeof===U)return wt($,z,bu($,P),ie);Ru($,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,z!==null&&z.tag===6?(n($,z.sibling),ie=i(z,P),ie.return=$,$=ie):(n($,z),ie=zo(P,$.mode,ie),ie.return=$,$=ie),v($)):n($,z)}return function($,z,P,ie){try{js=0;var Re=wt($,z,P,ie);return oi=null,Re}catch(Be){if(Be===ms||Be===Su)throw Be;var tt=Un(29,Be,null,$.mode);return tt.lanes=ie,tt.return=$,tt}finally{}}}var ci=Kf(!0),Gf=Kf(!1),Wn=te(null),ka=null;function Mr(e){var t=e.alternate;ye(It,It.current&1),ye(Wn,e),ka===null&&(t===null||li.current!==null||t.memoizedState!==null)&&(ka=e)}function $f(e){if(e.tag===22){if(ye(It,It.current),ye(Wn,e),ka===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(ka=e)}}else Or()}function Or(){ye(It,It.current),ye(Wn,Wn.current)}function Pa(e){ge(Wn),ka===e&&(ka=null),ge(It)}var It=te(0);function zu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||rd(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function gc(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:S({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var pc={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Yn(),i=Cr(a);i.payload=t,n!=null&&(i.callback=n),t=_r(e,i,a),t!==null&&(Kn(t,e,a),ps(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Yn(),i=Cr(a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=_r(e,i,a),t!==null&&(Kn(t,e,a),ps(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Yn(),a=Cr(n);a.tag=2,t!=null&&(a.callback=t),t=_r(e,a,n),t!==null&&(Kn(t,e,n),ps(t,e,n))}};function Xf(e,t,n,a,i,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,v):t.prototype&&t.prototype.isPureReactComponent?!Er(n,a)||!Er(i,f):!0}function Qf(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&pc.enqueueReplaceState(t,t.state,null)}function Cl(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=S({},n));for(var i in e)n[i]===void 0&&(n[i]=e[i])}return n}var Bu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Vf(e){Bu(e)}function Pf(e){console.error(e)}function Ff(e){Bu(e)}function Uu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function Zf(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function yc(e,t,n){return n=Cr(n),n.tag=3,n.payload={element:null},n.callback=function(){Uu(e,t)},n}function Jf(e){return e=Cr(e),e.tag=3,e}function Wf(e,t,n,a){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var f=a.value;e.payload=function(){return i(f)},e.callback=function(){Zf(t,n,a)}}var v=n.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Zf(t,n,a),typeof i!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var k=a.stack;this.componentDidCatch(a.value,{componentStack:k!==null?k:""})})}function ip(e,t,n,a,i){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&ds(t,n,i,!0),n=Wn.current,n!==null){switch(n.tag){case 13:return ka===null?Yc():n.alternate===null&&Lt===0&&(Lt=3),n.flags&=-257,n.flags|=65536,n.lanes=i,a===Qo?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),Gc(e,a,i)),!1;case 22:return n.flags|=65536,a===Qo?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),Gc(e,a,i)),!1}throw Error(c(435,n.tag))}return Gc(e,a,i),Yc(),!1}if(ct)return t=Wn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,a!==Lo&&(e=Error(c(422),{cause:a}),cs(Ne(e,n)))):(a!==Lo&&(t=Error(c(423),{cause:a}),cs(Ne(t,n))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,a=Ne(a,n),i=yc(e.stateNode,a,i),Fo(e,i),Lt!==4&&(Lt=2)),!1;var f=Error(c(520),{cause:a});if(f=Ne(f,n),Ds===null?Ds=[f]:Ds.push(f),Lt!==4&&(Lt=2),t===null)return!0;a=Ne(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=yc(n.stateNode,a,e),Fo(n,e),!1;case 1:if(t=n.type,f=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Lr===null||!Lr.has(f))))return n.flags|=65536,i&=-i,n.lanes|=i,i=Jf(i),Wf(i,e,n,a),Fo(n,i),!1}n=n.return}while(n!==null);return!1}var If=Error(c(461)),tn=!1;function ln(e,t,n,a){t.child=e===null?Gf(t,null,n,a):ci(t,e.child,n,a)}function eh(e,t,n,a,i){n=n.render;var f=t.ref;if("ref"in a){var v={};for(var k in a)k!=="ref"&&(v[k]=a[k])}else v=a;return El(t),a=ec(e,t,n,v,f,i),k=tc(),e!==null&&!tn?(nc(e,t,i),Fa(e,t,i)):(ct&&k&&Uo(t),t.flags|=1,ln(e,t,a,i),t.child)}function th(e,t,n,a,i){if(e===null){var f=n.type;return typeof f=="function"&&!Ro(f)&&f.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=f,nh(e,t,f,a,i)):(e=pu(n.type,null,a,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!Nc(e,i)){var v=f.memoizedProps;if(n=n.compare,n=n!==null?n:Er,n(v,a)&&e.ref===t.ref)return Fa(e,t,i)}return t.flags|=1,e=Ka(f,a),e.ref=t.ref,e.return=t,t.child=e}function nh(e,t,n,a,i){if(e!==null){var f=e.memoizedProps;if(Er(f,a)&&e.ref===t.ref)if(tn=!1,t.pendingProps=a=f,Nc(e,i))(e.flags&131072)!==0&&(tn=!0);else return t.lanes=e.lanes,Fa(e,t,i)}return vc(e,t,n,a,i)}function ah(e,t,n){var a=t.pendingProps,i=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden"){if((t.flags&128)!==0){if(a=f!==null?f.baseLanes|n:n,e!==null){for(i=t.child=e.child,f=0;i!==null;)f=f|i.lanes|i.childLanes,i=i.sibling;t.childLanes=f&~a}else t.childLanes=0,t.child=null;return rh(e,t,a,n)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&wu(t,f!==null?f.cachePool:null),f!==null?tf(t,f):Jo(),$f(t);else return t.lanes=t.childLanes=536870912,rh(e,t,f!==null?f.baseLanes|n:n,n)}else f!==null?(wu(t,f.cachePool),tf(t,f),Or(),t.memoizedState=null):(e!==null&&wu(t,null),Jo(),Or());return ln(e,t,i,n),t.child}function rh(e,t,n,a){var i=Xo();return i=i===null?null:{parent:Wt._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},e!==null&&wu(t,null),Jo(),$f(t),e!==null&&ds(e,t,a,!0),null}function qu(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(c(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function vc(e,t,n,a,i){return El(t),n=ec(e,t,n,a,void 0,i),a=tc(),e!==null&&!tn?(nc(e,t,i),Fa(e,t,i)):(ct&&a&&Uo(t),t.flags|=1,ln(e,t,n,i),t.child)}function lh(e,t,n,a,i,f){return El(t),t.updateQueue=null,n=af(t,a,n,i),nf(e),a=tc(),e!==null&&!tn?(nc(e,t,f),Fa(e,t,f)):(ct&&a&&Uo(t),t.flags|=1,ln(e,t,n,f),t.child)}function ih(e,t,n,a,i){if(El(t),t.stateNode===null){var f=Tn,v=n.contextType;typeof v=="object"&&v!==null&&(f=mn(v)),f=new n(a,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=pc,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=a,f.state=t.memoizedState,f.refs={},Vo(t),v=n.contextType,f.context=typeof v=="object"&&v!==null?mn(v):Tn,f.state=t.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(gc(t,n,v,a),f.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&pc.enqueueReplaceState(f,f.state,null),vs(t,a,f,i),ys(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){f=t.stateNode;var k=t.memoizedProps,M=Cl(n,k);f.props=M;var F=f.context,le=n.contextType;v=Tn,typeof le=="object"&&le!==null&&(v=mn(le));var oe=n.getDerivedStateFromProps;le=typeof oe=="function"||typeof f.getSnapshotBeforeUpdate=="function",k=t.pendingProps!==k,le||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(k||F!==v)&&Qf(t,f,a,v),Ar=!1;var J=t.memoizedState;f.state=J,vs(t,a,f,i),ys(),F=t.memoizedState,k||J!==F||Ar?(typeof oe=="function"&&(gc(t,n,oe,a),F=t.memoizedState),(M=Ar||Xf(t,n,M,a,J,F,v))?(le||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=F),f.props=a,f.state=F,f.context=v,a=M):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{f=t.stateNode,Po(e,t),v=t.memoizedProps,le=Cl(n,v),f.props=le,oe=t.pendingProps,J=f.context,F=n.contextType,M=Tn,typeof F=="object"&&F!==null&&(M=mn(F)),k=n.getDerivedStateFromProps,(F=typeof k=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==oe||J!==M)&&Qf(t,f,a,M),Ar=!1,J=t.memoizedState,f.state=J,vs(t,a,f,i),ys();var W=t.memoizedState;v!==oe||J!==W||Ar||e!==null&&e.dependencies!==null&&xu(e.dependencies)?(typeof k=="function"&&(gc(t,n,k,a),W=t.memoizedState),(le=Ar||Xf(t,n,le,a,J,W,M)||e!==null&&e.dependencies!==null&&xu(e.dependencies))?(F||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,W,M),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,W,M)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&J===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&J===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=W),f.props=a,f.state=W,f.context=M,a=le):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&J===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&J===e.memoizedState||(t.flags|=1024),a=!1)}return f=a,qu(e,t),a=(t.flags&128)!==0,f||a?(f=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&a?(t.child=ci(t,e.child,null,i),t.child=ci(t,null,n,i)):ln(e,t,n,i),t.memoizedState=f.state,e=t.child):e=Fa(e,t,i),e}function sh(e,t,n,a){return os(),t.flags|=256,ln(e,t,n,a),t.child}var xc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bc(e){return{baseLanes:e,cachePool:Vd()}}function wc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=In),e}function uh(e,t,n){var a=t.pendingProps,i=!1,f=(t.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(It.current&2)!==0),v&&(i=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(ct){if(i?Mr(t):Or(),ct){var k=qt,M;if(M=k){e:{for(M=k,k=ja;M.nodeType!==8;){if(!k){k=null;break e}if(M=ca(M.nextSibling),M===null){k=null;break e}}k=M}k!==null?(t.memoizedState={dehydrated:k,treeContext:wl!==null?{id:Ga,overflow:$a}:null,retryLane:536870912,hydrationErrors:null},M=Un(18,null,null,0),M.stateNode=k,M.return=t,t.child=M,jn=t,qt=null,M=!0):M=!1}M||kl(t)}if(k=t.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return rd(k)?t.lanes=32:t.lanes=536870912,null;Pa(t)}return k=a.children,a=a.fallback,i?(Or(),i=t.mode,k=Lu({mode:"hidden",children:k},i),a=bl(a,i,n,null),k.return=t,a.return=t,k.sibling=a,t.child=k,i=t.child,i.memoizedState=bc(n),i.childLanes=wc(e,v,n),t.memoizedState=xc,a):(Mr(t),Sc(t,k))}if(M=e.memoizedState,M!==null&&(k=M.dehydrated,k!==null)){if(f)t.flags&256?(Mr(t),t.flags&=-257,t=jc(e,t,n)):t.memoizedState!==null?(Or(),t.child=e.child,t.flags|=128,t=null):(Or(),i=a.fallback,k=t.mode,a=Lu({mode:"visible",children:a.children},k),i=bl(i,k,n,null),i.flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,ci(t,e.child,null,n),a=t.child,a.memoizedState=bc(n),a.childLanes=wc(e,v,n),t.memoizedState=xc,t=i);else if(Mr(t),rd(k)){if(v=k.nextSibling&&k.nextSibling.dataset,v)var F=v.dgst;v=F,a=Error(c(419)),a.stack="",a.digest=v,cs({value:a,source:null,stack:null}),t=jc(e,t,n)}else if(tn||ds(e,t,n,!1),v=(n&e.childLanes)!==0,tn||v){if(v=Et,v!==null&&(a=n&-n,a=(a&42)!==0?1:Ui(a),a=(a&(v.suspendedLanes|n))!==0?0:a,a!==0&&a!==M.retryLane))throw M.retryLane=a,Rt(e,a),Kn(v,e,a),If;k.data==="$?"||Yc(),t=jc(e,t,n)}else k.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=M.treeContext,qt=ca(k.nextSibling),jn=t,ct=!0,jl=null,ja=!1,e!==null&&(Zn[Jn++]=Ga,Zn[Jn++]=$a,Zn[Jn++]=wl,Ga=e.id,$a=e.overflow,wl=t),t=Sc(t,a.children),t.flags|=4096);return t}return i?(Or(),i=a.fallback,k=t.mode,M=e.child,F=M.sibling,a=Ka(M,{mode:"hidden",children:a.children}),a.subtreeFlags=M.subtreeFlags&65011712,F!==null?i=Ka(F,i):(i=bl(i,k,n,null),i.flags|=2),i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,k=e.child.memoizedState,k===null?k=bc(n):(M=k.cachePool,M!==null?(F=Wt._currentValue,M=M.parent!==F?{parent:F,pool:F}:M):M=Vd(),k={baseLanes:k.baseLanes|n,cachePool:M}),i.memoizedState=k,i.childLanes=wc(e,v,n),t.memoizedState=xc,a):(Mr(t),n=e.child,e=n.sibling,n=Ka(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=n,t.memoizedState=null,n)}function Sc(e,t){return t=Lu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Lu(e,t){return e=Un(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function jc(e,t,n){return ci(t,e.child,null,n),e=Sc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function oh(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Yo(e.return,t,n)}function kc(e,t,n,a,i){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:i}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=n,f.tailMode=i)}function ch(e,t,n){var a=t.pendingProps,i=a.revealOrder,f=a.tail;if(ln(e,t,a.children,n),a=It.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&oh(e,n,t);else if(e.tag===19)oh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}switch(ye(It,a),i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&zu(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),kc(t,!1,i,n,f);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&zu(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}kc(t,!0,n,null,f);break;case"together":kc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),qr|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(ds(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,n=Ka(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ka(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Nc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&xu(e)))}function sp(e,t,n){switch(t.tag){case 3:vt(t,t.stateNode.containerInfo),Tr(t,Wt,e.memoizedState.cache),os();break;case 27:case 5:fa(t);break;case 4:vt(t,t.stateNode.containerInfo);break;case 10:Tr(t,t.type,t.memoizedProps.value);break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(Mr(t),t.flags|=128,null):(n&t.child.childLanes)!==0?uh(e,t,n):(Mr(t),e=Fa(e,t,n),e!==null?e.sibling:null);Mr(t);break;case 19:var i=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(ds(e,t,n,!1),a=(n&t.childLanes)!==0),i){if(a)return ch(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ye(It,It.current),a)break;return null;case 22:case 23:return t.lanes=0,ah(e,t,n);case 24:Tr(t,Wt,e.memoizedState.cache)}return Fa(e,t,n)}function dh(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)tn=!0;else{if(!Nc(e,n)&&(t.flags&128)===0)return tn=!1,sp(e,t,n);tn=(e.flags&131072)!==0}else tn=!1,ct&&(t.flags&1048576)!==0&&Hd(t,vu,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var a=t.elementType,i=a._init;if(a=i(a._payload),t.type=a,typeof a=="function")Ro(a)?(e=Cl(a,e),t.tag=1,t=ih(null,t,a,e,n)):(t.tag=0,t=vc(null,t,a,e,n));else{if(a!=null){if(i=a.$$typeof,i===Y){t.tag=11,t=eh(null,t,a,e,n);break e}else if(i===pe){t.tag=14,t=th(null,t,a,e,n);break e}}throw t=dt(a)||a,Error(c(306,t,""))}}return t;case 0:return vc(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,i=Cl(a,t.pendingProps),ih(e,t,a,i,n);case 3:e:{if(vt(t,t.stateNode.containerInfo),e===null)throw Error(c(387));a=t.pendingProps;var f=t.memoizedState;i=f.element,Po(e,t),vs(t,a,null,n);var v=t.memoizedState;if(a=v.cache,Tr(t,Wt,a),a!==f.cache&&Ko(t,[Wt],n,!0),ys(),a=v.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=sh(e,t,a,n);break e}else if(a!==i){i=Ne(Error(c(424)),t),cs(i),t=sh(e,t,a,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(qt=ca(e.firstChild),jn=t,ct=!0,jl=null,ja=!0,n=Gf(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(os(),a===i){t=Fa(e,t,n);break e}ln(e,t,a,n)}t=t.child}return t;case 26:return qu(e,t),e===null?(n=gm(t.type,null,t.pendingProps,null))?t.memoizedState=n:ct||(n=t.type,e=t.pendingProps,a=Iu(Ue.current).createElement(n),a[Ht]=t,a[Ie]=e,un(a,n,e),St(a),t.stateNode=a):t.memoizedState=gm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return fa(t),e===null&&ct&&(a=t.stateNode=fm(t.type,t.pendingProps,Ue.current),jn=t,ja=!0,i=qt,Kr(t.type)?(ld=i,qt=ca(a.firstChild)):qt=i),ln(e,t,t.pendingProps.children,n),qu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ct&&((i=a=qt)&&(a=zp(a,t.type,t.pendingProps,ja),a!==null?(t.stateNode=a,jn=t,qt=ca(a.firstChild),ja=!1,i=!0):i=!1),i||kl(t)),fa(t),i=t.type,f=t.pendingProps,v=e!==null?e.memoizedProps:null,a=f.children,td(i,f)?a=null:v!==null&&td(i,v)&&(t.flags|=32),t.memoizedState!==null&&(i=ec(e,t,Ig,null,null,n),Hs._currentValue=i),qu(e,t),ln(e,t,a,n),t.child;case 6:return e===null&&ct&&((e=n=qt)&&(n=Bp(n,t.pendingProps,ja),n!==null?(t.stateNode=n,jn=t,qt=null,e=!0):e=!1),e||kl(t)),null;case 13:return uh(e,t,n);case 4:return vt(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ci(t,null,a,n):ln(e,t,a,n),t.child;case 11:return eh(e,t,t.type,t.pendingProps,n);case 7:return ln(e,t,t.pendingProps,n),t.child;case 8:return ln(e,t,t.pendingProps.children,n),t.child;case 12:return ln(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Tr(t,t.type,a.value),ln(e,t,a.children,n),t.child;case 9:return i=t.type._context,a=t.pendingProps.children,El(t),i=mn(i),a=a(i),t.flags|=1,ln(e,t,a,n),t.child;case 14:return th(e,t,t.type,t.pendingProps,n);case 15:return nh(e,t,t.type,t.pendingProps,n);case 19:return ch(e,t,n);case 31:return a=t.pendingProps,n=t.mode,a={mode:a.mode,children:a.children},e===null?(n=Lu(a,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Ka(e.child,a),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return ah(e,t,n);case 24:return El(t),a=mn(Wt),e===null?(i=Xo(),i===null&&(i=Et,f=Go(),i.pooledCache=f,f.refCount++,f!==null&&(i.pooledCacheLanes|=n),i=f),t.memoizedState={parent:a,cache:i},Vo(t),Tr(t,Wt,i)):((e.lanes&n)!==0&&(Po(e,t),vs(t,null,null,n),ys()),i=e.memoizedState,f=t.memoizedState,i.parent!==a?(i={parent:a,cache:a},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),Tr(t,Wt,a)):(a=f.cache,Tr(t,Wt,a),a!==i.cache&&Ko(t,[Wt],n,!0))),ln(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function Za(e){e.flags|=4}function fh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!bm(t)){if(t=Wn.current,t!==null&&((ut&4194048)===ut?ka!==null:(ut&62914560)!==ut&&(ut&536870912)===0||t!==ka))throw gs=Qo,Pd;e.flags|=8192}}function Hu(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Te():536870912,e.lanes|=t,mi|=t)}function Ns(e,t){if(!ct)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function zt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags&65011712,a|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function up(e,t,n){var a=t.pendingProps;switch(qo(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(t),null;case 1:return zt(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Qa(Wt),Oe(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(us(t)?Za(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Gd())),zt(t),null;case 26:return n=t.memoizedState,e===null?(Za(t),n!==null?(zt(t),fh(t,n)):(zt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Za(t),zt(t),fh(t,n)):(zt(t),t.flags&=-16777217):(e.memoizedProps!==a&&Za(t),zt(t),t.flags&=-16777217),null;case 27:Gn(t),n=Ue.current;var i=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Za(t);else{if(!a){if(t.stateNode===null)throw Error(c(166));return zt(t),null}e=De.current,us(t)?Yd(t):(e=fm(i,a,n),t.stateNode=e,Za(t))}return zt(t),null;case 5:if(Gn(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Za(t);else{if(!a){if(t.stateNode===null)throw Error(c(166));return zt(t),null}if(e=De.current,us(t))Yd(t);else{switch(i=Iu(Ue.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof a.is=="string"?i.createElement("select",{is:a.is}):i.createElement("select"),a.multiple?e.multiple=!0:a.size&&(e.size=a.size);break;default:e=typeof a.is=="string"?i.createElement(n,{is:a.is}):i.createElement(n)}}e[Ht]=t,e[Ie]=a;e:for(i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(un(e,n,a),n){case"button":case"input":case"select":case"textarea":e=!!a.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Za(t)}}return zt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&Za(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(c(166));if(e=Ue.current,us(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,i=jn,i!==null)switch(i.tag){case 27:case 5:a=i.memoizedProps}e[Ht]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||lm(e.nodeValue,n)),e||kl(t)}else e=Iu(e).createTextNode(a),e[Ht]=t,t.stateNode=e}return zt(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=us(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(c(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(c(317));i[Ht]=t}else os(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;zt(t),i=!1}else i=Gd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(Pa(t),t):(Pa(t),null)}if(Pa(t),(t.flags&128)!==0)return t.lanes=n,t;if(n=a!==null,e=e!==null&&e.memoizedState!==null,n){a=t.child,i=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(i=a.alternate.memoizedState.cachePool.pool);var f=null;a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==i&&(a.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Hu(t,t.updateQueue),zt(t),null;case 4:return Oe(),e===null&&Zc(t.stateNode.containerInfo),zt(t),null;case 10:return Qa(t.type),zt(t),null;case 19:if(ge(It),i=t.memoizedState,i===null)return zt(t),null;if(a=(t.flags&128)!==0,f=i.rendering,f===null)if(a)Ns(i,!1);else{if(Lt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=zu(e),f!==null){for(t.flags|=128,Ns(i,!1),e=f.updateQueue,t.updateQueue=e,Hu(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Ld(n,e),n=n.sibling;return ye(It,It.current&1|2),t.child}e=e.sibling}i.tail!==null&&Fe()>Gu&&(t.flags|=128,a=!0,Ns(i,!1),t.lanes=4194304)}else{if(!a)if(e=zu(f),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Hu(t,e),Ns(i,!0),i.tail===null&&i.tailMode==="hidden"&&!f.alternate&&!ct)return zt(t),null}else 2*Fe()-i.renderingStartTime>Gu&&n!==536870912&&(t.flags|=128,a=!0,Ns(i,!1),t.lanes=4194304);i.isBackwards?(f.sibling=t.child,t.child=f):(e=i.last,e!==null?e.sibling=f:t.child=f,i.last=f)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Fe(),t.sibling=null,e=It.current,ye(It,a?e&1|2:e&1),t):(zt(t),null);case 22:case 23:return Pa(t),Wo(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(zt(t),t.subtreeFlags&6&&(t.flags|=8192)):zt(t),n=t.updateQueue,n!==null&&Hu(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&ge(Tl),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Qa(Wt),zt(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function op(e,t){switch(qo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qa(Wt),Oe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Gn(t),null;case 13:if(Pa(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));os()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ge(It),null;case 4:return Oe(),null;case 10:return Qa(t.type),null;case 22:case 23:return Pa(t),Wo(),e!==null&&ge(Tl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Qa(Wt),null;case 25:return null;default:return null}}function hh(e,t){switch(qo(t),t.tag){case 3:Qa(Wt),Oe();break;case 26:case 27:case 5:Gn(t);break;case 4:Oe();break;case 13:Pa(t);break;case 19:ge(It);break;case 10:Qa(t.type);break;case 22:case 23:Pa(t),Wo(),e!==null&&ge(Tl);break;case 24:Qa(Wt)}}function Es(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var i=a.next;n=i;do{if((n.tag&e)===e){a=void 0;var f=n.create,v=n.inst;a=f(),v.destroy=a}n=n.next}while(n!==i)}}catch(k){kt(t,t.return,k)}}function Rr(e,t,n){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var f=i.next;a=f;do{if((a.tag&e)===e){var v=a.inst,k=v.destroy;if(k!==void 0){v.destroy=void 0,i=t;var M=n,F=k;try{F()}catch(le){kt(i,M,le)}}}a=a.next}while(a!==f)}}catch(le){kt(t,t.return,le)}}function mh(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{ef(t,n)}catch(a){kt(e,e.return,a)}}}function gh(e,t,n){n.props=Cl(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){kt(e,t,a)}}function Ts(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(i){kt(e,t,i)}}function Na(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(i){kt(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){kt(e,t,i)}else n.current=null}function ph(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(i){kt(e,e.return,i)}}function Ec(e,t,n){try{var a=e.stateNode;_p(a,e.type,n,t),a[Ie]=t}catch(i){kt(e,e.return,i)}}function yh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Kr(e.type)||e.tag===4}function Tc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Kr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ac(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Wu));else if(a!==4&&(a===27&&Kr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Ac(e,t,n),e=e.sibling;e!==null;)Ac(e,t,n),e=e.sibling}function Yu(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&Kr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Yu(e,t,n),e=e.sibling;e!==null;)Yu(e,t,n),e=e.sibling}function vh(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);un(t,a,n),t[Ht]=e,t[Ie]=n}catch(f){kt(e,e.return,f)}}var Ja=!1,Gt=!1,Cc=!1,xh=typeof WeakSet=="function"?WeakSet:Set,nn=null;function cp(e,t){if(e=e.containerInfo,Ic=lo,e=g(e),y(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var i=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break e}var v=0,k=-1,M=-1,F=0,le=0,oe=e,J=null;t:for(;;){for(var W;oe!==n||i!==0&&oe.nodeType!==3||(k=v+i),oe!==f||a!==0&&oe.nodeType!==3||(M=v+a),oe.nodeType===3&&(v+=oe.nodeValue.length),(W=oe.firstChild)!==null;)J=oe,oe=W;for(;;){if(oe===e)break t;if(J===n&&++F===i&&(k=v),J===f&&++le===a&&(M=v),(W=oe.nextSibling)!==null)break;oe=J,J=oe.parentNode}oe=W}n=k===-1||M===-1?null:{start:k,end:M}}else n=null}n=n||{start:0,end:0}}else n=null;for(ed={focusedElem:e,selectionRange:n},lo=!1,nn=t;nn!==null;)if(t=nn,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,nn=e;else for(;nn!==null;){switch(t=nn,f=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,n=t,i=f.memoizedProps,f=f.memoizedState,a=n.stateNode;try{var Qe=Cl(n.type,i,n.elementType===n.type);e=a.getSnapshotBeforeUpdate(Qe,f),a.__reactInternalSnapshotBeforeUpdate=e}catch(He){kt(n,n.return,He)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)ad(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ad(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,nn=e;break}nn=t.return}}function bh(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:zr(e,n),a&4&&Es(5,n);break;case 1:if(zr(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(v){kt(n,n.return,v)}else{var i=Cl(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){kt(n,n.return,v)}}a&64&&mh(n),a&512&&Ts(n,n.return);break;case 3:if(zr(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{ef(e,t)}catch(v){kt(n,n.return,v)}}break;case 27:t===null&&a&4&&vh(n);case 26:case 5:zr(e,n),t===null&&a&4&&ph(n),a&512&&Ts(n,n.return);break;case 12:zr(e,n);break;case 13:zr(e,n),a&4&&jh(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=xp.bind(null,n),Up(e,n))));break;case 22:if(a=n.memoizedState!==null||Ja,!a){t=t!==null&&t.memoizedState!==null||Gt,i=Ja;var f=Gt;Ja=a,(Gt=t)&&!f?Br(e,n,(n.subtreeFlags&8772)!==0):zr(e,n),Ja=i,Gt=f}break;case 30:break;default:zr(e,n)}}function wh(e){var t=e.alternate;t!==null&&(e.alternate=null,wh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Qn(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var _t=null,Cn=!1;function Wa(e,t,n){for(n=n.child;n!==null;)Sh(e,t,n),n=n.sibling}function Sh(e,t,n){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(cn,n)}catch{}switch(n.tag){case 26:Gt||Na(n,t),Wa(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Gt||Na(n,t);var a=_t,i=Cn;Kr(n.type)&&(_t=n.stateNode,Cn=!1),Wa(e,t,n),Bs(n.stateNode),_t=a,Cn=i;break;case 5:Gt||Na(n,t);case 6:if(a=_t,i=Cn,_t=null,Wa(e,t,n),_t=a,Cn=i,_t!==null)if(Cn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(n.stateNode)}catch(f){kt(n,t,f)}else try{_t.removeChild(n.stateNode)}catch(f){kt(n,t,f)}break;case 18:_t!==null&&(Cn?(e=_t,cm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),$s(e)):cm(_t,n.stateNode));break;case 4:a=_t,i=Cn,_t=n.stateNode.containerInfo,Cn=!0,Wa(e,t,n),_t=a,Cn=i;break;case 0:case 11:case 14:case 15:Gt||Rr(2,n,t),Gt||Rr(4,n,t),Wa(e,t,n);break;case 1:Gt||(Na(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&gh(n,t,a)),Wa(e,t,n);break;case 21:Wa(e,t,n);break;case 22:Gt=(a=Gt)||n.memoizedState!==null,Wa(e,t,n),Gt=a;break;default:Wa(e,t,n)}}function jh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{$s(e)}catch(n){kt(t,t.return,n)}}function dp(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new xh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new xh),t;default:throw Error(c(435,e.tag))}}function _c(e,t){var n=dp(e);t.forEach(function(a){var i=bp.bind(null,e,a);n.has(a)||(n.add(a),a.then(i,i))})}function qn(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var i=n[a],f=e,v=t,k=v;e:for(;k!==null;){switch(k.tag){case 27:if(Kr(k.type)){_t=k.stateNode,Cn=!1;break e}break;case 5:_t=k.stateNode,Cn=!1;break e;case 3:case 4:_t=k.stateNode.containerInfo,Cn=!0;break e}k=k.return}if(_t===null)throw Error(c(160));Sh(f,v,i),_t=null,Cn=!1,f=i.alternate,f!==null&&(f.return=null),i.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)kh(t,e),t=t.sibling}var oa=null;function kh(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:qn(t,e),Ln(e),a&4&&(Rr(3,e,e.return),Es(3,e),Rr(5,e,e.return));break;case 1:qn(t,e),Ln(e),a&512&&(Gt||n===null||Na(n,n.return)),a&64&&Ja&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var i=oa;if(qn(t,e),Ln(e),a&512&&(Gt||n===null||Na(n,n.return)),a&4){var f=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(a){case"title":f=i.getElementsByTagName("title")[0],(!f||f[ll]||f[Ht]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=i.createElement(a),i.head.insertBefore(f,i.querySelector("head > title"))),un(f,a,n),f[Ht]=e,St(f),a=f;break e;case"link":var v=vm("link","href",i).get(a+(n.href||""));if(v){for(var k=0;k<v.length;k++)if(f=v[k],f.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&f.getAttribute("rel")===(n.rel==null?null:n.rel)&&f.getAttribute("title")===(n.title==null?null:n.title)&&f.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){v.splice(k,1);break t}}f=i.createElement(a),un(f,a,n),i.head.appendChild(f);break;case"meta":if(v=vm("meta","content",i).get(a+(n.content||""))){for(k=0;k<v.length;k++)if(f=v[k],f.getAttribute("content")===(n.content==null?null:""+n.content)&&f.getAttribute("name")===(n.name==null?null:n.name)&&f.getAttribute("property")===(n.property==null?null:n.property)&&f.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&f.getAttribute("charset")===(n.charSet==null?null:n.charSet)){v.splice(k,1);break t}}f=i.createElement(a),un(f,a,n),i.head.appendChild(f);break;default:throw Error(c(468,a))}f[Ht]=e,St(f),a=f}e.stateNode=a}else xm(i,e.type,e.stateNode);else e.stateNode=ym(i,a,e.memoizedProps);else f!==a?(f===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):f.count--,a===null?xm(i,e.type,e.stateNode):ym(i,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Ec(e,e.memoizedProps,n.memoizedProps)}break;case 27:qn(t,e),Ln(e),a&512&&(Gt||n===null||Na(n,n.return)),n!==null&&a&4&&Ec(e,e.memoizedProps,n.memoizedProps);break;case 5:if(qn(t,e),Ln(e),a&512&&(Gt||n===null||Na(n,n.return)),e.flags&32){i=e.stateNode;try{za(i,"")}catch(W){kt(e,e.return,W)}}a&4&&e.stateNode!=null&&(i=e.memoizedProps,Ec(e,i,n!==null?n.memoizedProps:i)),a&1024&&(Cc=!0);break;case 6:if(qn(t,e),Ln(e),a&4){if(e.stateNode===null)throw Error(c(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(W){kt(e,e.return,W)}}break;case 3:if(no=null,i=oa,oa=eo(t.containerInfo),qn(t,e),oa=i,Ln(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{$s(t.containerInfo)}catch(W){kt(e,e.return,W)}Cc&&(Cc=!1,Nh(e));break;case 4:a=oa,oa=eo(e.stateNode.containerInfo),qn(t,e),Ln(e),oa=a;break;case 12:qn(t,e),Ln(e);break;case 13:qn(t,e),Ln(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Bc=Fe()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,_c(e,a)));break;case 22:i=e.memoizedState!==null;var M=n!==null&&n.memoizedState!==null,F=Ja,le=Gt;if(Ja=F||i,Gt=le||M,qn(t,e),Gt=le,Ja=F,Ln(e),a&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(n===null||M||Ja||Gt||_l(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){M=n=t;try{if(f=M.stateNode,i)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{k=M.stateNode;var oe=M.memoizedProps.style,J=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;k.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(W){kt(M,M.return,W)}}}else if(t.tag===6){if(n===null){M=t;try{M.stateNode.nodeValue=i?"":M.memoizedProps}catch(W){kt(M,M.return,W)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,_c(e,n))));break;case 19:qn(t,e),Ln(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,_c(e,a)));break;case 30:break;case 21:break;default:qn(t,e),Ln(e)}}function Ln(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(yh(a)){n=a;break}a=a.return}if(n==null)throw Error(c(160));switch(n.tag){case 27:var i=n.stateNode,f=Tc(e);Yu(e,f,i);break;case 5:var v=n.stateNode;n.flags&32&&(za(v,""),n.flags&=-33);var k=Tc(e);Yu(e,k,v);break;case 3:case 4:var M=n.stateNode.containerInfo,F=Tc(e);Ac(e,F,M);break;default:throw Error(c(161))}}catch(le){kt(e,e.return,le)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Nh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Nh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function zr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)bh(e,t.alternate,t),t=t.sibling}function _l(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Rr(4,t,t.return),_l(t);break;case 1:Na(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&gh(t,t.return,n),_l(t);break;case 27:Bs(t.stateNode);case 26:case 5:Na(t,t.return),_l(t);break;case 22:t.memoizedState===null&&_l(t);break;case 30:_l(t);break;default:_l(t)}e=e.sibling}}function Br(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,i=e,f=t,v=f.flags;switch(f.tag){case 0:case 11:case 15:Br(i,f,n),Es(4,f);break;case 1:if(Br(i,f,n),a=f,i=a.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(F){kt(a,a.return,F)}if(a=f,i=a.updateQueue,i!==null){var k=a.stateNode;try{var M=i.shared.hiddenCallbacks;if(M!==null)for(i.shared.hiddenCallbacks=null,i=0;i<M.length;i++)Id(M[i],k)}catch(F){kt(a,a.return,F)}}n&&v&64&&mh(f),Ts(f,f.return);break;case 27:vh(f);case 26:case 5:Br(i,f,n),n&&a===null&&v&4&&ph(f),Ts(f,f.return);break;case 12:Br(i,f,n);break;case 13:Br(i,f,n),n&&v&4&&jh(i,f);break;case 22:f.memoizedState===null&&Br(i,f,n),Ts(f,f.return);break;case 30:break;default:Br(i,f,n)}t=t.sibling}}function Dc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&fs(n))}function Mc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&fs(e))}function Ea(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Eh(e,t,n,a),t=t.sibling}function Eh(e,t,n,a){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Ea(e,t,n,a),i&2048&&Es(9,t);break;case 1:Ea(e,t,n,a);break;case 3:Ea(e,t,n,a),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&fs(e)));break;case 12:if(i&2048){Ea(e,t,n,a),e=t.stateNode;try{var f=t.memoizedProps,v=f.id,k=f.onPostCommit;typeof k=="function"&&k(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){kt(t,t.return,M)}}else Ea(e,t,n,a);break;case 13:Ea(e,t,n,a);break;case 23:break;case 22:f=t.stateNode,v=t.alternate,t.memoizedState!==null?f._visibility&2?Ea(e,t,n,a):As(e,t):f._visibility&2?Ea(e,t,n,a):(f._visibility|=2,di(e,t,n,a,(t.subtreeFlags&10256)!==0)),i&2048&&Dc(v,t);break;case 24:Ea(e,t,n,a),i&2048&&Mc(t.alternate,t);break;default:Ea(e,t,n,a)}}function di(e,t,n,a,i){for(i=i&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var f=e,v=t,k=n,M=a,F=v.flags;switch(v.tag){case 0:case 11:case 15:di(f,v,k,M,i),Es(8,v);break;case 23:break;case 22:var le=v.stateNode;v.memoizedState!==null?le._visibility&2?di(f,v,k,M,i):As(f,v):(le._visibility|=2,di(f,v,k,M,i)),i&&F&2048&&Dc(v.alternate,v);break;case 24:di(f,v,k,M,i),i&&F&2048&&Mc(v.alternate,v);break;default:di(f,v,k,M,i)}t=t.sibling}}function As(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,i=a.flags;switch(a.tag){case 22:As(n,a),i&2048&&Dc(a.alternate,a);break;case 24:As(n,a),i&2048&&Mc(a.alternate,a);break;default:As(n,a)}t=t.sibling}}var Cs=8192;function fi(e){if(e.subtreeFlags&Cs)for(e=e.child;e!==null;)Th(e),e=e.sibling}function Th(e){switch(e.tag){case 26:fi(e),e.flags&Cs&&e.memoizedState!==null&&Zp(oa,e.memoizedState,e.memoizedProps);break;case 5:fi(e);break;case 3:case 4:var t=oa;oa=eo(e.stateNode.containerInfo),fi(e),oa=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Cs,Cs=16777216,fi(e),Cs=t):fi(e));break;default:fi(e)}}function Ah(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function _s(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];nn=a,_h(a,e)}Ah(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ch(e),e=e.sibling}function Ch(e){switch(e.tag){case 0:case 11:case 15:_s(e),e.flags&2048&&Rr(9,e,e.return);break;case 3:_s(e);break;case 12:_s(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ku(e)):_s(e);break;default:_s(e)}}function Ku(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];nn=a,_h(a,e)}Ah(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Rr(8,t,t.return),Ku(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Ku(t));break;default:Ku(t)}e=e.sibling}}function _h(e,t){for(;nn!==null;){var n=nn;switch(n.tag){case 0:case 11:case 15:Rr(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:fs(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,nn=a;else e:for(n=e;nn!==null;){a=nn;var i=a.sibling,f=a.return;if(wh(a),a===n){nn=null;break e}if(i!==null){i.return=f,nn=i;break e}nn=f}}}var fp={getCacheForType:function(e){var t=mn(Wt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},hp=typeof WeakMap=="function"?WeakMap:Map,ht=0,Et=null,at=null,ut=0,mt=0,Hn=null,Ur=!1,hi=!1,Oc=!1,Ia=0,Lt=0,qr=0,Dl=0,Rc=0,In=0,mi=0,Ds=null,_n=null,zc=!1,Bc=0,Gu=1/0,$u=null,Lr=null,sn=0,Hr=null,gi=null,pi=0,Uc=0,qc=null,Dh=null,Ms=0,Lc=null;function Yn(){if((ht&2)!==0&&ut!==0)return ut&-ut;if(Z.T!==null){var e=ai;return e!==0?e:Qc()}return Ma()}function Mh(){In===0&&(In=(ut&536870912)===0||ct?nl():536870912);var e=Wn.current;return e!==null&&(e.flags|=32),In}function Kn(e,t,n){(e===Et&&(mt===2||mt===9)||e.cancelPendingCommit!==null)&&(yi(e,0),Yr(e,ut,In,!1)),or(e,n),((ht&2)===0||e!==Et)&&(e===Et&&((ht&2)===0&&(Dl|=n),Lt===4&&Yr(e,ut,In,!1)),Ta(e))}function Oh(e,t,n){if((ht&6)!==0)throw Error(c(327));var a=!n&&(t&124)===0&&(t&e.expiredLanes)===0||ra(e,t),i=a?pp(e,t):Kc(e,t,!0),f=a;do{if(i===0){hi&&!a&&Yr(e,t,0,!1);break}else{if(n=e.current.alternate,f&&!mp(n)){i=Kc(e,t,!1),f=!1;continue}if(i===2){if(f=t,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var k=e;i=Ds;var M=k.current.memoizedState.isDehydrated;if(M&&(yi(k,v).flags|=256),v=Kc(k,v,!1),v!==2){if(Oc&&!M){k.errorRecoveryDisabledLanes|=f,Dl|=f,i=4;break e}f=_n,_n=i,f!==null&&(_n===null?_n=f:_n.push.apply(_n,f))}i=v}if(f=!1,i!==2)continue}}if(i===1){yi(e,0),Yr(e,t,0,!0);break}e:{switch(a=e,f=i,f){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:Yr(a,t,In,!Ur);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(i=Bc+300-Fe(),10<i)){if(Yr(a,t,In,!Ur),ze(a,0,!0)!==0)break e;a.timeoutHandle=um(Rh.bind(null,a,n,_n,$u,zc,t,In,Dl,mi,Ur,f,2,-0,0),i);break e}Rh(a,n,_n,$u,zc,t,In,Dl,mi,Ur,f,0,-0,0)}}break}while(!0);Ta(e)}function Rh(e,t,n,a,i,f,v,k,M,F,le,oe,J,W){if(e.timeoutHandle=-1,oe=t.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(Ls={stylesheets:null,count:0,unsuspend:Fp},Th(t),oe=Jp(),oe!==null)){e.cancelPendingCommit=oe(Yh.bind(null,e,t,f,n,a,i,v,k,M,le,1,J,W)),Yr(e,f,v,!F);return}Yh(e,t,f,n,a,i,v,k,M)}function mp(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var i=n[a],f=i.getSnapshot;i=i.value;try{if(!Ut(f(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yr(e,t,n,a){t&=~Rc,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var i=t;0<i;){var f=31-Mt(i),v=1<<f;a[f]=-1,i&=~v}n!==0&&Bi(e,n,t)}function Xu(){return(ht&6)===0?(Os(0),!1):!0}function Hc(){if(at!==null){if(mt===0)var e=at.return;else e=at,Xa=Nl=null,ac(e),oi=null,js=0,e=at;for(;e!==null;)hh(e.alternate,e),e=e.return;at=null}}function yi(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Mp(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Hc(),Et=e,at=n=Ka(e.current,null),ut=t,mt=0,Hn=null,Ur=!1,hi=ra(e,t),Oc=!1,mi=In=Rc=Dl=qr=Lt=0,_n=Ds=null,zc=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var i=31-Mt(a),f=1<<i;t|=e[i],a&=~f}return Ia=t,jt(),n}function zh(e,t){et=null,Z.H=Mu,t===ms||t===Su?(t=Jd(),mt=3):t===Pd?(t=Jd(),mt=4):mt=t===If?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Hn=t,at===null&&(Lt=1,Uu(e,Ne(t,e.current)))}function Bh(){var e=Z.H;return Z.H=Mu,e===null?Mu:e}function Uh(){var e=Z.A;return Z.A=fp,e}function Yc(){Lt=4,Ur||(ut&4194048)!==ut&&Wn.current!==null||(hi=!0),(qr&134217727)===0&&(Dl&134217727)===0||Et===null||Yr(Et,ut,In,!1)}function Kc(e,t,n){var a=ht;ht|=2;var i=Bh(),f=Uh();(Et!==e||ut!==t)&&($u=null,yi(e,t)),t=!1;var v=Lt;e:do try{if(mt!==0&&at!==null){var k=at,M=Hn;switch(mt){case 8:Hc(),v=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(t=!0);var F=mt;if(mt=0,Hn=null,vi(e,k,M,F),n&&hi){v=0;break e}break;default:F=mt,mt=0,Hn=null,vi(e,k,M,F)}}gp(),v=Lt;break}catch(le){zh(e,le)}while(!0);return t&&e.shellSuspendCounter++,Xa=Nl=null,ht=a,Z.H=i,Z.A=f,at===null&&(Et=null,ut=0,jt()),v}function gp(){for(;at!==null;)qh(at)}function pp(e,t){var n=ht;ht|=2;var a=Bh(),i=Uh();Et!==e||ut!==t?($u=null,Gu=Fe()+500,yi(e,t)):hi=ra(e,t);e:do try{if(mt!==0&&at!==null){t=at;var f=Hn;t:switch(mt){case 1:mt=0,Hn=null,vi(e,t,f,1);break;case 2:case 9:if(Fd(f)){mt=0,Hn=null,Lh(t);break}t=function(){mt!==2&&mt!==9||Et!==e||(mt=7),Ta(e)},f.then(t,t);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:Fd(f)?(mt=0,Hn=null,Lh(t)):(mt=0,Hn=null,vi(e,t,f,7));break;case 5:var v=null;switch(at.tag){case 26:v=at.memoizedState;case 5:case 27:var k=at;if(!v||bm(v)){mt=0,Hn=null;var M=k.sibling;if(M!==null)at=M;else{var F=k.return;F!==null?(at=F,Qu(F)):at=null}break t}}mt=0,Hn=null,vi(e,t,f,5);break;case 6:mt=0,Hn=null,vi(e,t,f,6);break;case 8:Hc(),Lt=6;break e;default:throw Error(c(462))}}yp();break}catch(le){zh(e,le)}while(!0);return Xa=Nl=null,Z.H=a,Z.A=i,ht=n,at!==null?0:(Et=null,ut=0,jt(),Lt)}function yp(){for(;at!==null&&!na();)qh(at)}function qh(e){var t=dh(e.alternate,e,Ia);e.memoizedProps=e.pendingProps,t===null?Qu(e):at=t}function Lh(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=lh(n,t,t.pendingProps,t.type,void 0,ut);break;case 11:t=lh(n,t,t.pendingProps,t.type.render,t.ref,ut);break;case 5:ac(t);default:hh(n,t),t=at=Ld(t,Ia),t=dh(n,t,Ia)}e.memoizedProps=e.pendingProps,t===null?Qu(e):at=t}function vi(e,t,n,a){Xa=Nl=null,ac(t),oi=null,js=0;var i=t.return;try{if(ip(e,i,t,n,ut)){Lt=1,Uu(e,Ne(n,e.current)),at=null;return}}catch(f){if(i!==null)throw at=i,f;Lt=1,Uu(e,Ne(n,e.current)),at=null;return}t.flags&32768?(ct||a===1?e=!0:hi||(ut&536870912)!==0?e=!1:(Ur=e=!0,(a===2||a===9||a===3||a===6)&&(a=Wn.current,a!==null&&a.tag===13&&(a.flags|=16384))),Hh(t,e)):Qu(t)}function Qu(e){var t=e;do{if((t.flags&32768)!==0){Hh(t,Ur);return}e=t.return;var n=up(t.alternate,t,Ia);if(n!==null){at=n;return}if(t=t.sibling,t!==null){at=t;return}at=t=e}while(t!==null);Lt===0&&(Lt=5)}function Hh(e,t){do{var n=op(e.alternate,e);if(n!==null){n.flags&=32767,at=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){at=e;return}at=e=n}while(e!==null);Lt=6,at=null}function Yh(e,t,n,a,i,f,v,k,M){e.cancelPendingCommit=null;do Vu();while(sn!==0);if((ht&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(f=t.lanes|t.childLanes,f|=Xe,zi(e,n,f,v,k,M),e===Et&&(at=Et=null,ut=0),gi=t,Hr=e,pi=n,Uc=f,qc=i,Dh=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,wp(Dt,function(){return Qh(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=Z.T,Z.T=null,i=xe.p,xe.p=2,v=ht,ht|=4;try{cp(e,t,n)}finally{ht=v,xe.p=i,Z.T=a}}sn=1,Kh(),Gh(),$h()}}function Kh(){if(sn===1){sn=0;var e=Hr,t=gi,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=Z.T,Z.T=null;var a=xe.p;xe.p=2;var i=ht;ht|=4;try{kh(t,e);var f=ed,v=g(e.containerInfo),k=f.focusedElem,M=f.selectionRange;if(v!==k&&k&&k.ownerDocument&&h(k.ownerDocument.documentElement,k)){if(M!==null&&y(k)){var F=M.start,le=M.end;if(le===void 0&&(le=F),"selectionStart"in k)k.selectionStart=F,k.selectionEnd=Math.min(le,k.value.length);else{var oe=k.ownerDocument||document,J=oe&&oe.defaultView||window;if(J.getSelection){var W=J.getSelection(),Qe=k.textContent.length,He=Math.min(M.start,Qe),wt=M.end===void 0?He:Math.min(M.end,Qe);!W.extend&&He>wt&&(v=wt,wt=He,He=v);var $=o(k,He),z=o(k,wt);if($&&z&&(W.rangeCount!==1||W.anchorNode!==$.node||W.anchorOffset!==$.offset||W.focusNode!==z.node||W.focusOffset!==z.offset)){var P=oe.createRange();P.setStart($.node,$.offset),W.removeAllRanges(),He>wt?(W.addRange(P),W.extend(z.node,z.offset)):(P.setEnd(z.node,z.offset),W.addRange(P))}}}}for(oe=[],W=k;W=W.parentNode;)W.nodeType===1&&oe.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<oe.length;k++){var ie=oe[k];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}lo=!!Ic,ed=Ic=null}finally{ht=i,xe.p=a,Z.T=n}}e.current=t,sn=2}}function Gh(){if(sn===2){sn=0;var e=Hr,t=gi,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=Z.T,Z.T=null;var a=xe.p;xe.p=2;var i=ht;ht|=4;try{bh(e,t.alternate,t)}finally{ht=i,xe.p=a,Z.T=n}}sn=3}}function $h(){if(sn===4||sn===3){sn=0,be();var e=Hr,t=gi,n=pi,a=Dh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?sn=5:(sn=0,gi=Hr=null,Xh(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(Lr=null),qi(n),t=t.stateNode,Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(cn,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=Z.T,i=xe.p,xe.p=2,Z.T=null;try{for(var f=e.onRecoverableError,v=0;v<a.length;v++){var k=a[v];f(k.value,{componentStack:k.stack})}}finally{Z.T=t,xe.p=i}}(pi&3)!==0&&Vu(),Ta(e),i=e.pendingLanes,(n&4194090)!==0&&(i&42)!==0?e===Lc?Ms++:(Ms=0,Lc=e):Ms=0,Os(0)}}function Xh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,fs(t)))}function Vu(e){return Kh(),Gh(),$h(),Qh()}function Qh(){if(sn!==5)return!1;var e=Hr,t=Uc;Uc=0;var n=qi(pi),a=Z.T,i=xe.p;try{xe.p=32>n?32:n,Z.T=null,n=qc,qc=null;var f=Hr,v=pi;if(sn=0,gi=Hr=null,pi=0,(ht&6)!==0)throw Error(c(331));var k=ht;if(ht|=4,Ch(f.current),Eh(f,f.current,v,n),ht=k,Os(0,!1),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(cn,f)}catch{}return!0}finally{xe.p=i,Z.T=a,Xh(e,t)}}function Vh(e,t,n){t=Ne(n,t),t=yc(e.stateNode,t,2),e=_r(e,t,2),e!==null&&(or(e,2),Ta(e))}function kt(e,t,n){if(e.tag===3)Vh(e,e,n);else for(;t!==null;){if(t.tag===3){Vh(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Lr===null||!Lr.has(a))){e=Ne(n,e),n=Jf(2),a=_r(t,n,2),a!==null&&(Wf(n,a,t,e),or(a,2),Ta(a));break}}t=t.return}}function Gc(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new hp;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(n)||(Oc=!0,i.add(n),e=vp.bind(null,e,t,n),t.then(e,e))}function vp(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Et===e&&(ut&n)===n&&(Lt===4||Lt===3&&(ut&62914560)===ut&&300>Fe()-Bc?(ht&2)===0&&yi(e,0):Rc|=n,mi===ut&&(mi=0)),Ta(e)}function Ph(e,t){t===0&&(t=Te()),e=Rt(e,t),e!==null&&(or(e,t),Ta(e))}function xp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ph(e,n)}function bp(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(c(314))}a!==null&&a.delete(t),Ph(e,n)}function wp(e,t){return ta(e,t)}var Pu=null,xi=null,$c=!1,Fu=!1,Xc=!1,Ml=0;function Ta(e){e!==xi&&e.next===null&&(xi===null?Pu=xi=e:xi=xi.next=e),Fu=!0,$c||($c=!0,jp())}function Os(e,t){if(!Xc&&Fu){Xc=!0;do for(var n=!1,a=Pu;a!==null;){if(e!==0){var i=a.pendingLanes;if(i===0)var f=0;else{var v=a.suspendedLanes,k=a.pingedLanes;f=(1<<31-Mt(42|e)+1)-1,f&=i&~(v&~k),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(n=!0,Wh(a,f))}else f=ut,f=ze(a,a===Et?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(f&3)===0||ra(a,f)||(n=!0,Wh(a,f));a=a.next}while(n);Xc=!1}}function Sp(){Fh()}function Fh(){Fu=$c=!1;var e=0;Ml!==0&&(Dp()&&(e=Ml),Ml=0);for(var t=Fe(),n=null,a=Pu;a!==null;){var i=a.next,f=Zh(a,t);f===0?(a.next=null,n===null?Pu=i:n.next=i,i===null&&(xi=n)):(n=a,(e!==0||(f&3)!==0)&&(Fu=!0)),a=i}Os(e)}function Zh(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Mt(f),k=1<<v,M=i[v];M===-1?((k&n)===0||(k&a)!==0)&&(i[v]=Da(k,t)):M<=t&&(e.expiredLanes|=k),f&=~k}if(t=Et,n=ut,n=ze(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(mt===2||mt===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&_a(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||ra(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&_a(a),qi(n)){case 2:case 8:n=Nt;break;case 32:n=Dt;break;case 268435456:n=Nn;break;default:n=Dt}return a=Jh.bind(null,e),n=ta(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&_a(a),e.callbackPriority=2,e.callbackNode=null,2}function Jh(e,t){if(sn!==0&&sn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Vu()&&e.callbackNode!==n)return null;var a=ut;return a=ze(e,e===Et?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Oh(e,a,t),Zh(e,Fe()),e.callbackNode!=null&&e.callbackNode===n?Jh.bind(null,e):null)}function Wh(e,t){if(Vu())return null;Oh(e,t,!0)}function jp(){Op(function(){(ht&6)!==0?ta(ha,Sp):Fh()})}function Qc(){return Ml===0&&(Ml=nl()),Ml}function Ih(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:sa(""+e)}function em(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function kp(e,t,n,a,i){if(t==="submit"&&n&&n.stateNode===i){var f=Ih((i[Ie]||null).action),v=a.submitter;v&&(t=(t=v[Ie]||null)?Ih(t.formAction):v.getAttribute("formAction"),t!==null&&(f=t,v=null));var k=new Yl("action","action",null,a,i);e.push({event:k,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Ml!==0){var M=v?em(i,v):new FormData(i);fc(n,{pending:!0,data:M,method:i.method,action:f},null,M)}}else typeof f=="function"&&(k.preventDefault(),M=v?em(i,v):new FormData(i),fc(n,{pending:!0,data:M,method:i.method,action:f},f,M))},currentTarget:i}]})}}for(var Vc=0;Vc<Se.length;Vc++){var Pc=Se[Vc],Np=Pc.toLowerCase(),Ep=Pc[0].toUpperCase()+Pc.slice(1);je(Np,"on"+Ep)}je(G,"onAnimationEnd"),je(X,"onAnimationIteration"),je(I,"onAnimationStart"),je("dblclick","onDoubleClick"),je("focusin","onFocus"),je("focusout","onBlur"),je(ne,"onTransitionRun"),je(ae,"onTransitionStart"),je(ve,"onTransitionCancel"),je(ke,"onTransitionEnd"),va("onMouseEnter",["mouseout","mouseover"]),va("onMouseLeave",["mouseout","mouseover"]),va("onPointerEnter",["pointerout","pointerover"]),va("onPointerLeave",["pointerout","pointerover"]),ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ya("onBeforeInput",["compositionend","keypress","textInput","paste"]),ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rs));function tm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],i=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var v=a.length-1;0<=v;v--){var k=a[v],M=k.instance,F=k.currentTarget;if(k=k.listener,M!==f&&i.isPropagationStopped())break e;f=k,i.currentTarget=F;try{f(i)}catch(le){Bu(le)}i.currentTarget=null,f=M}else for(v=0;v<a.length;v++){if(k=a[v],M=k.instance,F=k.currentTarget,k=k.listener,M!==f&&i.isPropagationStopped())break e;f=k,i.currentTarget=F;try{f(i)}catch(le){Bu(le)}i.currentTarget=null,f=M}}}}function rt(e,t){var n=t[Li];n===void 0&&(n=t[Li]=new Set);var a=e+"__bubble";n.has(a)||(nm(t,e,2,!1),n.add(a))}function Fc(e,t,n){var a=0;t&&(a|=4),nm(n,e,a,t)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function Zc(e){if(!e[Zu]){e[Zu]=!0,Hi.forEach(function(n){n!=="selectionchange"&&(Tp.has(n)||Fc(n,!1,e),Fc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Zu]||(t[Zu]=!0,Fc("selectionchange",!1,t))}}function nm(e,t,n,a){switch(Em(t)){case 2:var i=e0;break;case 8:i=t0;break;default:i=cd}n=i.bind(null,t,n,e),i=void 0,!Fn||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Jc(e,t,n,a,i){var f=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var v=a.tag;if(v===3||v===4){var k=a.stateNode.containerInfo;if(k===i)break;if(v===4)for(v=a.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===i)return;v=v.return}for(;k!==null;){if(v=Mn(k),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){a=f=v;continue e}k=k.parentNode}}a=a.return}yr(function(){var F=f,le=Pn(n),oe=[];e:{var J=we.get(e);if(J!==void 0){var W=Yl,Qe=e;switch(e){case"keypress":if(Sa(n)===0)break e;case"keydown":case"keyup":W=iu;break;case"focusin":Qe="focus",W=br;break;case"focusout":Qe="blur",W=br;break;case"beforeblur":case"afterblur":W=br;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=au;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Vi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=Pl;break;case G:case X:case I:W=Xl;break;case ke:W=La;break;case"scroll":case"scrollend":W=Kl;break;case"wheel":W=es;break;case"copy":case"cut":case"paste":W=Do;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Ji;break;case"toggle":case"beforetoggle":W=ts}var He=(t&4)!==0,wt=!He&&(e==="scroll"||e==="scrollend"),$=He?J!==null?J+"Capture":null:J;He=[];for(var z=F,P;z!==null;){var ie=z;if(P=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||P===null||$===null||(ie=ua(z,$),ie!=null&&He.push(zs(z,ie,P))),wt)break;z=z.return}0<He.length&&(J=new W(J,Qe,null,n,le),oe.push({event:J,listeners:He}))}}if((t&7)===0){e:{if(J=e==="mouseover"||e==="pointerover",W=e==="mouseout"||e==="pointerout",J&&n!==pr&&(Qe=n.relatedTarget||n.fromElement)&&(Mn(Qe)||Qe[At]))break e;if((W||J)&&(J=le.window===le?le:(J=le.ownerDocument)?J.defaultView||J.parentWindow:window,W?(Qe=n.relatedTarget||n.toElement,W=F,Qe=Qe?Mn(Qe):null,Qe!==null&&(wt=p(Qe),He=Qe.tag,Qe!==wt||He!==5&&He!==27&&He!==6)&&(Qe=null)):(W=null,Qe=F),W!==Qe)){if(He=au,ie="onMouseLeave",$="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(He=Ji,ie="onPointerLeave",$="onPointerEnter",z="pointer"),wt=W==null?J:ga(W),P=Qe==null?J:ga(Qe),J=new He(ie,z+"leave",W,n,le),J.target=wt,J.relatedTarget=P,ie=null,Mn(le)===F&&(He=new He($,z+"enter",Qe,n,le),He.target=P,He.relatedTarget=wt,ie=He),wt=ie,W&&Qe)t:{for(He=W,$=Qe,z=0,P=He;P;P=bi(P))z++;for(P=0,ie=$;ie;ie=bi(ie))P++;for(;0<z-P;)He=bi(He),z--;for(;0<P-z;)$=bi($),P--;for(;z--;){if(He===$||$!==null&&He===$.alternate)break t;He=bi(He),$=bi($)}He=null}else He=null;W!==null&&am(oe,J,W,He,!1),Qe!==null&&wt!==null&&am(oe,wt,Qe,He,!0)}}e:{if(J=F?ga(F):window,W=J.nodeName&&J.nodeName.toLowerCase(),W==="select"||W==="input"&&J.type==="file")var Re=hu;else if(rs(J))if(yl)Re=is;else{Re=gu;var tt=ls}else W=J.nodeName,!W||W.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?F&&$i(F.elementType)&&(Re=hu):Re=Ya;if(Re&&(Re=Re(e,F))){Il(oe,Re,n,le);break e}tt&&tt(e,J,F),e==="focusout"&&F&&J.type==="number"&&F.memoizedProps.value!=null&&Ll(J,"number",J.value)}switch(tt=F?ga(F):window,e){case"focusin":(rs(tt)||tt.contentEditable==="true")&&(A=tt,_=F,O=null);break;case"focusout":O=_=A=null;break;case"mousedown":B=!0;break;case"contextmenu":case"mouseup":case"dragend":B=!1,H(oe,n,le);break;case"selectionchange":if(w)break;case"keydown":case"keyup":H(oe,n,le)}var Be;if(ns)e:{switch(e){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else Sr?cu(e,n)&&(Ge="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ge="onCompositionStart");Ge&&(ou&&n.locale!=="ko"&&(Sr||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&Sr&&(Be=Hl()):(Jt=le,dl="value"in Jt?Jt.value:Jt.textContent,Sr=!0)),tt=Ju(F,Ge),0<tt.length&&(Ge=new Ql(Ge,e,null,n,le),oe.push({event:Ge,listeners:tt}),Be?Ge.data=Be:(Be=as(n),Be!==null&&(Ge.data=Be)))),(Be=Zl?du(e,n):fu(e,n))&&(Ge=Ju(F,"onBeforeInput"),0<Ge.length&&(tt=new Ql("onBeforeInput","beforeinput",null,n,le),oe.push({event:tt,listeners:Ge}),tt.data=Be)),kp(oe,e,F,n,le)}tm(oe,t)})}function zs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ju(e,t){for(var n=t+"Capture",a=[];e!==null;){var i=e,f=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||f===null||(i=ua(e,n),i!=null&&a.unshift(zs(e,i,f)),i=ua(e,t),i!=null&&a.push(zs(e,i,f))),e.tag===3)return a;e=e.return}return[]}function bi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function am(e,t,n,a,i){for(var f=t._reactName,v=[];n!==null&&n!==a;){var k=n,M=k.alternate,F=k.stateNode;if(k=k.tag,M!==null&&M===a)break;k!==5&&k!==26&&k!==27||F===null||(M=F,i?(F=ua(n,f),F!=null&&v.unshift(zs(n,F,M))):i||(F=ua(n,f),F!=null&&v.push(zs(n,F,M)))),n=n.return}v.length!==0&&e.push({event:t,listeners:v})}var Ap=/\r\n?/g,Cp=/\u0000|\uFFFD/g;function rm(e){return(typeof e=="string"?e:""+e).replace(Ap,`
`).replace(Cp,"")}function lm(e,t){return t=rm(t),rm(e)===t}function Wu(){}function bt(e,t,n,a,i,f){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||za(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&za(e,""+a);break;case"className":Oa(e,"class",a);break;case"tabIndex":Oa(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Oa(e,n,a);break;case"style":Gi(e,a,f);break;case"data":if(t!=="object"){Oa(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=sa(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(n==="formAction"?(t!=="input"&&bt(e,t,"name",i.name,i,null),bt(e,t,"formEncType",i.formEncType,i,null),bt(e,t,"formMethod",i.formMethod,i,null),bt(e,t,"formTarget",i.formTarget,i,null)):(bt(e,t,"encType",i.encType,i,null),bt(e,t,"method",i.method,i,null),bt(e,t,"target",i.target,i,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=sa(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=Wu);break;case"onScroll":a!=null&&rt("scroll",e);break;case"onScrollEnd":a!=null&&rt("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(c(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(c(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=sa(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":rt("beforetoggle",e),rt("toggle",e),la(e,"popover",a);break;case"xlinkActuate":On(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":On(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":On(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":On(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":On(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":On(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":On(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":On(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":On(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":la(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=_o.get(n)||n,la(e,n,a))}}function Wc(e,t,n,a,i,f){switch(n){case"style":Gi(e,a,f);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(c(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(c(60));e.innerHTML=n}}break;case"children":typeof a=="string"?za(e,a):(typeof a=="number"||typeof a=="bigint")&&za(e,""+a);break;case"onScroll":a!=null&&rt("scroll",e);break;case"onScrollEnd":a!=null&&rt("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Wu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pa.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),f=e[Ie]||null,f=f!=null?f[n]:null,typeof f=="function"&&e.removeEventListener(t,f,i),typeof a=="function")){typeof f!="function"&&f!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,i);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):la(e,n,a)}}}function un(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",e),rt("load",e);var a=!1,i=!1,f;for(f in n)if(n.hasOwnProperty(f)){var v=n[f];if(v!=null)switch(f){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:bt(e,t,f,v,n,null)}}i&&bt(e,t,"srcSet",n.srcSet,n,null),a&&bt(e,t,"src",n.src,n,null);return;case"input":rt("invalid",e);var k=f=v=i=null,M=null,F=null;for(a in n)if(n.hasOwnProperty(a)){var le=n[a];if(le!=null)switch(a){case"name":i=le;break;case"type":v=le;break;case"checked":M=le;break;case"defaultChecked":F=le;break;case"value":f=le;break;case"defaultValue":k=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(c(137,t));break;default:bt(e,t,a,le,n,null)}}ol(e,f,k,M,F,v,i,!1),ft(e);return;case"select":rt("invalid",e),a=v=f=null;for(i in n)if(n.hasOwnProperty(i)&&(k=n[i],k!=null))switch(i){case"value":f=k;break;case"defaultValue":v=k;break;case"multiple":a=k;default:bt(e,t,i,k,n,null)}t=f,n=v,e.multiple=!!a,t!=null?ia(e,!!a,t,!1):n!=null&&ia(e,!!a,n,!0);return;case"textarea":rt("invalid",e),f=i=a=null;for(v in n)if(n.hasOwnProperty(v)&&(k=n[v],k!=null))switch(v){case"value":a=k;break;case"defaultValue":i=k;break;case"children":f=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(c(91));break;default:bt(e,t,v,k,n,null)}gr(e,a,i,f),ft(e);return;case"option":for(M in n)if(n.hasOwnProperty(M)&&(a=n[M],a!=null))switch(M){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:bt(e,t,M,a,n,null)}return;case"dialog":rt("beforetoggle",e),rt("toggle",e),rt("cancel",e),rt("close",e);break;case"iframe":case"object":rt("load",e);break;case"video":case"audio":for(a=0;a<Rs.length;a++)rt(Rs[a],e);break;case"image":rt("error",e),rt("load",e);break;case"details":rt("toggle",e);break;case"embed":case"source":case"link":rt("error",e),rt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in n)if(n.hasOwnProperty(F)&&(a=n[F],a!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:bt(e,t,F,a,n,null)}return;default:if($i(t)){for(le in n)n.hasOwnProperty(le)&&(a=n[le],a!==void 0&&Wc(e,t,le,a,n,void 0));return}}for(k in n)n.hasOwnProperty(k)&&(a=n[k],a!=null&&bt(e,t,k,a,n,null))}function _p(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,f=null,v=null,k=null,M=null,F=null,le=null;for(W in n){var oe=n[W];if(n.hasOwnProperty(W)&&oe!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":M=oe;default:a.hasOwnProperty(W)||bt(e,t,W,null,a,oe)}}for(var J in a){var W=a[J];if(oe=n[J],a.hasOwnProperty(J)&&(W!=null||oe!=null))switch(J){case"type":f=W;break;case"name":i=W;break;case"checked":F=W;break;case"defaultChecked":le=W;break;case"value":v=W;break;case"defaultValue":k=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(c(137,t));break;default:W!==oe&&bt(e,t,J,W,a,oe)}}ul(e,v,k,M,F,le,f,i);return;case"select":W=v=k=J=null;for(f in n)if(M=n[f],n.hasOwnProperty(f)&&M!=null)switch(f){case"value":break;case"multiple":W=M;default:a.hasOwnProperty(f)||bt(e,t,f,null,a,M)}for(i in a)if(f=a[i],M=n[i],a.hasOwnProperty(i)&&(f!=null||M!=null))switch(i){case"value":J=f;break;case"defaultValue":k=f;break;case"multiple":v=f;default:f!==M&&bt(e,t,i,f,a,M)}t=k,n=v,a=W,J!=null?ia(e,!!n,J,!1):!!a!=!!n&&(t!=null?ia(e,!!n,t,!0):ia(e,!!n,n?[]:"",!1));return;case"textarea":W=J=null;for(k in n)if(i=n[k],n.hasOwnProperty(k)&&i!=null&&!a.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:bt(e,t,k,null,a,i)}for(v in a)if(i=a[v],f=n[v],a.hasOwnProperty(v)&&(i!=null||f!=null))switch(v){case"value":J=i;break;case"defaultValue":W=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(c(91));break;default:i!==f&&bt(e,t,v,i,a,f)}Ki(e,J,W);return;case"option":for(var Qe in n)if(J=n[Qe],n.hasOwnProperty(Qe)&&J!=null&&!a.hasOwnProperty(Qe))switch(Qe){case"selected":e.selected=!1;break;default:bt(e,t,Qe,null,a,J)}for(M in a)if(J=a[M],W=n[M],a.hasOwnProperty(M)&&J!==W&&(J!=null||W!=null))switch(M){case"selected":e.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:bt(e,t,M,J,a,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in n)J=n[He],n.hasOwnProperty(He)&&J!=null&&!a.hasOwnProperty(He)&&bt(e,t,He,null,a,J);for(F in a)if(J=a[F],W=n[F],a.hasOwnProperty(F)&&J!==W&&(J!=null||W!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(c(137,t));break;default:bt(e,t,F,J,a,W)}return;default:if($i(t)){for(var wt in n)J=n[wt],n.hasOwnProperty(wt)&&J!==void 0&&!a.hasOwnProperty(wt)&&Wc(e,t,wt,void 0,a,J);for(le in a)J=a[le],W=n[le],!a.hasOwnProperty(le)||J===W||J===void 0&&W===void 0||Wc(e,t,le,J,a,W);return}}for(var $ in n)J=n[$],n.hasOwnProperty($)&&J!=null&&!a.hasOwnProperty($)&&bt(e,t,$,null,a,J);for(oe in a)J=a[oe],W=n[oe],!a.hasOwnProperty(oe)||J===W||J==null&&W==null||bt(e,t,oe,J,a,W)}var Ic=null,ed=null;function Iu(e){return e.nodeType===9?e:e.ownerDocument}function im(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function td(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nd=null;function Dp(){var e=window.event;return e&&e.type==="popstate"?e===nd?!1:(nd=e,!0):(nd=null,!1)}var um=typeof setTimeout=="function"?setTimeout:void 0,Mp=typeof clearTimeout=="function"?clearTimeout:void 0,om=typeof Promise=="function"?Promise:void 0,Op=typeof queueMicrotask=="function"?queueMicrotask:typeof om<"u"?function(e){return om.resolve(null).then(e).catch(Rp)}:um;function Rp(e){setTimeout(function(){throw e})}function Kr(e){return e==="head"}function cm(e,t){var n=t,a=0,i=0;do{var f=n.nextSibling;if(e.removeChild(n),f&&f.nodeType===8)if(n=f.data,n==="/$"){if(0<a&&8>a){n=a;var v=e.ownerDocument;if(n&1&&Bs(v.documentElement),n&2&&Bs(v.body),n&4)for(n=v.head,Bs(n),v=n.firstChild;v;){var k=v.nextSibling,M=v.nodeName;v[ll]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&v.rel.toLowerCase()==="stylesheet"||n.removeChild(v),v=k}}if(i===0){e.removeChild(f),$s(t);return}i--}else n==="$"||n==="$?"||n==="$!"?i++:a=n.charCodeAt(0)-48;else a=0;n=f}while(n);$s(t)}function ad(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ad(n),Qn(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function zp(e,t,n,a){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[ll])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=ca(e.nextSibling),e===null)break}return null}function Bp(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ca(e.nextSibling),e===null))return null;return e}function rd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Up(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function ca(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var ld=null;function dm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function fm(e,t,n){switch(t=Iu(n),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function Bs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Qn(e)}var ea=new Map,hm=new Set;function eo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var er=xe.d;xe.d={f:qp,r:Lp,D:Hp,C:Yp,L:Kp,m:Gp,X:Xp,S:$p,M:Qp};function qp(){var e=er.f(),t=Xu();return e||t}function Lp(e){var t=xn(e);t!==null&&t.tag===5&&t.type==="form"?Of(t):er.r(e)}var wi=typeof document>"u"?null:document;function mm(e,t,n){var a=wi;if(a&&typeof t=="string"&&t){var i=fn(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),hm.has(i)||(hm.add(i),e={rel:e,crossOrigin:n,href:t},a.querySelector(i)===null&&(t=a.createElement("link"),un(t,"link",e),St(t),a.head.appendChild(t)))}}function Hp(e){er.D(e),mm("dns-prefetch",e,null)}function Yp(e,t){er.C(e,t),mm("preconnect",e,t)}function Kp(e,t,n){er.L(e,t,n);var a=wi;if(a&&e&&t){var i='link[rel="preload"][as="'+fn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+fn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+fn(n.imageSizes)+'"]')):i+='[href="'+fn(e)+'"]';var f=i;switch(t){case"style":f=Si(e);break;case"script":f=ji(e)}ea.has(f)||(e=S({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),ea.set(f,e),a.querySelector(i)!==null||t==="style"&&a.querySelector(Us(f))||t==="script"&&a.querySelector(qs(f))||(t=a.createElement("link"),un(t,"link",e),St(t),a.head.appendChild(t)))}}function Gp(e,t){er.m(e,t);var n=wi;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+fn(a)+'"][href="'+fn(e)+'"]',f=i;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=ji(e)}if(!ea.has(f)&&(e=S({rel:"modulepreload",href:e},t),ea.set(f,e),n.querySelector(i)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(qs(f)))return}a=n.createElement("link"),un(a,"link",e),St(a),n.head.appendChild(a)}}}function $p(e,t,n){er.S(e,t,n);var a=wi;if(a&&e){var i=dr(a).hoistableStyles,f=Si(e);t=t||"default";var v=i.get(f);if(!v){var k={loading:0,preload:null};if(v=a.querySelector(Us(f)))k.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ea.get(f))&&id(e,n);var M=v=a.createElement("link");St(M),un(M,"link",e),M._p=new Promise(function(F,le){M.onload=F,M.onerror=le}),M.addEventListener("load",function(){k.loading|=1}),M.addEventListener("error",function(){k.loading|=2}),k.loading|=4,to(v,t,a)}v={type:"stylesheet",instance:v,count:1,state:k},i.set(f,v)}}}function Xp(e,t){er.X(e,t);var n=wi;if(n&&e){var a=dr(n).hoistableScripts,i=ji(e),f=a.get(i);f||(f=n.querySelector(qs(i)),f||(e=S({src:e,async:!0},t),(t=ea.get(i))&&sd(e,t),f=n.createElement("script"),St(f),un(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(i,f))}}function Qp(e,t){er.M(e,t);var n=wi;if(n&&e){var a=dr(n).hoistableScripts,i=ji(e),f=a.get(i);f||(f=n.querySelector(qs(i)),f||(e=S({src:e,async:!0,type:"module"},t),(t=ea.get(i))&&sd(e,t),f=n.createElement("script"),St(f),un(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(i,f))}}function gm(e,t,n,a){var i=(i=Ue.current)?eo(i):null;if(!i)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Si(n.href),n=dr(i).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Si(n.href);var f=dr(i).hoistableStyles,v=f.get(e);if(v||(i=i.ownerDocument||i,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=i.querySelector(Us(e)))&&!f._p&&(v.instance=f,v.state.loading=5),ea.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ea.set(e,n),f||Vp(i,e,n,v.state))),t&&a===null)throw Error(c(528,""));return v}if(t&&a!==null)throw Error(c(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ji(n),n=dr(i).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function Si(e){return'href="'+fn(e)+'"'}function Us(e){return'link[rel="stylesheet"]['+e+"]"}function pm(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function Vp(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),un(t,"link",n),St(t),e.head.appendChild(t))}function ji(e){return'[src="'+fn(e)+'"]'}function qs(e){return"script[async]"+e}function ym(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+fn(n.href)+'"]');if(a)return t.instance=a,St(a),a;var i=S({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),St(a),un(a,"style",i),to(a,n.precedence,e),t.instance=a;case"stylesheet":i=Si(n.href);var f=e.querySelector(Us(i));if(f)return t.state.loading|=4,t.instance=f,St(f),f;a=pm(n),(i=ea.get(i))&&id(a,i),f=(e.ownerDocument||e).createElement("link"),St(f);var v=f;return v._p=new Promise(function(k,M){v.onload=k,v.onerror=M}),un(f,"link",a),t.state.loading|=4,to(f,n.precedence,e),t.instance=f;case"script":return f=ji(n.src),(i=e.querySelector(qs(f)))?(t.instance=i,St(i),i):(a=n,(i=ea.get(f))&&(a=S({},n),sd(a,i)),e=e.ownerDocument||e,i=e.createElement("script"),St(i),un(i,"link",a),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,to(a,n.precedence,e));return t.instance}function to(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=a.length?a[a.length-1]:null,f=i,v=0;v<a.length;v++){var k=a[v];if(k.dataset.precedence===t)f=k;else if(f!==i)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function id(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function sd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var no=null;function vm(e,t,n){if(no===null){var a=new Map,i=no=new Map;i.set(n,a)}else i=no,a=i.get(n),a||(a=new Map,i.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var f=n[i];if(!(f[ll]||f[Ht]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(t)||"";v=e+v;var k=a.get(v);k?k.push(f):a.set(v,[f])}}return a}function xm(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Pp(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function bm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Ls=null;function Fp(){}function Zp(e,t,n){if(Ls===null)throw Error(c(475));var a=Ls;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var i=Si(n.href),f=e.querySelector(Us(i));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(a.count++,a=ao.bind(a),e.then(a,a)),t.state.loading|=4,t.instance=f,St(f);return}f=e.ownerDocument||e,n=pm(n),(i=ea.get(i))&&id(n,i),f=f.createElement("link"),St(f);var v=f;v._p=new Promise(function(k,M){v.onload=k,v.onerror=M}),un(f,"link",n),t.instance=f}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(a.count++,t=ao.bind(a),e.addEventListener("load",t),e.addEventListener("error",t))}}function Jp(){if(Ls===null)throw Error(c(475));var e=Ls;return e.stylesheets&&e.count===0&&ud(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&ud(e,e.stylesheets),e.unsuspend){var a=e.unsuspend;e.unsuspend=null,a()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function ao(){if(this.count--,this.count===0){if(this.stylesheets)ud(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ro=null;function ud(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ro=new Map,t.forEach(Wp,e),ro=null,ao.call(e))}function Wp(e,t){if(!(t.state.loading&4)){var n=ro.get(e);if(n)var a=n.get(null);else{n=new Map,ro.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<i.length;f++){var v=i[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(n.set(v.dataset.precedence,v),a=v)}a&&n.set(null,a)}i=t.instance,v=i.getAttribute("data-precedence"),f=n.get(v)||a,f===a&&n.set(null,i),n.set(v,i),this.count++,a=ao.bind(this),i.addEventListener("load",a),i.addEventListener("error",a),f?f.parentNode.insertBefore(i,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var Hs={$$typeof:U,Provider:null,Consumer:null,_currentValue:Me,_currentValue2:Me,_threadCount:0};function Ip(e,t,n,a,i,f,v,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=al(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=al(0),this.hiddenUpdates=al(null),this.identifierPrefix=a,this.onUncaughtError=i,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function wm(e,t,n,a,i,f,v,k,M,F,le,oe){return e=new Ip(e,t,n,v,k,M,F,oe),t=1,f===!0&&(t|=24),f=Un(3,null,null,t),e.current=f,f.stateNode=e,t=Go(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:a,isDehydrated:n,cache:t},Vo(f),e}function Sm(e){return e?(e=Tn,e):Tn}function jm(e,t,n,a,i,f){i=Sm(i),a.context===null?a.context=i:a.pendingContext=i,a=Cr(t),a.payload={element:n},f=f===void 0?null:f,f!==null&&(a.callback=f),n=_r(e,a,t),n!==null&&(Kn(n,e,t),ps(n,e,t))}function km(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function od(e,t){km(e,t),(e=e.alternate)&&km(e,t)}function Nm(e){if(e.tag===13){var t=Rt(e,67108864);t!==null&&Kn(t,e,67108864),od(e,67108864)}}var lo=!0;function e0(e,t,n,a){var i=Z.T;Z.T=null;var f=xe.p;try{xe.p=2,cd(e,t,n,a)}finally{xe.p=f,Z.T=i}}function t0(e,t,n,a){var i=Z.T;Z.T=null;var f=xe.p;try{xe.p=8,cd(e,t,n,a)}finally{xe.p=f,Z.T=i}}function cd(e,t,n,a){if(lo){var i=dd(a);if(i===null)Jc(e,t,a,io,n),Tm(e,a);else if(a0(i,e,t,n,a))a.stopPropagation();else if(Tm(e,a),t&4&&-1<n0.indexOf(e)){for(;i!==null;){var f=xn(i);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=dn(f.pendingLanes);if(v!==0){var k=f;for(k.pendingLanes|=2,k.entangledLanes|=2;v;){var M=1<<31-Mt(v);k.entanglements[1]|=M,v&=~M}Ta(f),(ht&6)===0&&(Gu=Fe()+500,Os(0))}}break;case 13:k=Rt(f,2),k!==null&&Kn(k,f,2),Xu(),od(f,2)}if(f=dd(a),f===null&&Jc(e,t,a,io,n),f===i)break;i=f}i!==null&&a.stopPropagation()}else Jc(e,t,a,null,n)}}function dd(e){return e=Pn(e),fd(e)}var io=null;function fd(e){if(io=null,e=Mn(e),e!==null){var t=p(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=x(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return io=e,null}function Em(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pn()){case ha:return 2;case Nt:return 8;case Dt:case yn:return 32;case Nn:return 268435456;default:return 32}default:return 32}}var hd=!1,Gr=null,$r=null,Xr=null,Ys=new Map,Ks=new Map,Qr=[],n0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tm(e,t){switch(e){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":Ys.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ks.delete(t.pointerId)}}function Gs(e,t,n,a,i,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:f,targetContainers:[i]},t!==null&&(t=xn(t),t!==null&&Nm(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function a0(e,t,n,a,i){switch(t){case"focusin":return Gr=Gs(Gr,e,t,n,a,i),!0;case"dragenter":return $r=Gs($r,e,t,n,a,i),!0;case"mouseover":return Xr=Gs(Xr,e,t,n,a,i),!0;case"pointerover":var f=i.pointerId;return Ys.set(f,Gs(Ys.get(f)||null,e,t,n,a,i)),!0;case"gotpointercapture":return f=i.pointerId,Ks.set(f,Gs(Ks.get(f)||null,e,t,n,a,i)),!0}return!1}function Am(e){var t=Mn(e.target);if(t!==null){var n=p(t);if(n!==null){if(t=n.tag,t===13){if(t=x(n),t!==null){e.blockedOn=t,cr(e.priority,function(){if(n.tag===13){var a=Yn();a=Ui(a);var i=Rt(n,a);i!==null&&Kn(i,n,a),od(n,a)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function so(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=dd(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);pr=a,n.target.dispatchEvent(a),pr=null}else return t=xn(n),t!==null&&Nm(t),e.blockedOn=n,!1;t.shift()}return!0}function Cm(e,t,n){so(e)&&n.delete(t)}function r0(){hd=!1,Gr!==null&&so(Gr)&&(Gr=null),$r!==null&&so($r)&&($r=null),Xr!==null&&so(Xr)&&(Xr=null),Ys.forEach(Cm),Ks.forEach(Cm)}function uo(e,t){e.blockedOn===t&&(e.blockedOn=null,hd||(hd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,r0)))}var oo=null;function _m(e){oo!==e&&(oo=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){oo===e&&(oo=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],i=e[t+2];if(typeof a!="function"){if(fd(a||n)===null)continue;break}var f=xn(n);f!==null&&(e.splice(t,3),t-=3,fc(f,{pending:!0,data:i,method:n.method,action:a},a,i))}}))}function $s(e){function t(M){return uo(M,e)}Gr!==null&&uo(Gr,e),$r!==null&&uo($r,e),Xr!==null&&uo(Xr,e),Ys.forEach(t),Ks.forEach(t);for(var n=0;n<Qr.length;n++){var a=Qr[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Qr.length&&(n=Qr[0],n.blockedOn===null);)Am(n),n.blockedOn===null&&Qr.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var i=n[a],f=n[a+1],v=i[Ie]||null;if(typeof f=="function")v||_m(n);else if(v){var k=null;if(f&&f.hasAttribute("formAction")){if(i=f,v=f[Ie]||null)k=v.formAction;else if(fd(i)!==null)continue}else k=v.action;typeof k=="function"?n[a+1]=k:(n.splice(a,3),a-=3),_m(n)}}}function md(e){this._internalRoot=e}co.prototype.render=md.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var n=t.current,a=Yn();jm(n,a,e,t,null,null)},co.prototype.unmount=md.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jm(e.current,2,null,e,null,null),Xu(),t[At]=null}};function co(e){this._internalRoot=e}co.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ma();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Qr.length&&t!==0&&t<Qr[n].priority;n++);Qr.splice(n,0,e),n===0&&Am(e)}};var Dm=u.version;if(Dm!=="19.1.1")throw Error(c(527,Dm,"19.1.1"));xe.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=N(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var l0={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fo.isDisabled&&fo.supportsFiber)try{cn=fo.inject(l0),Tt=fo}catch{}}return Qs.createRoot=function(e,t){if(!m(e))throw Error(c(299));var n=!1,a="",i=Vf,f=Pf,v=Ff,k=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(k=t.unstable_transitionCallbacks)),t=wm(e,1,!1,null,null,n,a,i,f,v,k,null),e[At]=t.current,Zc(e),new md(t)},Qs.hydrateRoot=function(e,t,n){if(!m(e))throw Error(c(299));var a=!1,i="",f=Vf,v=Pf,k=Ff,M=null,F=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(v=n.onCaughtError),n.onRecoverableError!==void 0&&(k=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(M=n.unstable_transitionCallbacks),n.formState!==void 0&&(F=n.formState)),t=wm(e,1,!0,t,n??null,a,i,f,v,k,M,F),t.context=Sm(null),n=t.current,a=Yn(),a=Ui(a),i=Cr(a),i.callback=null,_r(n,i,a),n=a,t.current.lanes=n,or(t,n),Ta(t),e[At]=t.current,Zc(e),new co(t)},Qs.version="19.1.1",Qs}var Ym;function g0(){if(Ym)return yd.exports;Ym=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(u){console.error(u)}}return r(),yd.exports=m0(),yd.exports}var p0=g0();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Km="popstate";function y0(r={}){function u(c,m){let{pathname:p,search:x,hash:j}=c.location;return Td("",{pathname:p,search:x,hash:j},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function d(c,m){return typeof m=="string"?m:Js(m)}return x0(u,d,null,r)}function Bt(r,u){if(r===!1||r===null||typeof r>"u")throw new Error(u)}function Aa(r,u){if(!r){typeof console<"u"&&console.warn(u);try{throw new Error(u)}catch{}}}function v0(){return Math.random().toString(36).substring(2,10)}function Gm(r,u){return{usr:r.state,key:r.key,idx:u}}function Td(r,u,d=null,c){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof u=="string"?Di(u):u,state:d,key:u&&u.key||c||v0()}}function Js({pathname:r="/",search:u="",hash:d=""}){return u&&u!=="?"&&(r+=u.charAt(0)==="?"?u:"?"+u),d&&d!=="#"&&(r+=d.charAt(0)==="#"?d:"#"+d),r}function Di(r){let u={};if(r){let d=r.indexOf("#");d>=0&&(u.hash=r.substring(d),r=r.substring(0,d));let c=r.indexOf("?");c>=0&&(u.search=r.substring(c),r=r.substring(0,c)),r&&(u.pathname=r)}return u}function x0(r,u,d,c={}){let{window:m=document.defaultView,v5Compat:p=!1}=c,x=m.history,j="POP",N=null,b=S();b==null&&(b=0,x.replaceState({...x.state,idx:b},""));function S(){return(x.state||{idx:null}).idx}function T(){j="POP";let fe=S(),he=fe==null?null:fe-b;b=fe,N&&N({action:j,location:de.location,delta:he})}function Q(fe,he){j="PUSH";let se=Td(de.location,fe,he);b=S()+1;let U=Gm(se,b),Y=de.createHref(se);try{x.pushState(U,"",Y)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;m.location.assign(Y)}p&&N&&N({action:j,location:de.location,delta:1})}function ee(fe,he){j="REPLACE";let se=Td(de.location,fe,he);b=S();let U=Gm(se,b),Y=de.createHref(se);x.replaceState(U,"",Y),p&&N&&N({action:j,location:de.location,delta:0})}function V(fe){return b0(fe)}let de={get action(){return j},get location(){return r(m,x)},listen(fe){if(N)throw new Error("A history only accepts one active listener");return m.addEventListener(Km,T),N=fe,()=>{m.removeEventListener(Km,T),N=null}},createHref(fe){return u(m,fe)},createURL:V,encodeLocation(fe){let he=V(fe);return{pathname:he.pathname,search:he.search,hash:he.hash}},push:Q,replace:ee,go(fe){return x.go(fe)}};return de}function b0(r,u=!1){let d="http://localhost";typeof window<"u"&&(d=window.location.origin!=="null"?window.location.origin:window.location.href),Bt(d,"No window.location.(origin|href) available to create URL");let c=typeof r=="string"?r:Js(r);return c=c.replace(/ $/,"%20"),!u&&c.startsWith("//")&&(c=d+c),new URL(c,d)}function cg(r,u,d="/"){return w0(r,u,d,!1)}function w0(r,u,d,c){let m=typeof u=="string"?Di(u):u,p=nr(m.pathname||"/",d);if(p==null)return null;let x=dg(r);S0(x);let j=null;for(let N=0;j==null&&N<x.length;++N){let b=O0(p);j=D0(x[N],b,c)}return j}function dg(r,u=[],d=[],c="",m=!1){let p=(x,j,N=m,b)=>{let S={relativePath:b===void 0?x.path||"":b,caseSensitive:x.caseSensitive===!0,childrenIndex:j,route:x};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(c)&&N)return;Bt(S.relativePath.startsWith(c),`Absolute route path "${S.relativePath}" nested under path "${c}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(c.length)}let T=tr([c,S.relativePath]),Q=d.concat(S);x.children&&x.children.length>0&&(Bt(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),dg(x.children,u,Q,T,N)),!(x.path==null&&!x.index)&&u.push({path:T,score:C0(T,x.index),routesMeta:Q})};return r.forEach((x,j)=>{if(x.path===""||!x.path?.includes("?"))p(x,j);else for(let N of fg(x.path))p(x,j,!0,N)}),u}function fg(r){let u=r.split("/");if(u.length===0)return[];let[d,...c]=u,m=d.endsWith("?"),p=d.replace(/\?$/,"");if(c.length===0)return m?[p,""]:[p];let x=fg(c.join("/")),j=[];return j.push(...x.map(N=>N===""?p:[p,N].join("/"))),m&&j.push(...x),j.map(N=>r.startsWith("/")&&N===""?"/":N)}function S0(r){r.sort((u,d)=>u.score!==d.score?d.score-u.score:_0(u.routesMeta.map(c=>c.childrenIndex),d.routesMeta.map(c=>c.childrenIndex)))}var j0=/^:[\w-]+$/,k0=3,N0=2,E0=1,T0=10,A0=-2,$m=r=>r==="*";function C0(r,u){let d=r.split("/"),c=d.length;return d.some($m)&&(c+=A0),u&&(c+=N0),d.filter(m=>!$m(m)).reduce((m,p)=>m+(j0.test(p)?k0:p===""?E0:T0),c)}function _0(r,u){return r.length===u.length&&r.slice(0,-1).every((c,m)=>c===u[m])?r[r.length-1]-u[u.length-1]:0}function D0(r,u,d=!1){let{routesMeta:c}=r,m={},p="/",x=[];for(let j=0;j<c.length;++j){let N=c[j],b=j===c.length-1,S=p==="/"?u:u.slice(p.length)||"/",T=wo({path:N.relativePath,caseSensitive:N.caseSensitive,end:b},S),Q=N.route;if(!T&&b&&d&&!c[c.length-1].route.index&&(T=wo({path:N.relativePath,caseSensitive:N.caseSensitive,end:!1},S)),!T)return null;Object.assign(m,T.params),x.push({params:m,pathname:tr([p,T.pathname]),pathnameBase:U0(tr([p,T.pathnameBase])),route:Q}),T.pathnameBase!=="/"&&(p=tr([p,T.pathnameBase]))}return x}function wo(r,u){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[d,c]=M0(r.path,r.caseSensitive,r.end),m=u.match(d);if(!m)return null;let p=m[0],x=p.replace(/(.)\/+$/,"$1"),j=m.slice(1);return{params:c.reduce((b,{paramName:S,isOptional:T},Q)=>{if(S==="*"){let V=j[Q]||"";x=p.slice(0,p.length-V.length).replace(/(.)\/+$/,"$1")}const ee=j[Q];return T&&!ee?b[S]=void 0:b[S]=(ee||"").replace(/%2F/g,"/"),b},{}),pathname:p,pathnameBase:x,pattern:r}}function M0(r,u=!1,d=!0){Aa(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let c=[],m="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,j,N)=>(c.push({paramName:j,isOptional:N!=null}),N?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(c.push({paramName:"*"}),m+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):d?m+="\\/*$":r!==""&&r!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,u?void 0:"i"),c]}function O0(r){try{return r.split("/").map(u=>decodeURIComponent(u).replace(/\//g,"%2F")).join("/")}catch(u){return Aa(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${u}).`),r}}function nr(r,u){if(u==="/")return r;if(!r.toLowerCase().startsWith(u.toLowerCase()))return null;let d=u.endsWith("/")?u.length-1:u.length,c=r.charAt(d);return c&&c!=="/"?null:r.slice(d)||"/"}function R0(r,u="/"){let{pathname:d,search:c="",hash:m=""}=typeof r=="string"?Di(r):r;return{pathname:d?d.startsWith("/")?d:z0(d,u):u,search:q0(c),hash:L0(m)}}function z0(r,u){let d=u.replace(/\/+$/,"").split("/");return r.split("/").forEach(m=>{m===".."?d.length>1&&d.pop():m!=="."&&d.push(m)}),d.length>1?d.join("/"):"/"}function wd(r,u,d,c){return`Cannot include a '${r}' character in a manually specified \`to.${u}\` field [${JSON.stringify(c)}].  Please separate it out to the \`to.${d}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function B0(r){return r.filter((u,d)=>d===0||u.route.path&&u.route.path.length>0)}function hg(r){let u=B0(r);return u.map((d,c)=>c===u.length-1?d.pathname:d.pathnameBase)}function mg(r,u,d,c=!1){let m;typeof r=="string"?m=Di(r):(m={...r},Bt(!m.pathname||!m.pathname.includes("?"),wd("?","pathname","search",m)),Bt(!m.pathname||!m.pathname.includes("#"),wd("#","pathname","hash",m)),Bt(!m.search||!m.search.includes("#"),wd("#","search","hash",m)));let p=r===""||m.pathname==="",x=p?"/":m.pathname,j;if(x==null)j=d;else{let T=u.length-1;if(!c&&x.startsWith("..")){let Q=x.split("/");for(;Q[0]==="..";)Q.shift(),T-=1;m.pathname=Q.join("/")}j=T>=0?u[T]:"/"}let N=R0(m,j),b=x&&x!=="/"&&x.endsWith("/"),S=(p||x===".")&&d.endsWith("/");return!N.pathname.endsWith("/")&&(b||S)&&(N.pathname+="/"),N}var tr=r=>r.join("/").replace(/\/\/+/g,"/"),U0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),q0=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,L0=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function H0(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var gg=["POST","PUT","PATCH","DELETE"];new Set(gg);var Y0=["GET",...gg];new Set(Y0);var Mi=E.createContext(null);Mi.displayName="DataRouter";var ko=E.createContext(null);ko.displayName="DataRouterState";E.createContext(!1);var pg=E.createContext({isTransitioning:!1});pg.displayName="ViewTransition";var K0=E.createContext(new Map);K0.displayName="Fetchers";var G0=E.createContext(null);G0.displayName="Await";var Ca=E.createContext(null);Ca.displayName="Navigation";var Ws=E.createContext(null);Ws.displayName="Location";var ir=E.createContext({outlet:null,matches:[],isDataRoute:!1});ir.displayName="Route";var Md=E.createContext(null);Md.displayName="RouteError";function $0(r,{relative:u}={}){Bt(Is(),"useHref() may be used only in the context of a <Router> component.");let{basename:d,navigator:c}=E.useContext(Ca),{hash:m,pathname:p,search:x}=eu(r,{relative:u}),j=p;return d!=="/"&&(j=p==="/"?d:tr([d,p])),c.createHref({pathname:j,search:x,hash:m})}function Is(){return E.useContext(Ws)!=null}function el(){return Bt(Is(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Ws).location}var yg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vg(r){E.useContext(Ca).static||E.useLayoutEffect(r)}function X0(){let{isDataRoute:r}=E.useContext(ir);return r?ry():Q0()}function Q0(){Bt(Is(),"useNavigate() may be used only in the context of a <Router> component.");let r=E.useContext(Mi),{basename:u,navigator:d}=E.useContext(Ca),{matches:c}=E.useContext(ir),{pathname:m}=el(),p=JSON.stringify(hg(c)),x=E.useRef(!1);return vg(()=>{x.current=!0}),E.useCallback((N,b={})=>{if(Aa(x.current,yg),!x.current)return;if(typeof N=="number"){d.go(N);return}let S=mg(N,JSON.parse(p),m,b.relative==="path");r==null&&u!=="/"&&(S.pathname=S.pathname==="/"?u:tr([u,S.pathname])),(b.replace?d.replace:d.push)(S,b.state,b)},[u,d,p,m,r])}E.createContext(null);function eu(r,{relative:u}={}){let{matches:d}=E.useContext(ir),{pathname:c}=el(),m=JSON.stringify(hg(d));return E.useMemo(()=>mg(r,JSON.parse(m),c,u==="path"),[r,m,c,u])}function V0(r,u){return xg(r,u)}function xg(r,u,d,c,m){Bt(Is(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=E.useContext(Ca),{matches:x}=E.useContext(ir),j=x[x.length-1],N=j?j.params:{},b=j?j.pathname:"/",S=j?j.pathnameBase:"/",T=j&&j.route;{let se=T&&T.path||"";bg(b,!T||se.endsWith("*")||se.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${se}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${se}"> to <Route path="${se==="/"?"*":`${se}/*`}">.`)}let Q=el(),ee;if(u){let se=typeof u=="string"?Di(u):u;Bt(S==="/"||se.pathname?.startsWith(S),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${se.pathname}" was given in the \`location\` prop.`),ee=se}else ee=Q;let V=ee.pathname||"/",de=V;if(S!=="/"){let se=S.replace(/^\//,"").split("/");de="/"+V.replace(/^\//,"").split("/").slice(se.length).join("/")}let fe=cg(r,{pathname:de});Aa(T||fe!=null,`No routes matched location "${ee.pathname}${ee.search}${ee.hash}" `),Aa(fe==null||fe[fe.length-1].route.element!==void 0||fe[fe.length-1].route.Component!==void 0||fe[fe.length-1].route.lazy!==void 0,`Matched leaf route at location "${ee.pathname}${ee.search}${ee.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let he=W0(fe&&fe.map(se=>Object.assign({},se,{params:Object.assign({},N,se.params),pathname:tr([S,p.encodeLocation?p.encodeLocation(se.pathname).pathname:se.pathname]),pathnameBase:se.pathnameBase==="/"?S:tr([S,p.encodeLocation?p.encodeLocation(se.pathnameBase).pathname:se.pathnameBase])})),x,d,c,m);return u&&he?E.createElement(Ws.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...ee},navigationType:"POP"}},he):he}function P0(){let r=ay(),u=H0(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),d=r instanceof Error?r.stack:null,c="rgba(200,200,200, 0.5)",m={padding:"0.5rem",backgroundColor:c},p={padding:"2px 4px",backgroundColor:c},x=null;return console.error("Error handled by React Router default ErrorBoundary:",r),x=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:p},"ErrorBoundary")," or"," ",E.createElement("code",{style:p},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},u),d?E.createElement("pre",{style:m},d):null,x)}var F0=E.createElement(P0,null),Z0=class extends E.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,u){return u.location!==r.location||u.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:u.error,location:u.location,revalidation:r.revalidation||u.revalidation}}componentDidCatch(r,u){this.props.unstable_onError?this.props.unstable_onError(r,u):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?E.createElement(ir.Provider,{value:this.props.routeContext},E.createElement(Md.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function J0({routeContext:r,match:u,children:d}){let c=E.useContext(Mi);return c&&c.static&&c.staticContext&&(u.route.errorElement||u.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=u.route.id),E.createElement(ir.Provider,{value:r},d)}function W0(r,u=[],d=null,c=null,m=null){if(r==null){if(!d)return null;if(d.errors)r=d.matches;else if(u.length===0&&!d.initialized&&d.matches.length>0)r=d.matches;else return null}let p=r,x=d?.errors;if(x!=null){let b=p.findIndex(S=>S.route.id&&x?.[S.route.id]!==void 0);Bt(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),p=p.slice(0,Math.min(p.length,b+1))}let j=!1,N=-1;if(d)for(let b=0;b<p.length;b++){let S=p[b];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(N=b),S.route.id){let{loaderData:T,errors:Q}=d,ee=S.route.loader&&!T.hasOwnProperty(S.route.id)&&(!Q||Q[S.route.id]===void 0);if(S.route.lazy||ee){j=!0,N>=0?p=p.slice(0,N+1):p=[p[0]];break}}}return p.reduceRight((b,S,T)=>{let Q,ee=!1,V=null,de=null;d&&(Q=x&&S.route.id?x[S.route.id]:void 0,V=S.route.errorElement||F0,j&&(N<0&&T===0?(bg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),ee=!0,de=null):N===T&&(ee=!0,de=S.route.hydrateFallbackElement||null)));let fe=u.concat(p.slice(0,T+1)),he=()=>{let se;return Q?se=V:ee?se=de:S.route.Component?se=E.createElement(S.route.Component,null):S.route.element?se=S.route.element:se=b,E.createElement(J0,{match:S,routeContext:{outlet:b,matches:fe,isDataRoute:d!=null},children:se})};return d&&(S.route.ErrorBoundary||S.route.errorElement||T===0)?E.createElement(Z0,{location:d.location,revalidation:d.revalidation,component:V,error:Q,children:he(),routeContext:{outlet:null,matches:fe,isDataRoute:!0},unstable_onError:c}):he()},null)}function Od(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function I0(r){let u=E.useContext(Mi);return Bt(u,Od(r)),u}function ey(r){let u=E.useContext(ko);return Bt(u,Od(r)),u}function ty(r){let u=E.useContext(ir);return Bt(u,Od(r)),u}function Rd(r){let u=ty(r),d=u.matches[u.matches.length-1];return Bt(d.route.id,`${r} can only be used on routes that contain a unique "id"`),d.route.id}function ny(){return Rd("useRouteId")}function ay(){let r=E.useContext(Md),u=ey("useRouteError"),d=Rd("useRouteError");return r!==void 0?r:u.errors?.[d]}function ry(){let{router:r}=I0("useNavigate"),u=Rd("useNavigate"),d=E.useRef(!1);return vg(()=>{d.current=!0}),E.useCallback(async(m,p={})=>{Aa(d.current,yg),d.current&&(typeof m=="number"?r.navigate(m):await r.navigate(m,{fromRouteId:u,...p}))},[r,u])}var Xm={};function bg(r,u,d){!u&&!Xm[r]&&(Xm[r]=!0,Aa(!1,d))}E.memo(ly);function ly({routes:r,future:u,state:d,unstable_onError:c}){return xg(r,void 0,d,c,u)}function Ni(r){Bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iy({basename:r="/",children:u=null,location:d,navigationType:c="POP",navigator:m,static:p=!1}){Bt(!Is(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let x=r.replace(/^\/*/,"/"),j=E.useMemo(()=>({basename:x,navigator:m,static:p,future:{}}),[x,m,p]);typeof d=="string"&&(d=Di(d));let{pathname:N="/",search:b="",hash:S="",state:T=null,key:Q="default"}=d,ee=E.useMemo(()=>{let V=nr(N,x);return V==null?null:{location:{pathname:V,search:b,hash:S,state:T,key:Q},navigationType:c}},[x,N,b,S,T,Q,c]);return Aa(ee!=null,`<Router basename="${x}"> is not able to match the URL "${N}${b}${S}" because it does not start with the basename, so the <Router> won't render anything.`),ee==null?null:E.createElement(Ca.Provider,{value:j},E.createElement(Ws.Provider,{children:u,value:ee}))}function sy({children:r,location:u}){return V0(Ad(r),u)}function Ad(r,u=[]){let d=[];return E.Children.forEach(r,(c,m)=>{if(!E.isValidElement(c))return;let p=[...u,m];if(c.type===E.Fragment){d.push.apply(d,Ad(c.props.children,p));return}Bt(c.type===Ni,`[${typeof c.type=="string"?c.type:c.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Bt(!c.props.index||!c.props.children,"An index route cannot have child routes.");let x={id:c.props.id||p.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,loader:c.props.loader,action:c.props.action,hydrateFallbackElement:c.props.hydrateFallbackElement,HydrateFallback:c.props.HydrateFallback,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.hasErrorBoundary===!0||c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(x.children=Ad(c.props.children,p)),d.push(x)}),d}var vo="get",xo="application/x-www-form-urlencoded";function No(r){return r!=null&&typeof r.tagName=="string"}function uy(r){return No(r)&&r.tagName.toLowerCase()==="button"}function oy(r){return No(r)&&r.tagName.toLowerCase()==="form"}function cy(r){return No(r)&&r.tagName.toLowerCase()==="input"}function dy(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function fy(r,u){return r.button===0&&(!u||u==="_self")&&!dy(r)}var ho=null;function hy(){if(ho===null)try{new FormData(document.createElement("form"),0),ho=!1}catch{ho=!0}return ho}var my=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sd(r){return r!=null&&!my.has(r)?(Aa(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xo}"`),null):r}function gy(r,u){let d,c,m,p,x;if(oy(r)){let j=r.getAttribute("action");c=j?nr(j,u):null,d=r.getAttribute("method")||vo,m=Sd(r.getAttribute("enctype"))||xo,p=new FormData(r)}else if(uy(r)||cy(r)&&(r.type==="submit"||r.type==="image")){let j=r.form;if(j==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let N=r.getAttribute("formaction")||j.getAttribute("action");if(c=N?nr(N,u):null,d=r.getAttribute("formmethod")||j.getAttribute("method")||vo,m=Sd(r.getAttribute("formenctype"))||Sd(j.getAttribute("enctype"))||xo,p=new FormData(j,r),!hy()){let{name:b,type:S,value:T}=r;if(S==="image"){let Q=b?`${b}.`:"";p.append(`${Q}x`,"0"),p.append(`${Q}y`,"0")}else b&&p.append(b,T)}}else{if(No(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');d=vo,c=null,m=xo,x=r}return p&&m==="text/plain"&&(x=p,p=void 0),{action:c,method:d.toLowerCase(),encType:m,formData:p,body:x}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function zd(r,u){if(r===!1||r===null||typeof r>"u")throw new Error(u)}function py(r,u,d){let c=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return c.pathname==="/"?c.pathname=`_root.${d}`:u&&nr(c.pathname,u)==="/"?c.pathname=`${u.replace(/\/$/,"")}/_root.${d}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${d}`,c}async function yy(r,u){if(r.id in u)return u[r.id];try{let d=await import(r.module);return u[r.id]=d,d}catch(d){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(d),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vy(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function xy(r,u,d){let c=await Promise.all(r.map(async m=>{let p=u.routes[m.route.id];if(p){let x=await yy(p,d);return x.links?x.links():[]}return[]}));return jy(c.flat(1).filter(vy).filter(m=>m.rel==="stylesheet"||m.rel==="preload").map(m=>m.rel==="stylesheet"?{...m,rel:"prefetch",as:"style"}:{...m,rel:"prefetch"}))}function Qm(r,u,d,c,m,p){let x=(N,b)=>d[b]?N.route.id!==d[b].route.id:!0,j=(N,b)=>d[b].pathname!==N.pathname||d[b].route.path?.endsWith("*")&&d[b].params["*"]!==N.params["*"];return p==="assets"?u.filter((N,b)=>x(N,b)||j(N,b)):p==="data"?u.filter((N,b)=>{let S=c.routes[N.route.id];if(!S||!S.hasLoader)return!1;if(x(N,b)||j(N,b))return!0;if(N.route.shouldRevalidate){let T=N.route.shouldRevalidate({currentUrl:new URL(m.pathname+m.search+m.hash,window.origin),currentParams:d[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:N.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function by(r,u,{includeHydrateFallback:d}={}){return wy(r.map(c=>{let m=u.routes[c.route.id];if(!m)return[];let p=[m.module];return m.clientActionModule&&(p=p.concat(m.clientActionModule)),m.clientLoaderModule&&(p=p.concat(m.clientLoaderModule)),d&&m.hydrateFallbackModule&&(p=p.concat(m.hydrateFallbackModule)),m.imports&&(p=p.concat(m.imports)),p}).flat(1))}function wy(r){return[...new Set(r)]}function Sy(r){let u={},d=Object.keys(r).sort();for(let c of d)u[c]=r[c];return u}function jy(r,u){let d=new Set;return new Set(u),r.reduce((c,m)=>{let p=JSON.stringify(Sy(m));return d.has(p)||(d.add(p),c.push({key:p,link:m})),c},[])}function wg(){let r=E.useContext(Mi);return zd(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function ky(){let r=E.useContext(ko);return zd(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Bd=E.createContext(void 0);Bd.displayName="FrameworkContext";function Sg(){let r=E.useContext(Bd);return zd(r,"You must render this element inside a <HydratedRouter> element"),r}function Ny(r,u){let d=E.useContext(Bd),[c,m]=E.useState(!1),[p,x]=E.useState(!1),{onFocus:j,onBlur:N,onMouseEnter:b,onMouseLeave:S,onTouchStart:T}=u,Q=E.useRef(null);E.useEffect(()=>{if(r==="render"&&x(!0),r==="viewport"){let de=he=>{he.forEach(se=>{x(se.isIntersecting)})},fe=new IntersectionObserver(de,{threshold:.5});return Q.current&&fe.observe(Q.current),()=>{fe.disconnect()}}},[r]),E.useEffect(()=>{if(c){let de=setTimeout(()=>{x(!0)},100);return()=>{clearTimeout(de)}}},[c]);let ee=()=>{m(!0)},V=()=>{m(!1),x(!1)};return d?r!=="intent"?[p,Q,{}]:[p,Q,{onFocus:Vs(j,ee),onBlur:Vs(N,V),onMouseEnter:Vs(b,ee),onMouseLeave:Vs(S,V),onTouchStart:Vs(T,ee)}]:[!1,Q,{}]}function Vs(r,u){return d=>{r&&r(d),d.defaultPrevented||u(d)}}function Ey({page:r,...u}){let{router:d}=wg(),c=E.useMemo(()=>cg(d.routes,r,d.basename),[d.routes,r,d.basename]);return c?E.createElement(Ay,{page:r,matches:c,...u}):null}function Ty(r){let{manifest:u,routeModules:d}=Sg(),[c,m]=E.useState([]);return E.useEffect(()=>{let p=!1;return xy(r,u,d).then(x=>{p||m(x)}),()=>{p=!0}},[r,u,d]),c}function Ay({page:r,matches:u,...d}){let c=el(),{manifest:m,routeModules:p}=Sg(),{basename:x}=wg(),{loaderData:j,matches:N}=ky(),b=E.useMemo(()=>Qm(r,u,N,m,c,"data"),[r,u,N,m,c]),S=E.useMemo(()=>Qm(r,u,N,m,c,"assets"),[r,u,N,m,c]),T=E.useMemo(()=>{if(r===c.pathname+c.search+c.hash)return[];let V=new Set,de=!1;if(u.forEach(he=>{let se=m.routes[he.route.id];!se||!se.hasLoader||(!b.some(U=>U.route.id===he.route.id)&&he.route.id in j&&p[he.route.id]?.shouldRevalidate||se.hasClientLoader?de=!0:V.add(he.route.id))}),V.size===0)return[];let fe=py(r,x,"data");return de&&V.size>0&&fe.searchParams.set("_routes",u.filter(he=>V.has(he.route.id)).map(he=>he.route.id).join(",")),[fe.pathname+fe.search]},[x,j,c,m,b,u,r,p]),Q=E.useMemo(()=>by(S,m),[S,m]),ee=Ty(S);return E.createElement(E.Fragment,null,T.map(V=>E.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...d})),Q.map(V=>E.createElement("link",{key:V,rel:"modulepreload",href:V,...d})),ee.map(({key:V,link:de})=>E.createElement("link",{key:V,nonce:d.nonce,...de})))}function Cy(...r){return u=>{r.forEach(d=>{typeof d=="function"?d(u):d!=null&&(d.current=u)})}}var jg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jg&&(window.__reactRouterVersion="7.9.1")}catch{}function _y({basename:r,children:u,window:d}){let c=E.useRef();c.current==null&&(c.current=y0({window:d,v5Compat:!0}));let m=c.current,[p,x]=E.useState({action:m.action,location:m.location}),j=E.useCallback(N=>{E.startTransition(()=>x(N))},[x]);return E.useLayoutEffect(()=>m.listen(j),[m,j]),E.createElement(iy,{basename:r,children:u,location:p.location,navigationType:p.action,navigator:m})}var kg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,So=E.forwardRef(function({onClick:u,discover:d="render",prefetch:c="none",relative:m,reloadDocument:p,replace:x,state:j,target:N,to:b,preventScrollReset:S,viewTransition:T,...Q},ee){let{basename:V}=E.useContext(Ca),de=typeof b=="string"&&kg.test(b),fe,he=!1;if(typeof b=="string"&&de&&(fe=b,jg))try{let Le=new URL(window.location.href),me=b.startsWith("//")?new URL(Le.protocol+b):new URL(b),Ae=nr(me.pathname,V);me.origin===Le.origin&&Ae!=null?b=Ae+me.search+me.hash:he=!0}catch{Aa(!1,`<Link to="${b}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let se=$0(b,{relative:m}),[U,Y,re]=Ny(c,Q),ue=Ry(b,{replace:x,state:j,target:N,preventScrollReset:S,relative:m,viewTransition:T});function pe(Le){u&&u(Le),Le.defaultPrevented||ue(Le)}let _e=E.createElement("a",{...Q,...re,href:fe||se,onClick:he||p?u:pe,ref:Cy(ee,Y),target:N,"data-discover":!de&&d==="render"?"true":void 0});return U&&!de?E.createElement(E.Fragment,null,_e,E.createElement(Ey,{page:se})):_e});So.displayName="Link";var Dy=E.forwardRef(function({"aria-current":u="page",caseSensitive:d=!1,className:c="",end:m=!1,style:p,to:x,viewTransition:j,children:N,...b},S){let T=eu(x,{relative:b.relative}),Q=el(),ee=E.useContext(ko),{navigator:V,basename:de}=E.useContext(Ca),fe=ee!=null&&Ly(T)&&j===!0,he=V.encodeLocation?V.encodeLocation(T).pathname:T.pathname,se=Q.pathname,U=ee&&ee.navigation&&ee.navigation.location?ee.navigation.location.pathname:null;d||(se=se.toLowerCase(),U=U?U.toLowerCase():null,he=he.toLowerCase()),U&&de&&(U=nr(U,de)||U);const Y=he!=="/"&&he.endsWith("/")?he.length-1:he.length;let re=se===he||!m&&se.startsWith(he)&&se.charAt(Y)==="/",ue=U!=null&&(U===he||!m&&U.startsWith(he)&&U.charAt(he.length)==="/"),pe={isActive:re,isPending:ue,isTransitioning:fe},_e=re?u:void 0,Le;typeof c=="function"?Le=c(pe):Le=[c,re?"active":null,ue?"pending":null,fe?"transitioning":null].filter(Boolean).join(" ");let me=typeof p=="function"?p(pe):p;return E.createElement(So,{...b,"aria-current":_e,className:Le,ref:S,style:me,to:x,viewTransition:j},typeof N=="function"?N(pe):N)});Dy.displayName="NavLink";var My=E.forwardRef(({discover:r="render",fetcherKey:u,navigate:d,reloadDocument:c,replace:m,state:p,method:x=vo,action:j,onSubmit:N,relative:b,preventScrollReset:S,viewTransition:T,...Q},ee)=>{let V=Uy(),de=qy(j,{relative:b}),fe=x.toLowerCase()==="get"?"get":"post",he=typeof j=="string"&&kg.test(j),se=U=>{if(N&&N(U),U.defaultPrevented)return;U.preventDefault();let Y=U.nativeEvent.submitter,re=Y?.getAttribute("formmethod")||x;V(Y||U.currentTarget,{fetcherKey:u,method:re,navigate:d,replace:m,state:p,relative:b,preventScrollReset:S,viewTransition:T})};return E.createElement("form",{ref:ee,method:fe,action:de,onSubmit:c?N:se,...Q,"data-discover":!he&&r==="render"?"true":void 0})});My.displayName="Form";function Oy(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ng(r){let u=E.useContext(Mi);return Bt(u,Oy(r)),u}function Ry(r,{target:u,replace:d,state:c,preventScrollReset:m,relative:p,viewTransition:x}={}){let j=X0(),N=el(),b=eu(r,{relative:p});return E.useCallback(S=>{if(fy(S,u)){S.preventDefault();let T=d!==void 0?d:Js(N)===Js(b);j(r,{replace:T,state:c,preventScrollReset:m,relative:p,viewTransition:x})}},[N,j,b,d,c,u,r,m,p,x])}var zy=0,By=()=>`__${String(++zy)}__`;function Uy(){let{router:r}=Ng("useSubmit"),{basename:u}=E.useContext(Ca),d=ny();return E.useCallback(async(c,m={})=>{let{action:p,method:x,encType:j,formData:N,body:b}=gy(c,u);if(m.navigate===!1){let S=m.fetcherKey||By();await r.fetch(S,d,m.action||p,{preventScrollReset:m.preventScrollReset,formData:N,body:b,formMethod:m.method||x,formEncType:m.encType||j,flushSync:m.flushSync})}else await r.navigate(m.action||p,{preventScrollReset:m.preventScrollReset,formData:N,body:b,formMethod:m.method||x,formEncType:m.encType||j,replace:m.replace,state:m.state,fromRouteId:d,flushSync:m.flushSync,viewTransition:m.viewTransition})},[r,u,d])}function qy(r,{relative:u}={}){let{basename:d}=E.useContext(Ca),c=E.useContext(ir);Bt(c,"useFormAction must be used inside a RouteContext");let[m]=c.matches.slice(-1),p={...eu(r||".",{relative:u})},x=el();if(r==null){p.search=x.search;let j=new URLSearchParams(p.search),N=j.getAll("index");if(N.some(S=>S==="")){j.delete("index"),N.filter(T=>T).forEach(T=>j.append("index",T));let S=j.toString();p.search=S?`?${S}`:""}}return(!r||r===".")&&m.route.index&&(p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index"),d!=="/"&&(p.pathname=p.pathname==="/"?d:tr([d,p.pathname])),Js(p)}function Ly(r,{relative:u}={}){let d=E.useContext(pg);Bt(d!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=Ng("useViewTransitionState"),m=eu(r,{relative:u});if(!d.isTransitioning)return!1;let p=nr(d.currentLocation.pathname,c)||d.currentLocation.pathname,x=nr(d.nextLocation.pathname,c)||d.nextLocation.pathname;return wo(m.pathname,x)!=null||wo(m.pathname,p)!=null}var Eg=og();const Hy=()=>{const[r,u]=E.useState(!1),[d,c]=E.useState(!1),m=el();E.useEffect(()=>{const j=localStorage.getItem("rtp-theme"),N=window.matchMedia("(prefers-color-scheme: dark)").matches;j==="dark"||!j&&N?(u(!0),document.documentElement.classList.add("dark")):(u(!1),document.documentElement.classList.remove("dark"))},[]);const p=()=>{const j=!r;console.log(" Toggling theme. Current:",r,"-> New:",j),u(j),j?(document.documentElement.classList.add("dark"),localStorage.setItem("rtp-theme","dark"),console.log(" Applied dark theme, classes:",document.documentElement.classList.toString())):(document.documentElement.classList.remove("dark"),localStorage.setItem("rtp-theme","light"),console.log(" Applied light theme, classes:",document.documentElement.classList.toString())),document.body.style.display="none",document.body.offsetHeight,document.body.style.display=""},x=[{path:"/",label:"Timer",icon:"timer"},{path:"/timeline",label:"Timeline",icon:"timeline"},{path:"/analytics",label:"Analytics",icon:"analytics"},{path:"/report",label:"Reports",icon:"assessment"},{path:"/settings",label:"Settings",icon:"settings"}];return s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"flex justify-between items-center mb-10 px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"flex items-center space-x-8",children:[s.jsx("h1",{className:"text-xl font-display font-semibold text-gray-800 dark:text-gray-200",children:"Research Timer Pro"}),s.jsx("nav",{className:"hidden md:flex space-x-6",children:x.map(j=>s.jsxs(So,{to:j.path,className:`flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${m.pathname===j.path?"bg-blue-600 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[s.jsx("span",{className:"material-icons text-sm",children:j.icon}),s.jsx("span",{children:j.label})]},j.path))})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{className:"p-2 rounded-full text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:p,"aria-label":"Toggle theme",children:s.jsx("span",{className:"material-icons",children:r?"light_mode":"dark_mode"})}),s.jsx("button",{className:"md:hidden p-2 rounded-full text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>c(!d),"aria-label":"Toggle mobile menu",children:s.jsx("span",{className:"material-icons",children:d?"close":"menu"})})]})]}),d&&s.jsx("div",{className:"md:hidden fixed top-0 left-0 right-0 z-50 bg-white dark:bg-gray-900 shadow-lg",children:s.jsxs("div",{className:"px-4 py-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-lg font-display font-semibold text-gray-800 dark:text-gray-200",children:"Navigation"}),s.jsx("button",{className:"p-2 rounded-full text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:()=>c(!1),children:s.jsx("span",{className:"material-icons",children:"close"})})]}),s.jsx("nav",{className:"space-y-2",children:x.map(j=>s.jsxs(So,{to:j.path,onClick:()=>c(!1),className:`flex items-center space-x-3 px-4 py-3 rounded-lg text-base font-medium transition-colors ${m.pathname===j.path?"bg-blue-600 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[s.jsx("span",{className:"material-icons",children:j.icon}),s.jsx("span",{children:j.label})]},j.path))})]})})]})},Yy=()=>null,Ky=({children:r})=>s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx(Hy,{}),s.jsx("main",{className:"max-w-4xl mx-auto",children:r}),s.jsx(Yy,{})]}),We=da.forwardRef(({className:r="",variant:u="primary",size:d="md",leftIcon:c,rightIcon:m,children:p,...x},j)=>{const N="inline-flex items-center justify-center rounded-xl font-semibold transition-all duration-200 transform focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none hover:scale-105 active:scale-95",b={sm:"px-4 py-2 text-sm h-9",md:"px-6 py-3 text-sm h-11",lg:"px-8 py-4 text-base h-14 text-lg font-bold"},S={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-500/20 shadow-sm hover:shadow-md",secondary:"bg-gray-100 text-gray-800 border border-gray-300 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-700 focus:ring-2 focus:ring-blue-500/20 shadow-sm hover:shadow-md",ghost:"text-gray-800 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-800 focus:ring-2 focus:ring-blue-500/20",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-2 focus:ring-red-500/20 shadow-sm hover:shadow-md",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-2 focus:ring-green-500/20 shadow-sm hover:shadow-md"},T=[N,b[d],S[u],r].filter(Boolean).join(" ");return s.jsxs("button",{ref:j,className:T,...x,children:[c&&s.jsx("span",{className:"material-icons mr-2",children:c}),p,m&&s.jsx("span",{className:"material-icons ml-2",children:m})]})});We.displayName="Button";const it=({label:r,htmlFor:u,hint:d,children:c,className:m=""})=>s.jsxs("div",{className:`space-y-2 ${m}`,children:[s.jsx("label",{htmlFor:u,className:"block text-sm font-semibold text-gray-800 dark:text-gray-200",children:r}),c,d&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:d})]});var bo={exports:{}},Gy=bo.exports,Vm;function $y(){return Vm||(Vm=1,(function(r,u){(function(d,c){r.exports=c()})(Gy,function(){var d=function(l,o){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])})(l,o)},c=function(){return(c=Object.assign||function(l){for(var o,h=1,g=arguments.length;h<g;h++)for(var y in o=arguments[h])Object.prototype.hasOwnProperty.call(o,y)&&(l[y]=o[y]);return l}).apply(this,arguments)};function m(l,o,h){for(var g,y=0,w=o.length;y<w;y++)!g&&y in o||((g=g||Array.prototype.slice.call(o,0,y))[y]=o[y]);return l.concat(g||Array.prototype.slice.call(o))}var p=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:s0,x=Object.keys,j=Array.isArray;function N(l,o){return typeof o!="object"||x(o).forEach(function(h){l[h]=o[h]}),l}typeof Promise>"u"||p.Promise||(p.Promise=Promise);var b=Object.getPrototypeOf,S={}.hasOwnProperty;function T(l,o){return S.call(l,o)}function Q(l,o){typeof o=="function"&&(o=o(b(l))),(typeof Reflect>"u"?x:Reflect.ownKeys)(o).forEach(function(h){V(l,h,o[h])})}var ee=Object.defineProperty;function V(l,o,h,g){ee(l,o,N(h&&T(h,"get")&&typeof h.get=="function"?{get:h.get,set:h.set,configurable:!0}:{value:h,configurable:!0,writable:!0},g))}function de(l){return{from:function(o){return l.prototype=Object.create(o.prototype),V(l.prototype,"constructor",l),{extend:Q.bind(null,l.prototype)}}}}var fe=Object.getOwnPropertyDescriptor,he=[].slice;function se(l,o,h){return he.call(l,o,h)}function U(l,o){return o(l)}function Y(l){if(!l)throw new Error("Assertion Failed")}function re(l){p.setImmediate?setImmediate(l):setTimeout(l,0)}function ue(l,o){if(typeof o=="string"&&T(l,o))return l[o];if(!o)return l;if(typeof o!="string"){for(var h=[],g=0,y=o.length;g<y;++g){var w=ue(l,o[g]);h.push(w)}return h}var A=o.indexOf(".");if(A!==-1){var _=l[o.substr(0,A)];return _==null?void 0:ue(_,o.substr(A+1))}}function pe(l,o,h){if(l&&o!==void 0&&!("isFrozen"in Object&&Object.isFrozen(l)))if(typeof o!="string"&&"length"in o){Y(typeof h!="string"&&"length"in h);for(var g=0,y=o.length;g<y;++g)pe(l,o[g],h[g])}else{var w,A,_=o.indexOf(".");_!==-1?(w=o.substr(0,_),(A=o.substr(_+1))===""?h===void 0?j(l)&&!isNaN(parseInt(w))?l.splice(w,1):delete l[w]:l[w]=h:pe(_=!(_=l[w])||!T(l,w)?l[w]={}:_,A,h)):h===void 0?j(l)&&!isNaN(parseInt(o))?l.splice(o,1):delete l[o]:l[o]=h}}function _e(l){var o,h={};for(o in l)T(l,o)&&(h[o]=l[o]);return h}var Le=[].concat;function me(l){return Le.apply([],l)}var cn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(me([8,16,32,64].map(function(l){return["Int","Uint","Float"].map(function(o){return o+l+"Array"})}))).filter(function(l){return p[l]}),Ae=new Set(cn.map(function(l){return p[l]})),Ce=null;function ce(l){return Ce=new WeakMap,l=(function o(h){if(!h||typeof h!="object")return h;var g=Ce.get(h);if(g)return g;if(j(h)){g=[],Ce.set(h,g);for(var y=0,w=h.length;y<w;++y)g.push(o(h[y]))}else if(Ae.has(h.constructor))g=h;else{var A,_=b(h);for(A in g=_===Object.prototype?{}:Object.create(_),Ce.set(h,g),h)T(h,A)&&(g[A]=o(h[A]))}return g})(l),Ce=null,l}var dt={}.toString;function Pe(l){return dt.call(l).slice(8,-1)}var Z=typeof Symbol<"u"?Symbol.iterator:"@@iterator",xe=typeof Z=="symbol"?function(l){var o;return l!=null&&(o=l[Z])&&o.apply(l)}:function(){return null};function Me(l,o){return o=l.indexOf(o),0<=o&&l.splice(o,1),0<=o}var Ve={};function C(l){var o,h,g,y;if(arguments.length===1){if(j(l))return l.slice();if(this===Ve&&typeof l=="string")return[l];if(y=xe(l)){for(h=[];!(g=y.next()).done;)h.push(g.value);return h}if(l==null)return[l];if(typeof(o=l.length)!="number")return[l];for(h=new Array(o);o--;)h[o]=l[o];return h}for(o=arguments.length,h=new Array(o);o--;)h[o]=arguments[o];return h}var te=typeof Symbol<"u"?function(l){return l[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},aa=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Sn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(aa),ge={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ye(l,o){this.name=l,this.message=o}function De(l,o){return l+". Errors: "+Object.keys(o).map(function(h){return o[h].toString()}).filter(function(h,g,y){return y.indexOf(h)===g}).join(`
`)}function Ye(l,o,h,g){this.failures=o,this.failedKeys=g,this.successCount=h,this.message=De(l,o)}function Ue(l,o){this.name="BulkError",this.failures=Object.keys(o).map(function(h){return o[h]}),this.failuresByPos=o,this.message=De(l,this.failures)}de(ye).from(Error).extend({toString:function(){return this.name+": "+this.message}}),de(Ye).from(ye),de(Ue).from(ye);var Zt=Sn.reduce(function(l,o){return l[o]=o+"Error",l},{}),vt=ye,Oe=Sn.reduce(function(l,o){var h=o+"Error";function g(y,w){this.name=h,y?typeof y=="string"?(this.message="".concat(y).concat(w?`
 `+w:""),this.inner=w||null):typeof y=="object"&&(this.message="".concat(y.name," ").concat(y.message),this.inner=y):(this.message=ge[o]||h,this.inner=null)}return de(g).from(vt),l[o]=g,l},{});Oe.Syntax=SyntaxError,Oe.Type=TypeError,Oe.Range=RangeError;var fa=aa.reduce(function(l,o){return l[o+"Error"]=Oe[o],l},{}),Gn=Sn.reduce(function(l,o){return["Syntax","Type","Range"].indexOf(o)===-1&&(l[o+"Error"]=Oe[o]),l},{});function st(){}function ta(l){return l}function _a(l,o){return l==null||l===ta?o:function(h){return o(l(h))}}function na(l,o){return function(){l.apply(this,arguments),o.apply(this,arguments)}}function be(l,o){return l===st?o:function(){var h=l.apply(this,arguments);h!==void 0&&(arguments[0]=h);var g=this.onsuccess,y=this.onerror;this.onsuccess=null,this.onerror=null;var w=o.apply(this,arguments);return g&&(this.onsuccess=this.onsuccess?na(g,this.onsuccess):g),y&&(this.onerror=this.onerror?na(y,this.onerror):y),w!==void 0?w:h}}function Fe(l,o){return l===st?o:function(){l.apply(this,arguments);var h=this.onsuccess,g=this.onerror;this.onsuccess=this.onerror=null,o.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?na(h,this.onsuccess):h),g&&(this.onerror=this.onerror?na(g,this.onerror):g)}}function pn(l,o){return l===st?o:function(h){var g=l.apply(this,arguments);N(h,g);var y=this.onsuccess,w=this.onerror;return this.onsuccess=null,this.onerror=null,h=o.apply(this,arguments),y&&(this.onsuccess=this.onsuccess?na(y,this.onsuccess):y),w&&(this.onerror=this.onerror?na(w,this.onerror):w),g===void 0?h===void 0?void 0:h:N(g,h)}}function ha(l,o){return l===st?o:function(){return o.apply(this,arguments)!==!1&&l.apply(this,arguments)}}function Nt(l,o){return l===st?o:function(){var h=l.apply(this,arguments);if(h&&typeof h.then=="function"){for(var g=this,y=arguments.length,w=new Array(y);y--;)w[y]=arguments[y];return h.then(function(){return o.apply(g,w)})}return o.apply(this,arguments)}}Gn.ModifyError=Ye,Gn.DexieError=ye,Gn.BulkError=Ue;var Dt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function yn(l){Dt=l}var Nn={},tl=100,cn=typeof Promise>"u"?[]:(function(){var l=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[l,b(l),l];var o=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[o,b(o),l]})(),aa=cn[0],Sn=cn[1],cn=cn[2],Sn=Sn&&Sn.then,Tt=aa&&aa.constructor,vn=!!cn,Mt=function(l,o){ra.push([l,o]),ma&&(queueMicrotask(qi),ma=!1)},sr=!0,ma=!0,$n=[],Dn=[],ur=ta,dn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:st,pgp:!1,env:{},finalize:st},ze=dn,ra=[],Da=0,nl=[];function Te(l){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var o=this._PSD=ze;if(typeof l!="function"){if(l!==Nn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&zi(this,this._value))}this._state=null,this._value=null,++o.ref,(function h(g,y){try{y(function(w){if(g._state===null){if(w===g)throw new TypeError("A promise cannot be resolved with itself.");var A=g._lib&&Ma();w&&typeof w.then=="function"?h(g,function(_,O){w instanceof Te?w._then(_,O):w.then(_,O)}):(g._state=!0,g._value=w,Bi(g)),A&&cr()}},zi.bind(null,g))}catch(w){zi(g,w)}})(this,l)}var al={get:function(){var l=ze,o=rl;function h(g,y){var w=this,A=!l.global&&(l!==ze||o!==rl),_=A&&!xn(),O=new Te(function(B,H){zl(w,new or(ya(g,l,A,_),ya(y,l,A,_),B,H,l))});return this._consoleTask&&(O._consoleTask=this._consoleTask),O}return h.prototype=Nn,h},set:function(l){V(this,"then",l&&l.prototype===Nn?al:{get:function(){return l},set:al.set})}};function or(l,o,h,g,y){this.onFulfilled=typeof l=="function"?l:null,this.onRejected=typeof o=="function"?o:null,this.resolve=h,this.reject=g,this.psd=y}function zi(l,o){var h,g;Dn.push(o),l._state===null&&(h=l._lib&&Ma(),o=ur(o),l._state=!1,l._value=o,g=l,$n.some(function(y){return y._value===g._value})||$n.push(g),Bi(l),h&&cr())}function Bi(l){var o=l._listeners;l._listeners=[];for(var h=0,g=o.length;h<g;++h)zl(l,o[h]);var y=l._PSD;--y.ref||y.finalize(),Da===0&&(++Da,Mt(function(){--Da==0&&Xn()},[]))}function zl(l,o){if(l._state!==null){var h=l._state?o.onFulfilled:o.onRejected;if(h===null)return(l._state?o.resolve:o.reject)(l._value);++o.psd.ref,++Da,Mt(Ui,[h,l,o])}else l._listeners.push(o)}function Ui(l,o,h){try{var g,y=o._value;!o._state&&Dn.length&&(Dn=[]),g=Dt&&o._consoleTask?o._consoleTask.run(function(){return l(y)}):l(y),o._state||Dn.indexOf(y)!==-1||(function(w){for(var A=$n.length;A;)if($n[--A]._value===w._value)return $n.splice(A,1)})(o),h.resolve(g)}catch(w){h.reject(w)}finally{--Da==0&&Xn(),--h.psd.ref||h.psd.finalize()}}function qi(){pa(dn,function(){Ma()&&cr()})}function Ma(){var l=sr;return ma=sr=!1,l}function cr(){var l,o,h;do for(;0<ra.length;)for(l=ra,ra=[],h=l.length,o=0;o<h;++o){var g=l[o];g[0].apply(null,g[1])}while(0<ra.length);ma=sr=!0}function Xn(){var l=$n;$n=[],l.forEach(function(g){g._PSD.onunhandled.call(null,g._value,g)});for(var o=nl.slice(0),h=o.length;h;)o[--h]()}function Ht(l){return new Te(Nn,!1,l)}function Ie(l,o){var h=ze;return function(){var g=Ma(),y=ze;try{return St(h,!0),l.apply(this,arguments)}catch(w){o&&o(w)}finally{St(y,!1),g&&cr()}}}Q(Te.prototype,{then:al,_then:function(l,o){zl(this,new or(null,null,l,o,ze))},catch:function(l){if(arguments.length===1)return this.then(null,l);var o=l,h=arguments[1];return typeof o=="function"?this.then(null,function(g){return(g instanceof o?h:Ht)(g)}):this.then(null,function(g){return(g&&g.name===o?h:Ht)(g)})},finally:function(l){return this.then(function(o){return Te.resolve(l()).then(function(){return o})},function(o){return Te.resolve(l()).then(function(){return Ht(o)})})},timeout:function(l,o){var h=this;return l<1/0?new Te(function(g,y){var w=setTimeout(function(){return y(new Oe.Timeout(o))},l);h.then(g,y).finally(clearTimeout.bind(null,w))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&V(Te.prototype,Symbol.toStringTag,"Dexie.Promise"),dn.env=Hi(),Q(Te,{all:function(){var l=C.apply(null,arguments).map(ga);return new Te(function(o,h){l.length===0&&o([]);var g=l.length;l.forEach(function(y,w){return Te.resolve(y).then(function(A){l[w]=A,--g||o(l)},h)})})},resolve:function(l){return l instanceof Te?l:l&&typeof l.then=="function"?new Te(function(o,h){l.then(o,h)}):new Te(Nn,!0,l)},reject:Ht,race:function(){var l=C.apply(null,arguments).map(ga);return new Te(function(o,h){l.map(function(g){return Te.resolve(g).then(o,h)})})},PSD:{get:function(){return ze},set:function(l){return ze=l}},totalEchoes:{get:function(){return rl}},newPSD:Qn,usePSD:pa,scheduler:{get:function(){return Mt},set:function(l){Mt=l}},rejectionMapper:{get:function(){return ur},set:function(l){ur=l}},follow:function(l,o){return new Te(function(h,g){return Qn(function(y,w){var A=ze;A.unhandleds=[],A.onunhandled=w,A.finalize=na(function(){var _,O=this;_=function(){O.unhandleds.length===0?y():w(O.unhandleds[0])},nl.push(function B(){_(),nl.splice(nl.indexOf(B),1)}),++Da,Mt(function(){--Da==0&&Xn()},[])},A.finalize),l()},o,h,g)})}}),Tt&&(Tt.allSettled&&V(Te,"allSettled",function(){var l=C.apply(null,arguments).map(ga);return new Te(function(o){l.length===0&&o([]);var h=l.length,g=new Array(h);l.forEach(function(y,w){return Te.resolve(y).then(function(A){return g[w]={status:"fulfilled",value:A}},function(A){return g[w]={status:"rejected",reason:A}}).then(function(){return--h||o(g)})})})}),Tt.any&&typeof AggregateError<"u"&&V(Te,"any",function(){var l=C.apply(null,arguments).map(ga);return new Te(function(o,h){l.length===0&&h(new AggregateError([]));var g=l.length,y=new Array(g);l.forEach(function(w,A){return Te.resolve(w).then(function(_){return o(_)},function(_){y[A]=_,--g||h(new AggregateError(y))})})})}),Tt.withResolvers&&(Te.withResolvers=Tt.withResolvers));var At={awaits:0,echoes:0,id:0},Li=0,Bl=[],Ul=0,rl=0,ll=0;function Qn(l,o,h,g){var y=ze,w=Object.create(y);return w.parent=y,w.ref=0,w.global=!1,w.id=++ll,dn.env,w.env=vn?{Promise:Te,PromiseProp:{value:Te,configurable:!0,writable:!0},all:Te.all,race:Te.race,allSettled:Te.allSettled,any:Te.any,resolve:Te.resolve,reject:Te.reject}:{},o&&N(w,o),++y.ref,w.finalize=function(){--this.parent.ref||this.parent.finalize()},g=pa(w,l,h,g),w.ref===0&&w.finalize(),g}function Mn(){return At.id||(At.id=++Li),++At.awaits,At.echoes+=tl,At.id}function xn(){return!!At.awaits&&(--At.awaits==0&&(At.id=0),At.echoes=At.awaits*tl,!0)}function ga(l){return At.echoes&&l&&l.constructor===Tt?(Mn(),l.then(function(o){return xn(),o},function(o){return xn(),Ot(o)})):l}function dr(){var l=Bl[Bl.length-1];Bl.pop(),St(l,!1)}function St(l,o){var h,g=ze;(o?!At.echoes||Ul++&&l===ze:!Ul||--Ul&&l===ze)||queueMicrotask(o?(function(y){++rl,At.echoes&&--At.echoes!=0||(At.echoes=At.awaits=At.id=0),Bl.push(ze),St(y,!0)}).bind(null,l):dr),l!==ze&&(ze=l,g===dn&&(dn.env=Hi()),vn&&(h=dn.env.Promise,o=l.env,(g.global||l.global)&&(Object.defineProperty(p,"Promise",o.PromiseProp),h.all=o.all,h.race=o.race,h.resolve=o.resolve,h.reject=o.reject,o.allSettled&&(h.allSettled=o.allSettled),o.any&&(h.any=o.any))))}function Hi(){var l=p.Promise;return vn?{Promise:l,PromiseProp:Object.getOwnPropertyDescriptor(p,"Promise"),all:l.all,race:l.race,allSettled:l.allSettled,any:l.any,resolve:l.resolve,reject:l.reject}:{}}function pa(l,o,h,g,y){var w=ze;try{return St(l,!0),o(h,g,y)}finally{St(w,!1)}}function ya(l,o,h,g){return typeof l!="function"?l:function(){var y=ze;h&&Mn(),St(o,!0);try{return l.apply(this,arguments)}finally{St(y,!1),g&&queueMicrotask(xn)}}}function va(l){Promise===Tt&&At.echoes===0?Ul===0?l():enqueueNativeMicroTask(l):setTimeout(l,0)}(""+Sn).indexOf("[native code]")===-1&&(Mn=xn=st);var Ot=Te.reject,xa="",Vn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",tu="String expected.",la=[],Oa="__dbnames",On="readonly",il="readwrite";function ba(l,o){return l?o?function(){return l.apply(this,arguments)&&o.apply(this,arguments)}:l:o}var Ra={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function fr(l){return typeof l!="string"||/\./.test(l)?function(o){return o}:function(o){return o[l]===void 0&&l in o&&delete(o=ce(o))[l],o}}function ql(){throw Oe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function nt(l,o){try{var h=Yi(l),g=Yi(o);if(h!==g)return h==="Array"?1:g==="Array"?-1:h==="binary"?1:g==="binary"?-1:h==="string"?1:g==="string"?-1:h==="Date"?1:g!=="Date"?NaN:-1;switch(h){case"number":case"Date":case"string":return o<l?1:l<o?-1:0;case"binary":return(function(y,w){for(var A=y.length,_=w.length,O=A<_?A:_,B=0;B<O;++B)if(y[B]!==w[B])return y[B]<w[B]?-1:1;return A===_?0:A<_?-1:1})(bn(l),bn(o));case"Array":return(function(y,w){for(var A=y.length,_=w.length,O=A<_?A:_,B=0;B<O;++B){var H=nt(y[B],w[B]);if(H!==0)return H}return A===_?0:A<_?-1:1})(l,o)}}catch{}return NaN}function Yi(l){var o=typeof l;return o!="object"?o:ArrayBuffer.isView(l)?"binary":(l=Pe(l),l==="ArrayBuffer"?"binary":l)}function bn(l){return l instanceof Uint8Array?l:ArrayBuffer.isView(l)?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):new Uint8Array(l)}function sl(l,o,h){var g=l.schema.yProps;return g?(o&&0<h.numFailures&&(o=o.filter(function(y,w){return!h.failures[w]})),Promise.all(g.map(function(y){return y=y.updatesTable,o?l.db.table(y).where("k").anyOf(o).delete():l.db.table(y).clear()})).then(function(){return h})):h}var nu=(ft.prototype._trans=function(l,o,h){var g=this._tx||ze.trans,y=this.name,w=Dt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(l==="readonly"?"read":"write"," ").concat(this.name));function A(B,H,D){if(!D.schema[y])throw new Oe.NotFound("Table "+y+" not part of transaction");return o(D.idbtrans,D)}var _=Ma();try{var O=g&&g.db._novip===this.db._novip?g===ze.trans?g._promise(l,A,h):Qn(function(){return g._promise(l,A,h)},{trans:g,transless:ze.transless||ze}):(function B(H,D,K,R){if(H.idbdb&&(H._state.openComplete||ze.letThrough||H._vip)){var q=H._createTransaction(D,K,H._dbSchema);try{q.create(),H._state.PR1398_maxLoop=3}catch(L){return L.name===Zt.InvalidState&&H.isOpen()&&0<--H._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),H.close({disableAutoOpen:!1}),H.open().then(function(){return B(H,D,K,R)})):Ot(L)}return q._promise(D,function(L,G){return Qn(function(){return ze.trans=q,R(L,G,q)})}).then(function(L){if(D==="readwrite")try{q.idbtrans.commit()}catch{}return D==="readonly"?L:q._completion.then(function(){return L})})}if(H._state.openComplete)return Ot(new Oe.DatabaseClosed(H._state.dbOpenError));if(!H._state.isBeingOpened){if(!H._state.autoOpen)return Ot(new Oe.DatabaseClosed);H.open().catch(st)}return H._state.dbReadyPromise.then(function(){return B(H,D,K,R)})})(this.db,l,[this.name],A);return w&&(O._consoleTask=w,O=O.catch(function(B){return console.trace(B),Ot(B)})),O}finally{_&&cr()}},ft.prototype.get=function(l,o){var h=this;return l&&l.constructor===Object?this.where(l).first(o):l==null?Ot(new Oe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(g){return h.core.get({trans:g,key:l}).then(function(y){return h.hook.reading.fire(y)})}).then(o)},ft.prototype.where=function(l){if(typeof l=="string")return new this.db.WhereClause(this,l);if(j(l))return new this.db.WhereClause(this,"[".concat(l.join("+"),"]"));var o=x(l);if(o.length===1)return this.where(o[0]).equals(l[o[0]]);var h=this.schema.indexes.concat(this.schema.primKey).filter(function(_){if(_.compound&&o.every(function(B){return 0<=_.keyPath.indexOf(B)})){for(var O=0;O<o.length;++O)if(o.indexOf(_.keyPath[O])===-1)return!1;return!0}return!1}).sort(function(_,O){return _.keyPath.length-O.keyPath.length})[0];if(h&&this.db._maxKey!==xa){var w=h.keyPath.slice(0,o.length);return this.where(w).equals(w.map(function(O){return l[O]}))}!h&&Dt&&console.warn("The query ".concat(JSON.stringify(l)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var g=this.schema.idxByName;function y(_,O){return nt(_,O)===0}var A=o.reduce(function(D,O){var B=D[0],H=D[1],D=g[O],K=l[O];return[B||D,B||!D?ba(H,D&&D.multi?function(R){return R=ue(R,O),j(R)&&R.some(function(q){return y(K,q)})}:function(R){return y(K,ue(R,O))}):H]},[null,null]),w=A[0],A=A[1];return w?this.where(w.name).equals(l[w.keyPath]).filter(A):h?this.filter(A):this.where(o).equals("")},ft.prototype.filter=function(l){return this.toCollection().and(l)},ft.prototype.count=function(l){return this.toCollection().count(l)},ft.prototype.offset=function(l){return this.toCollection().offset(l)},ft.prototype.limit=function(l){return this.toCollection().limit(l)},ft.prototype.each=function(l){return this.toCollection().each(l)},ft.prototype.toArray=function(l){return this.toCollection().toArray(l)},ft.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ft.prototype.orderBy=function(l){return new this.db.Collection(new this.db.WhereClause(this,j(l)?"[".concat(l.join("+"),"]"):l))},ft.prototype.reverse=function(){return this.toCollection().reverse()},ft.prototype.mapToClass=function(l){var o,h=this.db,g=this.name;function y(){return o!==null&&o.apply(this,arguments)||this}(this.schema.mappedClass=l).prototype instanceof ql&&((function(O,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function H(){this.constructor=O}d(O,B),O.prototype=B===null?Object.create(B):(H.prototype=B.prototype,new H)})(y,o=l),Object.defineProperty(y.prototype,"db",{get:function(){return h},enumerable:!1,configurable:!0}),y.prototype.table=function(){return g},l=y);for(var w=new Set,A=l.prototype;A;A=b(A))Object.getOwnPropertyNames(A).forEach(function(O){return w.add(O)});function _(O){if(!O)return O;var B,H=Object.create(l.prototype);for(B in O)if(!w.has(B))try{H[B]=O[B]}catch{}return H}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=_,this.hook("reading",_),l},ft.prototype.defineClass=function(){return this.mapToClass(function(l){N(this,l)})},ft.prototype.add=function(l,o){var h=this,g=this.schema.primKey,y=g.auto,w=g.keyPath,A=l;return w&&y&&(A=fr(w)(l)),this._trans("readwrite",function(_){return h.core.mutate({trans:_,type:"add",keys:o!=null?[o]:null,values:[A]})}).then(function(_){return _.numFailures?Te.reject(_.failures[0]):_.lastResult}).then(function(_){if(w)try{pe(l,w,_)}catch{}return _})},ft.prototype.update=function(l,o){return typeof l!="object"||j(l)?this.where(":id").equals(l).modify(o):(l=ue(l,this.schema.primKey.keyPath),l===void 0?Ot(new Oe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(l).modify(o))},ft.prototype.put=function(l,o){var h=this,g=this.schema.primKey,y=g.auto,w=g.keyPath,A=l;return w&&y&&(A=fr(w)(l)),this._trans("readwrite",function(_){return h.core.mutate({trans:_,type:"put",values:[A],keys:o!=null?[o]:null})}).then(function(_){return _.numFailures?Te.reject(_.failures[0]):_.lastResult}).then(function(_){if(w)try{pe(l,w,_)}catch{}return _})},ft.prototype.delete=function(l){var o=this;return this._trans("readwrite",function(h){return o.core.mutate({trans:h,type:"delete",keys:[l]}).then(function(g){return sl(o,[l],g)}).then(function(g){return g.numFailures?Te.reject(g.failures[0]):void 0})})},ft.prototype.clear=function(){var l=this;return this._trans("readwrite",function(o){return l.core.mutate({trans:o,type:"deleteRange",range:Ra}).then(function(h){return sl(l,null,h)})}).then(function(o){return o.numFailures?Te.reject(o.failures[0]):void 0})},ft.prototype.bulkGet=function(l){var o=this;return this._trans("readonly",function(h){return o.core.getMany({keys:l,trans:h}).then(function(g){return g.map(function(y){return o.hook.reading.fire(y)})})})},ft.prototype.bulkAdd=function(l,o,h){var g=this,y=Array.isArray(o)?o:void 0,w=(h=h||(y?void 0:o))?h.allKeys:void 0;return this._trans("readwrite",function(A){var B=g.schema.primKey,_=B.auto,B=B.keyPath;if(B&&y)throw new Oe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(y&&y.length!==l.length)throw new Oe.InvalidArgument("Arguments objects and keys must have the same length");var O=l.length,B=B&&_?l.map(fr(B)):l;return g.core.mutate({trans:A,type:"add",keys:y,values:B,wantResults:w}).then(function(q){var D=q.numFailures,K=q.results,R=q.lastResult,q=q.failures;if(D===0)return w?K:R;throw new Ue("".concat(g.name,".bulkAdd(): ").concat(D," of ").concat(O," operations failed"),q)})})},ft.prototype.bulkPut=function(l,o,h){var g=this,y=Array.isArray(o)?o:void 0,w=(h=h||(y?void 0:o))?h.allKeys:void 0;return this._trans("readwrite",function(A){var B=g.schema.primKey,_=B.auto,B=B.keyPath;if(B&&y)throw new Oe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(y&&y.length!==l.length)throw new Oe.InvalidArgument("Arguments objects and keys must have the same length");var O=l.length,B=B&&_?l.map(fr(B)):l;return g.core.mutate({trans:A,type:"put",keys:y,values:B,wantResults:w}).then(function(q){var D=q.numFailures,K=q.results,R=q.lastResult,q=q.failures;if(D===0)return w?K:R;throw new Ue("".concat(g.name,".bulkPut(): ").concat(D," of ").concat(O," operations failed"),q)})})},ft.prototype.bulkUpdate=function(l){var o=this,h=this.core,g=l.map(function(A){return A.key}),y=l.map(function(A){return A.changes}),w=[];return this._trans("readwrite",function(A){return h.getMany({trans:A,keys:g,cache:"clone"}).then(function(_){var O=[],B=[];l.forEach(function(D,K){var R=D.key,q=D.changes,L=_[K];if(L){for(var G=0,X=Object.keys(q);G<X.length;G++){var I=X[G],ne=q[I];if(I===o.schema.primKey.keyPath){if(nt(ne,R)!==0)throw new Oe.Constraint("Cannot update primary key in bulkUpdate()")}else pe(L,I,ne)}w.push(K),O.push(R),B.push(L)}});var H=O.length;return h.mutate({trans:A,type:"put",keys:O,values:B,updates:{keys:g,changeSpecs:y}}).then(function(D){var K=D.numFailures,R=D.failures;if(K===0)return H;for(var q=0,L=Object.keys(R);q<L.length;q++){var G,X=L[q],I=w[Number(X)];I!=null&&(G=R[X],delete R[X],R[I]=G)}throw new Ue("".concat(o.name,".bulkUpdate(): ").concat(K," of ").concat(H," operations failed"),R)})})})},ft.prototype.bulkDelete=function(l){var o=this,h=l.length;return this._trans("readwrite",function(g){return o.core.mutate({trans:g,type:"delete",keys:l}).then(function(y){return sl(o,l,y)})}).then(function(A){var y=A.numFailures,w=A.lastResult,A=A.failures;if(y===0)return w;throw new Ue("".concat(o.name,".bulkDelete(): ").concat(y," of ").concat(h," operations failed"),A)})},ft);function ft(){}function hr(l){function o(A,_){if(_){for(var O=arguments.length,B=new Array(O-1);--O;)B[O-1]=arguments[O];return h[A].subscribe.apply(null,B),l}if(typeof A=="string")return h[A]}var h={};o.addEventType=w;for(var g=1,y=arguments.length;g<y;++g)w(arguments[g]);return o;function w(A,_,O){if(typeof A!="object"){var B;_=_||ha;var H={subscribers:[],fire:O=O||st,subscribe:function(D){H.subscribers.indexOf(D)===-1&&(H.subscribers.push(D),H.fire=_(H.fire,D))},unsubscribe:function(D){H.subscribers=H.subscribers.filter(function(K){return K!==D}),H.fire=H.subscribers.reduce(_,O)}};return h[A]=o[A]=H}x(B=A).forEach(function(D){var K=B[D];if(j(K))w(D,B[D][0],B[D][1]);else{if(K!=="asap")throw new Oe.InvalidArgument("Invalid event config");var R=w(D,ta,function(){for(var q=arguments.length,L=new Array(q);q--;)L[q]=arguments[q];R.subscribers.forEach(function(G){re(function(){G.apply(null,L)})})})}})}}function wa(l,o){return de(o).from({prototype:l}),o}function mr(l,o){return!(l.filter||l.algorithm||l.or)&&(o?l.justLimit:!l.replayFilter)}function fn(l,o){l.filter=ba(l.filter,o)}function ul(l,o,h){var g=l.replayFilter;l.replayFilter=g?function(){return ba(g(),o())}:o,l.justLimit=h&&!g}function ol(l,o){if(l.isPrimKey)return o.primaryKey;var h=o.getIndexByKeyPath(l.index);if(!h)throw new Oe.Schema("KeyPath "+l.index+" on object store "+o.name+" is not indexed");return h}function Ll(l,o,h){var g=ol(l,o.schema);return o.openCursor({trans:h,values:!l.keysOnly,reverse:l.dir==="prev",unique:!!l.unique,query:{index:g,range:l.range}})}function ia(l,o,h,g){var y=l.replayFilter?ba(l.filter,l.replayFilter()):l.filter;if(l.or){var w={},A=function(_,O,B){var H,D;y&&!y(O,B,function(K){return O.stop(K)},function(K){return O.fail(K)})||((D=""+(H=O.primaryKey))=="[object ArrayBuffer]"&&(D=""+new Uint8Array(H)),T(w,D)||(w[D]=!0,o(_,O,B)))};return Promise.all([l.or._iterate(A,h),Ki(Ll(l,g,h),l.algorithm,A,!l.keysOnly&&l.valueMapper)])}return Ki(Ll(l,g,h),ba(l.algorithm,y),o,!l.keysOnly&&l.valueMapper)}function Ki(l,o,h,g){var y=Ie(g?function(w,A,_){return h(g(w),A,_)}:h);return l.then(function(w){if(w)return w.start(function(){var A=function(){return w.continue()};o&&!o(w,function(_){return A=_},function(_){w.stop(_),A=st},function(_){w.fail(_),A=st})||y(w.value,w,function(_){return A=_}),A()})})}var gr=(za.prototype.execute=function(l){var o=this["@@propmod"];if(o.add!==void 0){var h=o.add;if(j(h))return m(m([],j(l)?l:[],!0),h).sort();if(typeof h=="number")return(Number(l)||0)+h;if(typeof h=="bigint")try{return BigInt(l)+h}catch{return BigInt(0)+h}throw new TypeError("Invalid term ".concat(h))}if(o.remove!==void 0){var g=o.remove;if(j(g))return j(l)?l.filter(function(y){return!g.includes(y)}).sort():[];if(typeof g=="number")return Number(l)-g;if(typeof g=="bigint")try{return BigInt(l)-g}catch{return BigInt(0)-g}throw new TypeError("Invalid subtrahend ".concat(g))}return h=(h=o.replacePrefix)===null||h===void 0?void 0:h[0],h&&typeof l=="string"&&l.startsWith(h)?o.replacePrefix[1]+l.substring(h.length):l},za);function za(l){this["@@propmod"]=l}var Co=(lt.prototype._read=function(l,o){var h=this._ctx;return h.error?h.table._trans(null,Ot.bind(null,h.error)):h.table._trans("readonly",l).then(o)},lt.prototype._write=function(l){var o=this._ctx;return o.error?o.table._trans(null,Ot.bind(null,o.error)):o.table._trans("readwrite",l,"locked")},lt.prototype._addAlgorithm=function(l){var o=this._ctx;o.algorithm=ba(o.algorithm,l)},lt.prototype._iterate=function(l,o){return ia(this._ctx,l,o,this._ctx.table.core)},lt.prototype.clone=function(l){var o=Object.create(this.constructor.prototype),h=Object.create(this._ctx);return l&&N(h,l),o._ctx=h,o},lt.prototype.raw=function(){return this._ctx.valueMapper=null,this},lt.prototype.each=function(l){var o=this._ctx;return this._read(function(h){return ia(o,l,h,o.table.core)})},lt.prototype.count=function(l){var o=this;return this._read(function(h){var g=o._ctx,y=g.table.core;if(mr(g,!0))return y.count({trans:h,query:{index:ol(g,y.schema),range:g.range}}).then(function(A){return Math.min(A,g.limit)});var w=0;return ia(g,function(){return++w,!1},h,y).then(function(){return w})}).then(l)},lt.prototype.sortBy=function(l,o){var h=l.split(".").reverse(),g=h[0],y=h.length-1;function w(O,B){return B?w(O[h[B]],B-1):O[g]}var A=this._ctx.dir==="next"?1:-1;function _(O,B){return nt(w(O,y),w(B,y))*A}return this.toArray(function(O){return O.sort(_)}).then(o)},lt.prototype.toArray=function(l){var o=this;return this._read(function(h){var g=o._ctx;if(g.dir==="next"&&mr(g,!0)&&0<g.limit){var y=g.valueMapper,w=ol(g,g.table.core.schema);return g.table.core.query({trans:h,limit:g.limit,values:!0,query:{index:w,range:g.range}}).then(function(_){return _=_.result,y?_.map(y):_})}var A=[];return ia(g,function(_){return A.push(_)},h,g.table.core).then(function(){return A})},l)},lt.prototype.offset=function(l){var o=this._ctx;return l<=0||(o.offset+=l,mr(o)?ul(o,function(){var h=l;return function(g,y){return h===0||(h===1?--h:y(function(){g.advance(h),h=0}),!1)}}):ul(o,function(){var h=l;return function(){return--h<0}})),this},lt.prototype.limit=function(l){return this._ctx.limit=Math.min(this._ctx.limit,l),ul(this._ctx,function(){var o=l;return function(h,g,y){return--o<=0&&g(y),0<=o}},!0),this},lt.prototype.until=function(l,o){return fn(this._ctx,function(h,g,y){return!l(h.value)||(g(y),o)}),this},lt.prototype.first=function(l){return this.limit(1).toArray(function(o){return o[0]}).then(l)},lt.prototype.last=function(l){return this.reverse().first(l)},lt.prototype.filter=function(l){var o;return fn(this._ctx,function(h){return l(h.value)}),(o=this._ctx).isMatch=ba(o.isMatch,l),this},lt.prototype.and=function(l){return this.filter(l)},lt.prototype.or=function(l){return new this.db.WhereClause(this._ctx.table,l,this)},lt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},lt.prototype.desc=function(){return this.reverse()},lt.prototype.eachKey=function(l){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(h,g){l(g.key,g)})},lt.prototype.eachUniqueKey=function(l){return this._ctx.unique="unique",this.eachKey(l)},lt.prototype.eachPrimaryKey=function(l){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(h,g){l(g.primaryKey,g)})},lt.prototype.keys=function(l){var o=this._ctx;o.keysOnly=!o.isMatch;var h=[];return this.each(function(g,y){h.push(y.key)}).then(function(){return h}).then(l)},lt.prototype.primaryKeys=function(l){var o=this._ctx;if(o.dir==="next"&&mr(o,!0)&&0<o.limit)return this._read(function(g){var y=ol(o,o.table.core.schema);return o.table.core.query({trans:g,values:!1,limit:o.limit,query:{index:y,range:o.range}})}).then(function(g){return g.result}).then(l);o.keysOnly=!o.isMatch;var h=[];return this.each(function(g,y){h.push(y.primaryKey)}).then(function(){return h}).then(l)},lt.prototype.uniqueKeys=function(l){return this._ctx.unique="unique",this.keys(l)},lt.prototype.firstKey=function(l){return this.limit(1).keys(function(o){return o[0]}).then(l)},lt.prototype.lastKey=function(l){return this.reverse().firstKey(l)},lt.prototype.distinct=function(){var l=this._ctx,l=l.index&&l.table.schema.idxByName[l.index];if(!l||!l.multi)return this;var o={};return fn(this._ctx,function(y){var g=y.primaryKey.toString(),y=T(o,g);return o[g]=!0,!y}),this},lt.prototype.modify=function(l){var o=this,h=this._ctx;return this._write(function(g){var y,w,A;A=typeof l=="function"?l:(y=x(l),w=y.length,function(X){for(var I=!1,ne=0;ne<w;++ne){var ae=y[ne],ve=l[ae],ke=ue(X,ae);ve instanceof gr?(pe(X,ae,ve.execute(ke)),I=!0):ke!==ve&&(pe(X,ae,ve),I=!0)}return I});var _=h.table.core,D=_.schema.primaryKey,O=D.outbound,B=D.extractKey,H=200,D=o.db._options.modifyChunkSize;D&&(H=typeof D=="object"?D[_.name]||D["*"]||200:D);function K(X,ae){var ne=ae.failures,ae=ae.numFailures;q+=X-ae;for(var ve=0,ke=x(ne);ve<ke.length;ve++){var we=ke[ve];R.push(ne[we])}}var R=[],q=0,L=[],G=l===Gi;return o.clone().primaryKeys().then(function(X){function I(ae){var ve=Math.min(H,X.length-ae),ke=X.slice(ae,ae+ve);return(G?Promise.resolve([]):_.getMany({trans:g,keys:ke,cache:"immutable"})).then(function(we){var Se=[],je=[],Ee=O?[]:null,Ne=G?ke:[];if(!G)for(var qe=0;qe<ve;++qe){var Ze=we[qe],Xe={value:ce(Ze),primKey:X[ae+qe]};A.call(Xe,Xe.value,Xe)!==!1&&(Xe.value==null?Ne.push(X[ae+qe]):O||nt(B(Ze),B(Xe.value))===0?(je.push(Xe.value),O&&Ee.push(X[ae+qe])):(Ne.push(X[ae+qe]),Se.push(Xe.value)))}return Promise.resolve(0<Se.length&&_.mutate({trans:g,type:"add",values:Se}).then(function(jt){for(var Ke in jt.failures)Ne.splice(parseInt(Ke),1);K(Se.length,jt)})).then(function(){return(0<je.length||ne&&typeof l=="object")&&_.mutate({trans:g,type:"put",keys:Ee,values:je,criteria:ne,changeSpec:typeof l!="function"&&l,isAdditionalChunk:0<ae}).then(function(jt){return K(je.length,jt)})}).then(function(){return(0<Ne.length||ne&&G)&&_.mutate({trans:g,type:"delete",keys:Ne,criteria:ne,isAdditionalChunk:0<ae}).then(function(jt){return sl(h.table,Ne,jt)}).then(function(jt){return K(Ne.length,jt)})}).then(function(){return X.length>ae+ve&&I(ae+H)})})}var ne=mr(h)&&h.limit===1/0&&(typeof l!="function"||G)&&{index:h.index,range:h.range};return I(0).then(function(){if(0<R.length)throw new Ye("Error modifying one or more objects",R,q,L);return X.length})})})},lt.prototype.delete=function(){var l=this._ctx,o=l.range;return!mr(l)||l.table.schema.yProps||!l.isPrimKey&&o.type!==3?this.modify(Gi):this._write(function(h){var g=l.table.core.schema.primaryKey,y=o;return l.table.core.count({trans:h,query:{index:g,range:y}}).then(function(w){return l.table.core.mutate({trans:h,type:"deleteRange",range:y}).then(function(O){var _=O.failures,O=O.numFailures;if(O)throw new Ye("Could not delete some values",Object.keys(_).map(function(B){return _[B]}),w-O);return w-O})})})},lt);function lt(){}var Gi=function(l,o){return o.value=null};function $i(l,o){return l<o?-1:l===o?0:1}function _o(l,o){return o<l?-1:l===o?0:1}function wn(l,o,h){return l=l instanceof Ua?new l.Collection(l):l,l._ctx.error=new(h||TypeError)(o),l}function sa(l){return new l.Collection(l,function(){return Ba("")}).limit(0)}function pr(l,o,h,g){var y,w,A,_,O,B,H,D=h.length;if(!h.every(function(q){return typeof q=="string"}))return wn(l,tu);function K(q){y=q==="next"?function(G){return G.toUpperCase()}:function(G){return G.toLowerCase()},w=q==="next"?function(G){return G.toLowerCase()}:function(G){return G.toUpperCase()},A=q==="next"?$i:_o;var L=h.map(function(G){return{lower:w(G),upper:y(G)}}).sort(function(G,X){return A(G.lower,X.lower)});_=L.map(function(G){return G.upper}),O=L.map(function(G){return G.lower}),H=(B=q)==="next"?"":g}K("next"),l=new l.Collection(l,function(){return Pn(_[0],O[D-1]+g)}),l._ondirectionchange=function(q){K(q)};var R=0;return l._addAlgorithm(function(q,L,G){var X=q.key;if(typeof X!="string")return!1;var I=w(X);if(o(I,O,R))return!0;for(var ne=null,ae=R;ae<D;++ae){var ve=(function(ke,we,Se,je,Ee,Ne){for(var qe=Math.min(ke.length,je.length),Ze=-1,Xe=0;Xe<qe;++Xe){var jt=we[Xe];if(jt!==je[Xe])return Ee(ke[Xe],Se[Xe])<0?ke.substr(0,Xe)+Se[Xe]+Se.substr(Xe+1):Ee(ke[Xe],je[Xe])<0?ke.substr(0,Xe)+je[Xe]+Se.substr(Xe+1):0<=Ze?ke.substr(0,Ze)+we[Ze]+Se.substr(Ze+1):null;Ee(ke[Xe],jt)<0&&(Ze=Xe)}return qe<je.length&&Ne==="next"?ke+Se.substr(ke.length):qe<ke.length&&Ne==="prev"?ke.substr(0,Se.length):Ze<0?null:ke.substr(0,Ze)+je[Ze]+Se.substr(Ze+1)})(X,I,_[ae],O[ae],A,B);ve===null&&ne===null?R=ae+1:(ne===null||0<A(ne,ve))&&(ne=ve)}return L(ne!==null?function(){q.continue(ne+H)}:G),!1}),l}function Pn(l,o,h,g){return{type:2,lower:l,upper:o,lowerOpen:h,upperOpen:g}}function Ba(l){return{type:1,lower:l,upper:l}}var Ua=(Object.defineProperty(Yt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Yt.prototype.between=function(l,o,h,g){h=h!==!1,g=g===!0;try{return 0<this._cmp(l,o)||this._cmp(l,o)===0&&(h||g)&&(!h||!g)?sa(this):new this.Collection(this,function(){return Pn(l,o,!h,!g)})}catch{return wn(this,Vn)}},Yt.prototype.equals=function(l){return l==null?wn(this,Vn):new this.Collection(this,function(){return Ba(l)})},Yt.prototype.above=function(l){return l==null?wn(this,Vn):new this.Collection(this,function(){return Pn(l,void 0,!0)})},Yt.prototype.aboveOrEqual=function(l){return l==null?wn(this,Vn):new this.Collection(this,function(){return Pn(l,void 0,!1)})},Yt.prototype.below=function(l){return l==null?wn(this,Vn):new this.Collection(this,function(){return Pn(void 0,l,!1,!0)})},Yt.prototype.belowOrEqual=function(l){return l==null?wn(this,Vn):new this.Collection(this,function(){return Pn(void 0,l)})},Yt.prototype.startsWith=function(l){return typeof l!="string"?wn(this,tu):this.between(l,l+xa,!0,!0)},Yt.prototype.startsWithIgnoreCase=function(l){return l===""?this.startsWith(l):pr(this,function(o,h){return o.indexOf(h[0])===0},[l],xa)},Yt.prototype.equalsIgnoreCase=function(l){return pr(this,function(o,h){return o===h[0]},[l],"")},Yt.prototype.anyOfIgnoreCase=function(){var l=C.apply(Ve,arguments);return l.length===0?sa(this):pr(this,function(o,h){return h.indexOf(o)!==-1},l,"")},Yt.prototype.startsWithAnyOfIgnoreCase=function(){var l=C.apply(Ve,arguments);return l.length===0?sa(this):pr(this,function(o,h){return h.some(function(g){return o.indexOf(g)===0})},l,xa)},Yt.prototype.anyOf=function(){var l=this,o=C.apply(Ve,arguments),h=this._cmp;try{o.sort(h)}catch{return wn(this,Vn)}if(o.length===0)return sa(this);var g=new this.Collection(this,function(){return Pn(o[0],o[o.length-1])});g._ondirectionchange=function(w){h=w==="next"?l._ascending:l._descending,o.sort(h)};var y=0;return g._addAlgorithm(function(w,A,_){for(var O=w.key;0<h(O,o[y]);)if(++y===o.length)return A(_),!1;return h(O,o[y])===0||(A(function(){w.continue(o[y])}),!1)}),g},Yt.prototype.notEqual=function(l){return this.inAnyRange([[-1/0,l],[l,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Yt.prototype.noneOf=function(){var l=C.apply(Ve,arguments);if(l.length===0)return new this.Collection(this);try{l.sort(this._ascending)}catch{return wn(this,Vn)}var o=l.reduce(function(h,g){return h?h.concat([[h[h.length-1][1],g]]):[[-1/0,g]]},null);return o.push([l[l.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},Yt.prototype.inAnyRange=function(X,o){var h=this,g=this._cmp,y=this._ascending,w=this._descending,A=this._min,_=this._max;if(X.length===0)return sa(this);if(!X.every(function(I){return I[0]!==void 0&&I[1]!==void 0&&y(I[0],I[1])<=0}))return wn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Oe.InvalidArgument);var O=!o||o.includeLowers!==!1,B=o&&o.includeUppers===!0,H,D=y;function K(I,ne){return D(I[0],ne[0])}try{(H=X.reduce(function(I,ne){for(var ae=0,ve=I.length;ae<ve;++ae){var ke=I[ae];if(g(ne[0],ke[1])<0&&0<g(ne[1],ke[0])){ke[0]=A(ke[0],ne[0]),ke[1]=_(ke[1],ne[1]);break}}return ae===ve&&I.push(ne),I},[])).sort(K)}catch{return wn(this,Vn)}var R=0,q=B?function(I){return 0<y(I,H[R][1])}:function(I){return 0<=y(I,H[R][1])},L=O?function(I){return 0<w(I,H[R][0])}:function(I){return 0<=w(I,H[R][0])},G=q,X=new this.Collection(this,function(){return Pn(H[0][0],H[H.length-1][1],!O,!B)});return X._ondirectionchange=function(I){D=I==="next"?(G=q,y):(G=L,w),H.sort(K)},X._addAlgorithm(function(I,ne,ae){for(var ve,ke=I.key;G(ke);)if(++R===H.length)return ne(ae),!1;return!q(ve=ke)&&!L(ve)||(h._cmp(ke,H[R][1])===0||h._cmp(ke,H[R][0])===0||ne(function(){D===y?I.continue(H[R][0]):I.continue(H[R][1])}),!1)}),X},Yt.prototype.startsWithAnyOf=function(){var l=C.apply(Ve,arguments);return l.every(function(o){return typeof o=="string"})?l.length===0?sa(this):this.inAnyRange(l.map(function(o){return[o,o+xa]})):wn(this,"startsWithAnyOf() only works with strings")},Yt);function Yt(){}function En(l){return Ie(function(o){return yr(o),l(o.target.error),!1})}function yr(l){l.stopPropagation&&l.stopPropagation(),l.preventDefault&&l.preventDefault()}var ua="storagemutated",Rn="x-storagemutated-1",Fn=hr(null,ua),cl=(Jt.prototype._lock=function(){return Y(!ze.global),++this._reculock,this._reculock!==1||ze.global||(ze.lockOwnerFor=this),this},Jt.prototype._unlock=function(){if(Y(!ze.global),--this._reculock==0)for(ze.global||(ze.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var l=this._blockedFuncs.shift();try{pa(l[1],l[0])}catch{}}return this},Jt.prototype._locked=function(){return this._reculock&&ze.lockOwnerFor!==this},Jt.prototype.create=function(l){var o=this;if(!this.mode)return this;var h=this.db.idbdb,g=this.db._state.dbOpenError;if(Y(!this.idbtrans),!l&&!h)switch(g&&g.name){case"DatabaseClosedError":throw new Oe.DatabaseClosed(g);case"MissingAPIError":throw new Oe.MissingAPI(g.message,g);default:throw new Oe.OpenFailed(g)}if(!this.active)throw new Oe.TransactionInactive;return Y(this._completion._state===null),(l=this.idbtrans=l||(this.db.core||h).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ie(function(y){yr(y),o._reject(l.error)}),l.onabort=Ie(function(y){yr(y),o.active&&o._reject(new Oe.Abort(l.error)),o.active=!1,o.on("abort").fire(y)}),l.oncomplete=Ie(function(){o.active=!1,o._resolve(),"mutatedParts"in l&&Fn.storagemutated.fire(l.mutatedParts)}),this},Jt.prototype._promise=function(l,o,h){var g=this;if(l==="readwrite"&&this.mode!=="readwrite")return Ot(new Oe.ReadOnly("Transaction is readonly"));if(!this.active)return Ot(new Oe.TransactionInactive);if(this._locked())return new Te(function(w,A){g._blockedFuncs.push([function(){g._promise(l,o,h).then(w,A)},ze])});if(h)return Qn(function(){var w=new Te(function(A,_){g._lock();var O=o(A,_,g);O&&O.then&&O.then(A,_)});return w.finally(function(){return g._unlock()}),w._lib=!0,w});var y=new Te(function(w,A){var _=o(w,A,g);_&&_.then&&_.then(w,A)});return y._lib=!0,y},Jt.prototype._root=function(){return this.parent?this.parent._root():this},Jt.prototype.waitFor=function(l){var o,h=this._root(),g=Te.resolve(l);h._waitingFor?h._waitingFor=h._waitingFor.then(function(){return g}):(h._waitingFor=g,h._waitingQueue=[],o=h.idbtrans.objectStore(h.storeNames[0]),(function w(){for(++h._spinCount;h._waitingQueue.length;)h._waitingQueue.shift()();h._waitingFor&&(o.get(-1/0).onsuccess=w)})());var y=h._waitingFor;return new Te(function(w,A){g.then(function(_){return h._waitingQueue.push(Ie(w.bind(null,_)))},function(_){return h._waitingQueue.push(Ie(A.bind(null,_)))}).finally(function(){h._waitingFor===y&&(h._waitingFor=null)})})},Jt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Oe.Abort))},Jt.prototype.table=function(l){var o=this._memoizedTables||(this._memoizedTables={});if(T(o,l))return o[l];var h=this.schema[l];if(!h)throw new Oe.NotFound("Table "+l+" not part of transaction");return h=new this.db.Table(l,h,this),h.core=this.db.core.table(l),o[l]=h},Jt);function Jt(){}function dl(l,o,h,g,y,w,A,_){return{name:l,keyPath:o,unique:h,multi:g,auto:y,compound:w,src:(h&&!A?"&":"")+(g?"*":"")+(y?"++":"")+fl(o),type:_}}function fl(l){return typeof l=="string"?l:l?"["+[].join.call(l,"+")+"]":""}function Hl(l,o,h){return{name:l,primKey:o,indexes:h,mappedClass:null,idxByName:(g=function(y){return[y.name,y]},h.reduce(function(y,w,A){return A=g(w,A),A&&(y[A[0]]=A[1]),y},{}))};var g}var Sa=function(l){try{return l.only([[]]),Sa=function(){return[[]]},[[]]}catch{return Sa=function(){return xa},xa}};function vr(l){return l==null?function(){}:typeof l=="string"?(o=l).split(".").length===1?function(h){return h[o]}:function(h){return ue(h,o)}:function(h){return ue(h,l)};var o}function Xi(l){return[].slice.call(l)}var hn=0;function zn(l){return l==null?":id":typeof l=="string"?l:"[".concat(l.join("+"),"]")}function Yl(l,o,O){function g(G){if(G.type===3)return null;if(G.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var R=G.lower,q=G.upper,L=G.lowerOpen,G=G.upperOpen;return R===void 0?q===void 0?null:o.upperBound(q,!!G):q===void 0?o.lowerBound(R,!!L):o.bound(R,q,!!L,!!G)}function y(K){var R,q=K.name;return{name:q,schema:K,mutate:function(L){var G=L.trans,X=L.type,I=L.keys,ne=L.values,ae=L.range;return new Promise(function(ve,ke){ve=Ie(ve);var we=G.objectStore(q),Se=we.keyPath==null,je=X==="put"||X==="add";if(!je&&X!=="delete"&&X!=="deleteRange")throw new Error("Invalid operation type: "+X);var Ee,Ne=(I||ne||{length:1}).length;if(I&&ne&&I.length!==ne.length)throw new Error("Given keys array must have same length as given values array.");if(Ne===0)return ve({numFailures:0,failures:{},results:[],lastResult:void 0});function qe(Qt){++jt,yr(Qt)}var Ze=[],Xe=[],jt=0;if(X==="deleteRange"){if(ae.type===4)return ve({numFailures:jt,failures:Xe,results:[],lastResult:void 0});ae.type===3?Ze.push(Ee=we.clear()):Ze.push(Ee=we.delete(g(ae)))}else{var Se=je?Se?[ne,I]:[ne,null]:[I,null],Ke=Se[0],Xt=Se[1];if(je)for(var Rt=0;Rt<Ne;++Rt)Ze.push(Ee=Xt&&Xt[Rt]!==void 0?we[X](Ke[Rt],Xt[Rt]):we[X](Ke[Rt])),Ee.onerror=qe;else for(Rt=0;Rt<Ne;++Rt)Ze.push(Ee=we[X](Ke[Rt])),Ee.onerror=qe}function xl(Qt){Qt=Qt.target.result,Ze.forEach(function(Tn,ss){return Tn.error!=null&&(Xe[ss]=Tn.error)}),ve({numFailures:jt,failures:Xe,results:X==="delete"?I:Ze.map(function(Tn){return Tn.result}),lastResult:Qt})}Ee.onerror=function(Qt){qe(Qt),xl(Qt)},Ee.onsuccess=xl})},getMany:function(L){var G=L.trans,X=L.keys;return new Promise(function(I,ne){I=Ie(I);for(var ae,ve=G.objectStore(q),ke=X.length,we=new Array(ke),Se=0,je=0,Ee=function(Ze){Ze=Ze.target,we[Ze._pos]=Ze.result,++je===Se&&I(we)},Ne=En(ne),qe=0;qe<ke;++qe)X[qe]!=null&&((ae=ve.get(X[qe]))._pos=qe,ae.onsuccess=Ee,ae.onerror=Ne,++Se);Se===0&&I(we)})},get:function(L){var G=L.trans,X=L.key;return new Promise(function(I,ne){I=Ie(I);var ae=G.objectStore(q).get(X);ae.onsuccess=function(ve){return I(ve.target.result)},ae.onerror=En(ne)})},query:(R=B,function(L){return new Promise(function(G,X){G=Ie(G);var I,ne,ae,Se=L.trans,ve=L.values,ke=L.limit,Ee=L.query,we=ke===1/0?void 0:ke,je=Ee.index,Ee=Ee.range,Se=Se.objectStore(q),je=je.isPrimaryKey?Se:Se.index(je.name),Ee=g(Ee);if(ke===0)return G({result:[]});R?((we=ve?je.getAll(Ee,we):je.getAllKeys(Ee,we)).onsuccess=function(Ne){return G({result:Ne.target.result})},we.onerror=En(X)):(I=0,ne=!ve&&"openKeyCursor"in je?je.openKeyCursor(Ee):je.openCursor(Ee),ae=[],ne.onsuccess=function(Ne){var qe=ne.result;return qe?(ae.push(ve?qe.value:qe.primaryKey),++I===ke?G({result:ae}):void qe.continue()):G({result:ae})},ne.onerror=En(X))})}),openCursor:function(L){var G=L.trans,X=L.values,I=L.query,ne=L.reverse,ae=L.unique;return new Promise(function(ve,ke){ve=Ie(ve);var je=I.index,we=I.range,Se=G.objectStore(q),Se=je.isPrimaryKey?Se:Se.index(je.name),je=ne?ae?"prevunique":"prev":ae?"nextunique":"next",Ee=!X&&"openKeyCursor"in Se?Se.openKeyCursor(g(we),je):Se.openCursor(g(we),je);Ee.onerror=En(ke),Ee.onsuccess=Ie(function(Ne){var qe,Ze,Xe,jt,Ke=Ee.result;Ke?(Ke.___id=++hn,Ke.done=!1,qe=Ke.continue.bind(Ke),Ze=(Ze=Ke.continuePrimaryKey)&&Ze.bind(Ke),Xe=Ke.advance.bind(Ke),jt=function(){throw new Error("Cursor not stopped")},Ke.trans=G,Ke.stop=Ke.continue=Ke.continuePrimaryKey=Ke.advance=function(){throw new Error("Cursor not started")},Ke.fail=Ie(ke),Ke.next=function(){var Xt=this,Rt=1;return this.start(function(){return Rt--?Xt.continue():Xt.stop()}).then(function(){return Xt})},Ke.start=function(Xt){function Rt(){if(Ee.result)try{Xt()}catch(Qt){Ke.fail(Qt)}else Ke.done=!0,Ke.start=function(){throw new Error("Cursor behind last entry")},Ke.stop()}var xl=new Promise(function(Qt,Tn){Qt=Ie(Qt),Ee.onerror=En(Tn),Ke.fail=Tn,Ke.stop=function(ss){Ke.stop=Ke.continue=Ke.continuePrimaryKey=Ke.advance=jt,Qt(ss)}});return Ee.onsuccess=Ie(function(Qt){Ee.onsuccess=Rt,Rt()}),Ke.continue=qe,Ke.continuePrimaryKey=Ze,Ke.advance=Xe,Rt(),xl},ve(Ke)):ve(null)},ke)})},count:function(L){var G=L.query,X=L.trans,I=G.index,ne=G.range;return new Promise(function(ae,ve){var ke=X.objectStore(q),we=I.isPrimaryKey?ke:ke.index(I.name),ke=g(ne),we=ke?we.count(ke):we.count();we.onsuccess=Ie(function(Se){return ae(Se.target.result)}),we.onerror=En(ve)})}}}var w,A,_,H=(A=O,_=Xi((w=l).objectStoreNames),{schema:{name:w.name,tables:_.map(function(K){return A.objectStore(K)}).map(function(K){var R=K.keyPath,G=K.autoIncrement,q=j(R),L={},G={name:K.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:R==null,compound:q,keyPath:R,autoIncrement:G,unique:!0,extractKey:vr(R)},indexes:Xi(K.indexNames).map(function(X){return K.index(X)}).map(function(ae){var I=ae.name,ne=ae.unique,ve=ae.multiEntry,ae=ae.keyPath,ve={name:I,compound:j(ae),keyPath:ae,unique:ne,multiEntry:ve,extractKey:vr(ae)};return L[zn(ae)]=ve}),getIndexByKeyPath:function(X){return L[zn(X)]}};return L[":id"]=G.primaryKey,R!=null&&(L[zn(R)]=G.primaryKey),G})},hasGetAll:0<_.length&&"getAll"in A.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),O=H.schema,B=H.hasGetAll,H=O.tables.map(y),D={};return H.forEach(function(K){return D[K.name]=K}),{stack:"dbcore",transaction:l.transaction.bind(l),table:function(K){if(!D[K])throw new Error("Table '".concat(K,"' not found"));return D[K]},MIN_KEY:-1/0,MAX_KEY:Sa(o),schema:O}}function hl(l,o,h,g){var y=h.IDBKeyRange;return h.indexedDB,{dbcore:(g=Yl(o,y,g),l.dbcore.reduce(function(w,A){return A=A.create,c(c({},w),A(w))},g))}}function Kl(l,g){var h=g.db,g=hl(l._middlewares,h,l._deps,g);l.core=g.dbcore,l.tables.forEach(function(y){var w=y.name;l.core.schema.tables.some(function(A){return A.name===w})&&(y.core=l.core.table(w),l[w]instanceof l.Table&&(l[w].core=y.core))})}function xr(l,o,h,g){h.forEach(function(y){var w=g[y];o.forEach(function(A){var _=(function O(B,H){return fe(B,H)||(B=b(B))&&O(B,H)})(A,y);(!_||"value"in _&&_.value===void 0)&&(A===l.Transaction.prototype||A instanceof l.Transaction?V(A,y,{get:function(){return this.table(y)},set:function(O){ee(this,y,{value:O,writable:!0,configurable:!0,enumerable:!0})}}):A[y]=new l.Table(y,w))})})}function ml(l,o){o.forEach(function(h){for(var g in h)h[g]instanceof l.Table&&delete h[g]})}function gl(l,o){return l._cfg.version-o._cfg.version}function Gl(l,o,h,g){var y=l._dbSchema;h.objectStoreNames.contains("$meta")&&!y.$meta&&(y.$meta=Hl("$meta",lu("")[0],[]),l._storeNames.push("$meta"));var w=l._createTransaction("readwrite",l._storeNames,y);w.create(h),w._completion.catch(g);var A=w._reject.bind(w),_=ze.transless||ze;Qn(function(){return ze.trans=w,ze.transless=_,o!==0?(Kl(l,h),B=o,((O=w).storeNames.includes("$meta")?O.table("$meta").get("version").then(function(H){return H??B}):Te.resolve(B)).then(function(H){return K=H,R=w,q=h,L=[],H=(D=l)._versions,G=D._dbSchema=$l(0,D.idbdb,q),(H=H.filter(function(X){return X._cfg.version>=K})).length!==0?(H.forEach(function(X){L.push(function(){var I=G,ne=X._cfg.dbschema;Xl(D,I,q),Xl(D,ne,q),G=D._dbSchema=ne;var ae=Qi(I,ne);ae.add.forEach(function(je){Vi(q,je[0],je[1].primKey,je[1].indexes)}),ae.change.forEach(function(je){if(je.recreate)throw new Oe.Upgrade("Not yet support for changing primary key");var Ee=q.objectStore(je.name);je.add.forEach(function(Ne){return br(Ee,Ne)}),je.change.forEach(function(Ne){Ee.deleteIndex(Ne.name),br(Ee,Ne)}),je.del.forEach(function(Ne){return Ee.deleteIndex(Ne)})});var ve=X._cfg.contentUpgrade;if(ve&&X._cfg.version>K){Kl(D,q),R._memoizedTables={};var ke=_e(ne);ae.del.forEach(function(je){ke[je]=I[je]}),ml(D,[D.Transaction.prototype]),xr(D,[D.Transaction.prototype],x(ke),ke),R.schema=ke;var we,Se=te(ve);return Se&&Mn(),ae=Te.follow(function(){var je;(we=ve(R))&&Se&&(je=xn.bind(null,null),we.then(je,je))}),we&&typeof we.then=="function"?Te.resolve(we):ae.then(function(){return we})}}),L.push(function(I){var ne,ae,ve=X._cfg.dbschema;ne=ve,ae=I,[].slice.call(ae.db.objectStoreNames).forEach(function(ke){return ne[ke]==null&&ae.db.deleteObjectStore(ke)}),ml(D,[D.Transaction.prototype]),xr(D,[D.Transaction.prototype],D._storeNames,D._dbSchema),R.schema=D._dbSchema}),L.push(function(I){D.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(D.idbdb.version/10)===X._cfg.version?(D.idbdb.deleteObjectStore("$meta"),delete D._dbSchema.$meta,D._storeNames=D._storeNames.filter(function(ne){return ne!=="$meta"})):I.objectStore("$meta").put(X._cfg.version,"version"))})}),(function X(){return L.length?Te.resolve(L.shift()(R.idbtrans)).then(X):Te.resolve()})().then(function(){ru(G,q)})):Te.resolve();var D,K,R,q,L,G}).catch(A)):(x(y).forEach(function(H){Vi(h,H,y[H].primKey,y[H].indexes)}),Kl(l,h),void Te.follow(function(){return l.on.populate.fire(w)}).catch(A));var O,B})}function au(l,o){ru(l._dbSchema,o),o.db.version%10!=0||o.objectStoreNames.contains("$meta")||o.db.createObjectStore("$meta").add(Math.ceil(o.db.version/10-1),"version");var h=$l(0,l.idbdb,o);Xl(l,l._dbSchema,o);for(var g=0,y=Qi(h,l._dbSchema).change;g<y.length;g++){var w=(function(A){if(A.change.length||A.recreate)return console.warn("Unable to patch indexes of table ".concat(A.name," because it has changes on the type of index or primary key.")),{value:void 0};var _=o.objectStore(A.name);A.add.forEach(function(O){Dt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(A.name,".").concat(O.src)),br(_,O)})})(y[g]);if(typeof w=="object")return w.value}}function Qi(l,o){var h,g={del:[],add:[],change:[]};for(h in l)o[h]||g.del.push(h);for(h in o){var y=l[h],w=o[h];if(y){var A={name:h,def:w,recreate:!1,del:[],add:[],change:[]};if(""+(y.primKey.keyPath||"")!=""+(w.primKey.keyPath||"")||y.primKey.auto!==w.primKey.auto)A.recreate=!0,g.change.push(A);else{var _=y.idxByName,O=w.idxByName,B=void 0;for(B in _)O[B]||A.del.push(B);for(B in O){var H=_[B],D=O[B];H?H.src!==D.src&&A.change.push(D):A.add.push(D)}(0<A.del.length||0<A.add.length||0<A.change.length)&&g.change.push(A)}}else g.add.push([h,w])}return g}function Vi(l,o,h,g){var y=l.db.createObjectStore(o,h.keyPath?{keyPath:h.keyPath,autoIncrement:h.auto}:{autoIncrement:h.auto});return g.forEach(function(w){return br(y,w)}),y}function ru(l,o){x(l).forEach(function(h){o.db.objectStoreNames.contains(h)||(Dt&&console.debug("Dexie: Creating missing table",h),Vi(o,h,l[h].primKey,l[h].indexes))})}function br(l,o){l.createIndex(o.name,o.keyPath,{unique:o.unique,multiEntry:o.multi})}function $l(l,o,h){var g={};return se(o.objectStoreNames,0).forEach(function(y){for(var w=h.objectStore(y),A=dl(fl(B=w.keyPath),B||"",!0,!1,!!w.autoIncrement,B&&typeof B!="string",!0),_=[],O=0;O<w.indexNames.length;++O){var H=w.index(w.indexNames[O]),B=H.keyPath,H=dl(H.name,B,!!H.unique,!!H.multiEntry,!1,B&&typeof B!="string",!1);_.push(H)}g[y]=Hl(y,A,_)}),g}function Xl(l,o,h){for(var g=h.db.objectStoreNames,y=0;y<g.length;++y){var w=g[y],A=h.objectStore(w);l._hasGetAll="getAll"in A;for(var _=0;_<A.indexNames.length;++_){var O=A.indexNames[_],B=A.index(O).keyPath,H=typeof B=="string"?B:"["+se(B).join("+")+"]";!o[w]||(B=o[w].idxByName[H])&&(B.name=O,delete o[w].idxByName[H],o[w].idxByName[O]=B)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&p.WorkerGlobalScope&&p instanceof p.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(l._hasGetAll=!1)}function lu(l){return l.split(",").map(function(o,h){var w=o.split(":"),g=(y=w[1])===null||y===void 0?void 0:y.trim(),y=(o=w[0].trim()).replace(/([&*]|\+\+)/g,""),w=/^\[/.test(y)?y.match(/^\[(.*)\]$/)[1].split("+"):y;return dl(y,w||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),j(w),h===0,g)})}var Do=(wr.prototype._createTableSchema=Hl,wr.prototype._parseIndexSyntax=lu,wr.prototype._parseStoresSpec=function(l,o){var h=this;x(l).forEach(function(g){if(l[g]!==null){var y=h._parseIndexSyntax(l[g]),w=y.shift();if(!w)throw new Oe.Schema("Invalid schema for table "+g+": "+l[g]);if(w.unique=!0,w.multi)throw new Oe.Schema("Primary key cannot be multiEntry*");y.forEach(function(A){if(A.auto)throw new Oe.Schema("Only primary key can be marked as autoIncrement (++)");if(!A.keyPath)throw new Oe.Schema("Index must have a name and cannot be an empty string")}),y=h._createTableSchema(g,w,y),o[g]=y}})},wr.prototype.stores=function(h){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?N(this._cfg.storesSource,h):h;var h=o._versions,g={},y={};return h.forEach(function(w){N(g,w._cfg.storesSource),y=w._cfg.dbschema={},w._parseStoresSpec(g,y)}),o._dbSchema=y,ml(o,[o._allTables,o,o.Transaction.prototype]),xr(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],x(y),y),o._storeNames=x(y),this},wr.prototype.upgrade=function(l){return this._cfg.contentUpgrade=Nt(this._cfg.contentUpgrade||st,l),this},wr);function wr(){}function Ql(l,o){var h=l._dbNamesDB;return h||(h=l._dbNamesDB=new Bn(Oa,{addons:[],indexedDB:l,IDBKeyRange:o})).version(1).stores({dbnames:"name"}),h.table("dbnames")}function Pi(l){return l&&typeof l.databases=="function"}function Fi(l){return Qn(function(){return ze.letThrough=!0,l()})}function Zi(l){return!("from"in l)}var en=function(l,o){if(!this){var h=new en;return l&&"d"in l&&N(h,l),h}N(this,arguments.length?{d:1,from:l,to:1<arguments.length?o:l}:{d:0})};function qa(l,o,h){var g=nt(o,h);if(!isNaN(g)){if(0<g)throw RangeError();if(Zi(l))return N(l,{from:o,to:h,d:1});var y=l.l,g=l.r;if(nt(h,l.from)<0)return y?qa(y,o,h):l.l={from:o,to:h,d:1,l:null,r:null},Ji(l);if(0<nt(o,l.to))return g?qa(g,o,h):l.r={from:o,to:h,d:1,l:null,r:null},Ji(l);nt(o,l.from)<0&&(l.from=o,l.l=null,l.d=g?g.d+1:1),0<nt(h,l.to)&&(l.to=h,l.r=null,l.d=l.l?l.l.d+1:1),h=!l.r,y&&!l.l&&pl(l,y),g&&h&&pl(l,g)}}function pl(l,o){Zi(o)||(function h(g,O){var w=O.from,A=O.to,_=O.l,O=O.r;qa(g,w,A),_&&h(g,_),O&&h(g,O)})(l,o)}function iu(l,o){var h=Vl(o),g=h.next();if(g.done)return!1;for(var y=g.value,w=Vl(l),A=w.next(y.from),_=A.value;!g.done&&!A.done;){if(nt(_.from,y.to)<=0&&0<=nt(_.to,y.from))return!0;nt(y.from,_.from)<0?y=(g=h.next(_.from)).value:_=(A=w.next(y.from)).value}return!1}function Vl(l){var o=Zi(l)?null:{s:0,n:l};return{next:function(h){for(var g=0<arguments.length;o;)switch(o.s){case 0:if(o.s=1,g)for(;o.n.l&&nt(h,o.n.from)<0;)o={up:o,n:o.n.l,s:1};else for(;o.n.l;)o={up:o,n:o.n.l,s:1};case 1:if(o.s=2,!g||nt(h,o.n.to)<=0)return{value:o.n,done:!1};case 2:if(o.n.r){o.s=3,o={up:o,n:o.n.r,s:0};continue}case 3:o=o.up}return{done:!0}}}}function Ji(l){var o,h,g=(((o=l.r)===null||o===void 0?void 0:o.d)||0)-(((h=l.l)===null||h===void 0?void 0:h.d)||0),y=1<g?"r":g<-1?"l":"";y&&(o=y=="r"?"l":"r",h=c({},l),g=l[y],l.from=g.from,l.to=g.to,l[y]=g[y],h[y]=g[o],(l[o]=h).d=su(h)),l.d=su(l)}function su(h){var o=h.r,h=h.l;return(o?h?Math.max(o.d,h.d):o.d:h?h.d:0)+1}function Pl(l,o){return x(o).forEach(function(h){l[h]?pl(l[h],o[h]):l[h]=(function g(y){var w,A,_={};for(w in y)T(y,w)&&(A=y[w],_[w]=!A||typeof A!="object"||Ae.has(A.constructor)?A:g(A));return _})(o[h])}),l}function Wi(l,o){return l.all||o.all||Object.keys(l).some(function(h){return o[h]&&iu(o[h],l[h])})}Q(en.prototype,((Sn={add:function(l){return pl(this,l),this},addKey:function(l){return qa(this,l,l),this},addKeys:function(l){var o=this;return l.forEach(function(h){return qa(o,h,h)}),this},hasKey:function(l){var o=Vl(this).next(l).value;return o&&nt(o.from,l)<=0&&0<=nt(o.to,l)}})[Z]=function(){return Vl(this)},Sn));var La={},Ii={},es=!1;function Fl(l){Pl(Ii,l),es||(es=!0,setTimeout(function(){es=!1,ts(Ii,!(Ii={}))},0))}function ts(l,o){o===void 0&&(o=!1);var h=new Set;if(l.all)for(var g=0,y=Object.values(La);g<y.length;g++)uu(A=y[g],l,h,o);else for(var w in l){var A,_=/^idb\:\/\/(.*)\/(.*)\//.exec(w);_&&(w=_[1],_=_[2],(A=La["idb://".concat(w,"/").concat(_)])&&uu(A,l,h,o))}h.forEach(function(O){return O()})}function uu(l,o,h,g){for(var y=[],w=0,A=Object.entries(l.queries.query);w<A.length;w++){for(var _=A[w],O=_[0],B=[],H=0,D=_[1];H<D.length;H++){var K=D[H];Wi(o,K.obsSet)?K.subscribers.forEach(function(G){return h.add(G)}):g&&B.push(K)}g&&y.push([O,B])}if(g)for(var R=0,q=y;R<q.length;R++){var L=q[R],O=L[0],B=L[1];l.queries.query[O]=B}}function ns(l){var o=l._state,h=l._deps.indexedDB;if(o.isBeingOpened||l.idbdb)return o.dbReadyPromise.then(function(){return o.dbOpenError?Ot(o.dbOpenError):l});o.isBeingOpened=!0,o.dbOpenError=null,o.openComplete=!1;var g=o.openCanceller,y=Math.round(10*l.verno),w=!1;function A(){if(o.openCanceller!==g)throw new Oe.DatabaseClosed("db.open() was cancelled")}function _(){return new Te(function(K,R){if(A(),!h)throw new Oe.MissingAPI;var q=l.name,L=o.autoSchema||!y?h.open(q):h.open(q,y);if(!L)throw new Oe.MissingAPI;L.onerror=En(R),L.onblocked=Ie(l._fireOnBlocked),L.onupgradeneeded=Ie(function(G){var X;H=L.transaction,o.autoSchema&&!l._options.allowEmptyDB?(L.onerror=yr,H.abort(),L.result.close(),(X=h.deleteDatabase(q)).onsuccess=X.onerror=Ie(function(){R(new Oe.NoSuchDatabase("Database ".concat(q," doesnt exist")))})):(H.onerror=En(R),G=G.oldVersion>Math.pow(2,62)?0:G.oldVersion,D=G<1,l.idbdb=L.result,w&&au(l,H),Gl(l,G/10,H,R))},R),L.onsuccess=Ie(function(){H=null;var G,X,I,ne,ae,ve=l.idbdb=L.result,ke=se(ve.objectStoreNames);if(0<ke.length)try{var we=ve.transaction((ne=ke).length===1?ne[0]:ne,"readonly");if(o.autoSchema)X=ve,I=we,(G=l).verno=X.version/10,I=G._dbSchema=$l(0,X,I),G._storeNames=se(X.objectStoreNames,0),xr(G,[G._allTables],x(I),I);else if(Xl(l,l._dbSchema,we),((ae=Qi($l(0,(ae=l).idbdb,we),ae._dbSchema)).add.length||ae.change.some(function(Se){return Se.add.length||Se.change.length}))&&!w)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ve.close(),y=ve.version+1,w=!0,K(_());Kl(l,we)}catch{}la.push(l),ve.onversionchange=Ie(function(Se){o.vcFired=!0,l.on("versionchange").fire(Se)}),ve.onclose=Ie(function(Se){l.on("close").fire(Se)}),D&&(ae=l._deps,we=q,ve=ae.indexedDB,ae=ae.IDBKeyRange,Pi(ve)||we===Oa||Ql(ve,ae).put({name:we}).catch(st)),K()},R)}).catch(function(K){switch(K?.name){case"UnknownError":if(0<o.PR1398_maxLoop)return o.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),_();break;case"VersionError":if(0<y)return y=0,_()}return Te.reject(K)})}var O,B=o.dbReadyResolve,H=null,D=!1;return Te.race([g,(typeof navigator>"u"?Te.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(K){function R(){return indexedDB.databases().finally(K)}O=setInterval(R,100),R()}).finally(function(){return clearInterval(O)}):Promise.resolve()).then(_)]).then(function(){return A(),o.onReadyBeingFired=[],Te.resolve(Fi(function(){return l.on.ready.fire(l.vip)})).then(function K(){if(0<o.onReadyBeingFired.length){var R=o.onReadyBeingFired.reduce(Nt,st);return o.onReadyBeingFired=[],Te.resolve(Fi(function(){return R(l.vip)})).then(K)}})}).finally(function(){o.openCanceller===g&&(o.onReadyBeingFired=null,o.isBeingOpened=!1)}).catch(function(K){o.dbOpenError=K;try{H&&H.abort()}catch{}return g===o.openCanceller&&l._close(),Ot(K)}).finally(function(){o.openComplete=!0,B()}).then(function(){var K;return D&&(K={},l.tables.forEach(function(R){R.schema.indexes.forEach(function(q){q.name&&(K["idb://".concat(l.name,"/").concat(R.name,"/").concat(q.name)]=new en(-1/0,[[[]]]))}),K["idb://".concat(l.name,"/").concat(R.name,"/")]=K["idb://".concat(l.name,"/").concat(R.name,"/:dels")]=new en(-1/0,[[[]]])}),Fn(ua).fire(K),ts(K,!0)),l})}function Ha(l){function o(w){return l.next(w)}var h=y(o),g=y(function(w){return l.throw(w)});function y(w){return function(O){var _=w(O),O=_.value;return _.done?O:O&&typeof O.then=="function"?O.then(h,g):j(O)?Promise.all(O).then(h,g):h(O)}}return y(o)()}function Zl(l,o,h){for(var g=j(l)?l.slice():[l],y=0;y<h;++y)g.push(o);return g}var ou={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(l){return c(c({},l),{table:function(o){var h=l.table(o),g=h.schema,y={},w=[];function A(D,K,R){var q=zn(D),L=y[q]=y[q]||[],G=D==null?0:typeof D=="string"?1:D.length,X=0<K,X=c(c({},R),{name:X?"".concat(q,"(virtual-from:").concat(R.name,")"):R.name,lowLevelIndex:R,isVirtual:X,keyTail:K,keyLength:G,extractKey:vr(D),unique:!X&&R.unique});return L.push(X),X.isPrimaryKey||w.push(X),1<G&&A(G===2?D[0]:D.slice(0,G-1),K+1,R),L.sort(function(I,ne){return I.keyTail-ne.keyTail}),X}o=A(g.primaryKey.keyPath,0,g.primaryKey),y[":id"]=[o];for(var _=0,O=g.indexes;_<O.length;_++){var B=O[_];A(B.keyPath,0,B)}function H(D){var K,R=D.query.index;return R.isVirtual?c(c({},D),{query:{index:R.lowLevelIndex,range:(K=D.query.range,R=R.keyTail,{type:K.type===1?2:K.type,lower:Zl(K.lower,K.lowerOpen?l.MAX_KEY:l.MIN_KEY,R),lowerOpen:!0,upper:Zl(K.upper,K.upperOpen?l.MIN_KEY:l.MAX_KEY,R),upperOpen:!0})}}):D}return c(c({},h),{schema:c(c({},g),{primaryKey:o,indexes:w,getIndexByKeyPath:function(D){return(D=y[zn(D)])&&D[0]}}),count:function(D){return h.count(H(D))},query:function(D){return h.query(H(D))},openCursor:function(D){var K=D.query.index,R=K.keyTail,q=K.isVirtual,L=K.keyLength;return q?h.openCursor(H(D)).then(function(X){return X&&G(X)}):h.openCursor(D);function G(X){return Object.create(X,{continue:{value:function(I){I!=null?X.continue(Zl(I,D.reverse?l.MAX_KEY:l.MIN_KEY,R)):D.unique?X.continue(X.key.slice(0,L).concat(D.reverse?l.MIN_KEY:l.MAX_KEY,R)):X.continue()}},continuePrimaryKey:{value:function(I,ne){X.continuePrimaryKey(Zl(I,l.MAX_KEY,R),ne)}},primaryKey:{get:function(){return X.primaryKey}},key:{get:function(){var I=X.key;return L===1?I[0]:I.slice(0,L)}},value:{get:function(){return X.value}}})}}})}})}};function Jl(l,o,h,g){return h=h||{},g=g||"",x(l).forEach(function(y){var w,A,_;T(o,y)?(w=l[y],A=o[y],typeof w=="object"&&typeof A=="object"&&w&&A?(_=Pe(w))!==Pe(A)?h[g+y]=o[y]:_==="Object"?Jl(w,A,h,g+y+"."):w!==A&&(h[g+y]=o[y]):w!==A&&(h[g+y]=o[y])):h[g+y]=void 0}),x(o).forEach(function(y){T(l,y)||(h[g+y]=o[y])}),h}function Wl(l,o){return o.type==="delete"?o.keys:o.keys||o.values.map(l.extractKey)}var cu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(l){return c(c({},l),{table:function(o){var h=l.table(o),g=h.schema.primaryKey;return c(c({},h),{mutate:function(y){var w=ze.trans,A=w.table(o).hook,_=A.deleting,O=A.creating,B=A.updating;switch(y.type){case"add":if(O.fire===st)break;return w._promise("readwrite",function(){return H(y)},!0);case"put":if(O.fire===st&&B.fire===st)break;return w._promise("readwrite",function(){return H(y)},!0);case"delete":if(_.fire===st)break;return w._promise("readwrite",function(){return H(y)},!0);case"deleteRange":if(_.fire===st)break;return w._promise("readwrite",function(){return(function D(K,R,q){return h.query({trans:K,values:!1,query:{index:g,range:R},limit:q}).then(function(L){var G=L.result;return H({type:"delete",keys:G,trans:K}).then(function(X){return 0<X.numFailures?Promise.reject(X.failures[0]):G.length<q?{failures:[],numFailures:0,lastResult:void 0}:D(K,c(c({},R),{lower:G[G.length-1],lowerOpen:!0}),q)})})})(y.trans,y.range,1e4)},!0)}return h.mutate(y);function H(D){var K,R,q,L=ze.trans,G=D.keys||Wl(g,D);if(!G)throw new Error("Keys missing");return(D=D.type==="add"||D.type==="put"?c(c({},D),{keys:G}):c({},D)).type!=="delete"&&(D.values=m([],D.values)),D.keys&&(D.keys=m([],D.keys)),K=h,q=G,((R=D).type==="add"?Promise.resolve([]):K.getMany({trans:R.trans,keys:q,cache:"immutable"})).then(function(X){var I=G.map(function(ne,ae){var ve,ke,we,Se=X[ae],je={onerror:null,onsuccess:null};return D.type==="delete"?_.fire.call(je,ne,Se,L):D.type==="add"||Se===void 0?(ve=O.fire.call(je,ne,D.values[ae],L),ne==null&&ve!=null&&(D.keys[ae]=ne=ve,g.outbound||pe(D.values[ae],g.keyPath,ne))):(ve=Jl(Se,D.values[ae]),(ke=B.fire.call(je,ve,ne,Se,L))&&(we=D.values[ae],Object.keys(ke).forEach(function(Ee){T(we,Ee)?we[Ee]=ke[Ee]:pe(we,Ee,ke[Ee])}))),je});return h.mutate(D).then(function(ne){for(var ae=ne.failures,ve=ne.results,ke=ne.numFailures,ne=ne.lastResult,we=0;we<G.length;++we){var Se=(ve||G)[we],je=I[we];Se==null?je.onerror&&je.onerror(ae[we]):je.onsuccess&&je.onsuccess(D.type==="put"&&X[we]?D.values[we]:Se)}return{failures:ae,results:ve,numFailures:ke,lastResult:ne}}).catch(function(ne){return I.forEach(function(ae){return ae.onerror&&ae.onerror(ne)}),Promise.reject(ne)})})}}})}})}};function as(l,o,h){try{if(!o||o.keys.length<l.length)return null;for(var g=[],y=0,w=0;y<o.keys.length&&w<l.length;++y)nt(o.keys[y],l[w])===0&&(g.push(h?ce(o.values[y]):o.values[y]),++w);return g.length===l.length?g:null}catch{return null}}var Sr={stack:"dbcore",level:-1,create:function(l){return{table:function(o){var h=l.table(o);return c(c({},h),{getMany:function(g){if(!g.cache)return h.getMany(g);var y=as(g.keys,g.trans._cache,g.cache==="clone");return y?Te.resolve(y):h.getMany(g).then(function(w){return g.trans._cache={keys:g.keys,values:g.cache==="clone"?ce(w):w},w})},mutate:function(g){return g.type!=="add"&&(g.trans._cache=null),h.mutate(g)}})}}}};function du(l,o){return l.trans.mode==="readonly"&&!!l.subscr&&!l.trans.explicit&&l.trans.db._options.cache!=="disabled"&&!o.schema.primaryKey.outbound}function fu(l,o){switch(l){case"query":return o.values&&!o.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Mo={stack:"dbcore",level:0,name:"Observability",create:function(l){var o=l.schema.name,h=new en(l.MIN_KEY,l.MAX_KEY);return c(c({},l),{transaction:function(g,y,w){if(ze.subscr&&y!=="readonly")throw new Oe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ze.querier));return l.transaction(g,y,w)},table:function(g){var y=l.table(g),w=y.schema,A=w.primaryKey,D=w.indexes,_=A.extractKey,O=A.outbound,B=A.autoIncrement&&D.filter(function(R){return R.compound&&R.keyPath.includes(A.keyPath)}),H=c(c({},y),{mutate:function(R){function q(Ee){return Ee="idb://".concat(o,"/").concat(g,"/").concat(Ee),ne[Ee]||(ne[Ee]=new en)}var L,G,X,I=R.trans,ne=R.mutatedParts||(R.mutatedParts={}),ae=q(""),ve=q(":dels"),ke=R.type,je=R.type==="deleteRange"?[R.range]:R.type==="delete"?[R.keys]:R.values.length<50?[Wl(A,R).filter(function(Ee){return Ee}),R.values]:[],we=je[0],Se=je[1],je=R.trans._cache;return j(we)?(ae.addKeys(we),(je=ke==="delete"||we.length===Se.length?as(we,je):null)||ve.addKeys(we),(je||Se)&&(L=q,G=je,X=Se,w.indexes.forEach(function(Ee){var Ne=L(Ee.name||"");function qe(Xe){return Xe!=null?Ee.extractKey(Xe):null}function Ze(Xe){return Ee.multiEntry&&j(Xe)?Xe.forEach(function(jt){return Ne.addKey(jt)}):Ne.addKey(Xe)}(G||X).forEach(function(Xe,Xt){var Ke=G&&qe(G[Xt]),Xt=X&&qe(X[Xt]);nt(Ke,Xt)!==0&&(Ke!=null&&Ze(Ke),Xt!=null&&Ze(Xt))})}))):we?(Se={from:(Se=we.lower)!==null&&Se!==void 0?Se:l.MIN_KEY,to:(Se=we.upper)!==null&&Se!==void 0?Se:l.MAX_KEY},ve.add(Se),ae.add(Se)):(ae.add(h),ve.add(h),w.indexes.forEach(function(Ee){return q(Ee.name).add(h)})),y.mutate(R).then(function(Ee){return!we||R.type!=="add"&&R.type!=="put"||(ae.addKeys(Ee.results),B&&B.forEach(function(Ne){for(var qe=R.values.map(function(Ke){return Ne.extractKey(Ke)}),Ze=Ne.keyPath.findIndex(function(Ke){return Ke===A.keyPath}),Xe=0,jt=Ee.results.length;Xe<jt;++Xe)qe[Xe][Ze]=Ee.results[Xe];q(Ne.name).addKeys(qe)})),I.mutatedParts=Pl(I.mutatedParts||{},ne),Ee})}}),D=function(q){var L=q.query,q=L.index,L=L.range;return[q,new en((q=L.lower)!==null&&q!==void 0?q:l.MIN_KEY,(L=L.upper)!==null&&L!==void 0?L:l.MAX_KEY)]},K={get:function(R){return[A,new en(R.key)]},getMany:function(R){return[A,new en().addKeys(R.keys)]},count:D,query:D,openCursor:D};return x(K).forEach(function(R){H[R]=function(q){var L=ze.subscr,G=!!L,X=du(ze,y)&&fu(R,q)?q.obsSet={}:L;if(G){var I=function(Se){return Se="idb://".concat(o,"/").concat(g,"/").concat(Se),X[Se]||(X[Se]=new en)},ne=I(""),ae=I(":dels"),L=K[R](q),G=L[0],L=L[1];if((R==="query"&&G.isPrimaryKey&&!q.values?ae:I(G.name||"")).add(L),!G.isPrimaryKey){if(R!=="count"){var ve=R==="query"&&O&&q.values&&y.query(c(c({},q),{values:!1}));return y[R].apply(this,arguments).then(function(Se){if(R==="query"){if(O&&q.values)return ve.then(function(qe){return qe=qe.result,ne.addKeys(qe),Se});var je=q.values?Se.result.map(_):Se.result;(q.values?ne:ae).addKeys(je)}else if(R==="openCursor"){var Ee=Se,Ne=q.values;return Ee&&Object.create(Ee,{key:{get:function(){return ae.addKey(Ee.primaryKey),Ee.key}},primaryKey:{get:function(){var qe=Ee.primaryKey;return ae.addKey(qe),qe}},value:{get:function(){return Ne&&ne.addKey(Ee.primaryKey),Ee.value}}})}return Se})}ae.add(h)}}return y[R].apply(this,arguments)}}),H}})}};function rs(l,o,h){if(h.numFailures===0)return o;if(o.type==="deleteRange")return null;var g=o.keys?o.keys.length:"values"in o&&o.values?o.values.length:1;return h.numFailures===g?null:(o=c({},o),j(o.keys)&&(o.keys=o.keys.filter(function(y,w){return!(w in h.failures)})),"values"in o&&j(o.values)&&(o.values=o.values.filter(function(y,w){return!(w in h.failures)})),o)}function Il(l,o){return h=l,((g=o).lower===void 0||(g.lowerOpen?0<nt(h,g.lower):0<=nt(h,g.lower)))&&(l=l,(o=o).upper===void 0||(o.upperOpen?nt(l,o.upper)<0:nt(l,o.upper)<=0));var h,g}function jr(l,o,K,g,y,w){if(!K||K.length===0)return l;var A=o.query.index,_=A.multiEntry,O=o.query.range,B=g.schema.primaryKey.extractKey,H=A.extractKey,D=(A.lowLevelIndex||A).extractKey,K=K.reduce(function(R,q){var L=R,G=[];if(q.type==="add"||q.type==="put")for(var X=new en,I=q.values.length-1;0<=I;--I){var ne,ae=q.values[I],ve=B(ae);X.hasKey(ve)||(ne=H(ae),(_&&j(ne)?ne.some(function(Ee){return Il(Ee,O)}):Il(ne,O))&&(X.addKey(ve),G.push(ae)))}switch(q.type){case"add":var ke=new en().addKeys(o.values?R.map(function(Ne){return B(Ne)}):R),L=R.concat(o.values?G.filter(function(Ne){return Ne=B(Ne),!ke.hasKey(Ne)&&(ke.addKey(Ne),!0)}):G.map(function(Ne){return B(Ne)}).filter(function(Ne){return!ke.hasKey(Ne)&&(ke.addKey(Ne),!0)}));break;case"put":var we=new en().addKeys(q.values.map(function(Ne){return B(Ne)}));L=R.filter(function(Ne){return!we.hasKey(o.values?B(Ne):Ne)}).concat(o.values?G:G.map(function(Ne){return B(Ne)}));break;case"delete":var Se=new en().addKeys(q.keys);L=R.filter(function(Ne){return!Se.hasKey(o.values?B(Ne):Ne)});break;case"deleteRange":var je=q.range;L=R.filter(function(Ne){return!Il(B(Ne),je)})}return L},l);return K===l?l:(K.sort(function(R,q){return nt(D(R),D(q))||nt(B(R),B(q))}),o.limit&&o.limit<1/0&&(K.length>o.limit?K.length=o.limit:l.length===o.limit&&K.length<o.limit&&(y.dirty=!0)),w?Object.freeze(K):K)}function kr(l,o){return nt(l.lower,o.lower)===0&&nt(l.upper,o.upper)===0&&!!l.lowerOpen==!!o.lowerOpen&&!!l.upperOpen==!!o.upperOpen}function Oo(l,o){return(function(h,g,y,w){if(h===void 0)return g!==void 0?-1:0;if(g===void 0)return 1;if((g=nt(h,g))===0){if(y&&w)return 0;if(y)return 1;if(w)return-1}return g})(l.lower,o.lower,l.lowerOpen,o.lowerOpen)<=0&&0<=(function(h,g,y,w){if(h===void 0)return g!==void 0?1:0;if(g===void 0)return-1;if((g=nt(h,g))===0){if(y&&w)return 0;if(y)return-1;if(w)return 1}return g})(l.upper,o.upper,l.upperOpen,o.upperOpen)}function ei(l,o,h,g){l.subscribers.add(h),g.addEventListener("abort",function(){var y,w;l.subscribers.delete(h),l.subscribers.size===0&&(y=l,w=o,setTimeout(function(){y.subscribers.size===0&&Me(w,y)},3e3))})}var hu={stack:"dbcore",level:0,name:"Cache",create:function(l){var o=l.schema.name;return c(c({},l),{transaction:function(h,g,y){var w,A,_=l.transaction(h,g,y);return g==="readwrite"&&(A=(w=new AbortController).signal,y=function(O){return function(){if(w.abort(),g==="readwrite"){for(var B=new Set,H=0,D=h;H<D.length;H++){var K=D[H],R=La["idb://".concat(o,"/").concat(K)];if(R){var q=l.table(K),L=R.optimisticOps.filter(function(Ne){return Ne.trans===_});if(_._explicit&&O&&_.mutatedParts)for(var G=0,X=Object.values(R.queries.query);G<X.length;G++)for(var I=0,ne=(ke=X[G]).slice();I<ne.length;I++)Wi((we=ne[I]).obsSet,_.mutatedParts)&&(Me(ke,we),we.subscribers.forEach(function(Ne){return B.add(Ne)}));else if(0<L.length){R.optimisticOps=R.optimisticOps.filter(function(Ne){return Ne.trans!==_});for(var ae=0,ve=Object.values(R.queries.query);ae<ve.length;ae++)for(var ke,we,Se,je=0,Ee=(ke=ve[ae]).slice();je<Ee.length;je++)(we=Ee[je]).res!=null&&_.mutatedParts&&(O&&!we.dirty?(Se=Object.isFrozen(we.res),Se=jr(we.res,we.req,L,q,we,Se),we.dirty?(Me(ke,we),we.subscribers.forEach(function(Ne){return B.add(Ne)})):Se!==we.res&&(we.res=Se,we.promise=Te.resolve({result:Se}))):(we.dirty&&Me(ke,we),we.subscribers.forEach(function(Ne){return B.add(Ne)})))}}}B.forEach(function(Ne){return Ne()})}}},_.addEventListener("abort",y(!1),{signal:A}),_.addEventListener("error",y(!1),{signal:A}),_.addEventListener("complete",y(!0),{signal:A})),_},table:function(h){var g=l.table(h),y=g.schema.primaryKey;return c(c({},g),{mutate:function(w){var A=ze.trans;if(y.outbound||A.db._options.cache==="disabled"||A.explicit||A.idbtrans.mode!=="readwrite")return g.mutate(w);var _=La["idb://".concat(o,"/").concat(h)];return _?(A=g.mutate(w),w.type!=="add"&&w.type!=="put"||!(50<=w.values.length||Wl(y,w).some(function(O){return O==null}))?(_.optimisticOps.push(w),w.mutatedParts&&Fl(w.mutatedParts),A.then(function(O){0<O.numFailures&&(Me(_.optimisticOps,w),(O=rs(0,w,O))&&_.optimisticOps.push(O),w.mutatedParts&&Fl(w.mutatedParts))}),A.catch(function(){Me(_.optimisticOps,w),w.mutatedParts&&Fl(w.mutatedParts)})):A.then(function(O){var B=rs(0,c(c({},w),{values:w.values.map(function(H,D){var K;return O.failures[D]?H:(H=(K=y.keyPath)!==null&&K!==void 0&&K.includes(".")?ce(H):c({},H),pe(H,y.keyPath,O.results[D]),H)})}),O);_.optimisticOps.push(B),queueMicrotask(function(){return w.mutatedParts&&Fl(w.mutatedParts)})}),A):g.mutate(w)},query:function(w){if(!du(ze,g)||!fu("query",w))return g.query(w);var A=((B=ze.trans)===null||B===void 0?void 0:B.db._options.cache)==="immutable",D=ze,_=D.requery,O=D.signal,B=(function(q,L,G,X){var I=La["idb://".concat(q,"/").concat(L)];if(!I)return[];if(!(L=I.queries[G]))return[null,!1,I,null];var ne=L[(X.query?X.query.index.name:null)||""];if(!ne)return[null,!1,I,null];switch(G){case"query":var ae=ne.find(function(ve){return ve.req.limit===X.limit&&ve.req.values===X.values&&kr(ve.req.query.range,X.query.range)});return ae?[ae,!0,I,ne]:[ne.find(function(ve){return("limit"in ve.req?ve.req.limit:1/0)>=X.limit&&(!X.values||ve.req.values)&&Oo(ve.req.query.range,X.query.range)}),!1,I,ne];case"count":return ae=ne.find(function(ve){return kr(ve.req.query.range,X.query.range)}),[ae,!!ae,I,ne]}})(o,h,"query",w),H=B[0],D=B[1],K=B[2],R=B[3];return H&&D?H.obsSet=w.obsSet:(D=g.query(w).then(function(q){var L=q.result;if(H&&(H.res=L),A){for(var G=0,X=L.length;G<X;++G)Object.freeze(L[G]);Object.freeze(L)}else q.result=ce(L);return q}).catch(function(q){return R&&H&&Me(R,H),Promise.reject(q)}),H={obsSet:w.obsSet,promise:D,subscribers:new Set,type:"query",req:w,dirty:!1},R?R.push(H):(R=[H],(K=K||(La["idb://".concat(o,"/").concat(h)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[w.query.index.name||""]=R)),ei(H,R,_,O),H.promise.then(function(q){return{result:jr(q.result,w,K?.optimisticOps,g,H,A)}})}})}})}};function yl(l,o){return new Proxy(l,{get:function(h,g,y){return g==="db"?o:Reflect.get(h,g,y)}})}var Bn=(Ct.prototype.version=function(l){if(isNaN(l)||l<.1)throw new Oe.Type("Given version is not a positive number");if(l=Math.round(10*l)/10,this.idbdb||this._state.isBeingOpened)throw new Oe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,l);var o=this._versions,h=o.filter(function(g){return g._cfg.version===l})[0];return h||(h=new this.Version(l),o.push(h),o.sort(gl),h.stores({}),this._state.autoSchema=!1,h)},Ct.prototype._whenReady=function(l){var o=this;return this.idbdb&&(this._state.openComplete||ze.letThrough||this._vip)?l():new Te(function(h,g){if(o._state.openComplete)return g(new Oe.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return void g(new Oe.DatabaseClosed);o.open().catch(st)}o._state.dbReadyPromise.then(h,g)}).then(l)},Ct.prototype.use=function(l){var o=l.stack,h=l.create,g=l.level,y=l.name;return y&&this.unuse({stack:o,name:y}),l=this._middlewares[o]||(this._middlewares[o]=[]),l.push({stack:o,create:h,level:g??10,name:y}),l.sort(function(w,A){return w.level-A.level}),this},Ct.prototype.unuse=function(l){var o=l.stack,h=l.name,g=l.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(y){return g?y.create!==g:!!h&&y.name!==h})),this},Ct.prototype.open=function(){var l=this;return pa(dn,function(){return ns(l)})},Ct.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var l=this._state,o=la.indexOf(this);if(0<=o&&la.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}l.isBeingOpened||(l.dbReadyPromise=new Te(function(h){l.dbReadyResolve=h}),l.openCanceller=new Te(function(h,g){l.cancelOpen=g}))},Ct.prototype.close=function(h){var o=(h===void 0?{disableAutoOpen:!0}:h).disableAutoOpen,h=this._state;o?(h.isBeingOpened&&h.cancelOpen(new Oe.DatabaseClosed),this._close(),h.autoOpen=!1,h.dbOpenError=new Oe.DatabaseClosed):(this._close(),h.autoOpen=this._options.autoOpen||h.isBeingOpened,h.openComplete=!1,h.dbOpenError=null)},Ct.prototype.delete=function(l){var o=this;l===void 0&&(l={disableAutoOpen:!0});var h=0<arguments.length&&typeof arguments[0]!="object",g=this._state;return new Te(function(y,w){function A(){o.close(l);var _=o._deps.indexedDB.deleteDatabase(o.name);_.onsuccess=Ie(function(){var O,B,H;O=o._deps,B=o.name,H=O.indexedDB,O=O.IDBKeyRange,Pi(H)||B===Oa||Ql(H,O).delete(B).catch(st),y()}),_.onerror=En(w),_.onblocked=o._fireOnBlocked}if(h)throw new Oe.InvalidArgument("Invalid closeOptions argument to db.delete()");g.isBeingOpened?g.dbReadyPromise.then(A):A()})},Ct.prototype.backendDB=function(){return this.idbdb},Ct.prototype.isOpen=function(){return this.idbdb!==null},Ct.prototype.hasBeenClosed=function(){var l=this._state.dbOpenError;return l&&l.name==="DatabaseClosed"},Ct.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ct.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ct.prototype,"tables",{get:function(){var l=this;return x(this._allTables).map(function(o){return l._allTables[o]})},enumerable:!1,configurable:!0}),Ct.prototype.transaction=function(){var l=(function(o,h,g){var y=arguments.length;if(y<2)throw new Oe.InvalidArgument("Too few arguments");for(var w=new Array(y-1);--y;)w[y-1]=arguments[y];return g=w.pop(),[o,me(w),g]}).apply(this,arguments);return this._transaction.apply(this,l)},Ct.prototype._transaction=function(l,o,h){var g=this,y=ze.trans;y&&y.db===this&&l.indexOf("!")===-1||(y=null);var w,A,_=l.indexOf("?")!==-1;l=l.replace("!","").replace("?","");try{if(A=o.map(function(B){if(B=B instanceof g.Table?B.name:B,typeof B!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return B}),l=="r"||l===On)w=On;else{if(l!="rw"&&l!=il)throw new Oe.InvalidArgument("Invalid transaction mode: "+l);w=il}if(y){if(y.mode===On&&w===il){if(!_)throw new Oe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");y=null}y&&A.forEach(function(B){if(y&&y.storeNames.indexOf(B)===-1){if(!_)throw new Oe.SubTransaction("Table "+B+" not included in parent transaction.");y=null}}),_&&y&&!y.active&&(y=null)}}catch(B){return y?y._promise(null,function(H,D){D(B)}):Ot(B)}var O=(function B(H,D,K,R,q){return Te.resolve().then(function(){var L=ze.transless||ze,G=H._createTransaction(D,K,H._dbSchema,R);if(G.explicit=!0,L={trans:G,transless:L},R)G.idbtrans=R.idbtrans;else try{G.create(),G.idbtrans._explicit=!0,H._state.PR1398_maxLoop=3}catch(ne){return ne.name===Zt.InvalidState&&H.isOpen()&&0<--H._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),H.close({disableAutoOpen:!1}),H.open().then(function(){return B(H,D,K,null,q)})):Ot(ne)}var X,I=te(q);return I&&Mn(),L=Te.follow(function(){var ne;(X=q.call(G,G))&&(I?(ne=xn.bind(null,null),X.then(ne,ne)):typeof X.next=="function"&&typeof X.throw=="function"&&(X=Ha(X)))},L),(X&&typeof X.then=="function"?Te.resolve(X).then(function(ne){return G.active?ne:Ot(new Oe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):L.then(function(){return X})).then(function(ne){return R&&G._resolve(),G._completion.then(function(){return ne})}).catch(function(ne){return G._reject(ne),Ot(ne)})})}).bind(null,this,w,A,y,h);return y?y._promise(w,O,"lock"):ze.trans?pa(ze.transless,function(){return g._whenReady(O)}):this._whenReady(O)},Ct.prototype.table=function(l){if(!T(this._allTables,l))throw new Oe.InvalidTable("Table ".concat(l," does not exist"));return this._allTables[l]},Ct);function Ct(l,o){var h=this;this._middlewares={},this.verno=0;var g=Ct.dependencies;this._options=o=c({addons:Ct.addons,autoOpen:!0,indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},g=o.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var y,w,A,_,O,B={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:st,dbReadyPromise:null,cancelOpen:st,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};B.dbReadyPromise=new Te(function(D){B.dbReadyResolve=D}),B.openCanceller=new Te(function(D,K){B.cancelOpen=K}),this._state=B,this.name=l,this.on=hr(this,"populate","blocked","versionchange","close",{ready:[Nt,st]}),this.once=function(D,K){var R=function(){for(var q=[],L=0;L<arguments.length;L++)q[L]=arguments[L];h.on(D).unsubscribe(R),K.apply(h,q)};return h.on(D,R)},this.on.ready.subscribe=U(this.on.ready.subscribe,function(D){return function(K,R){Ct.vip(function(){var q,L=h._state;L.openComplete?(L.dbOpenError||Te.resolve().then(K),R&&D(K)):L.onReadyBeingFired?(L.onReadyBeingFired.push(K),R&&D(K)):(D(K),q=h,R||D(function G(){q.on.ready.unsubscribe(K),q.on.ready.unsubscribe(G)}))})}}),this.Collection=(y=this,wa(Co.prototype,function(X,G){this.db=y;var R=Ra,q=null;if(G)try{R=G()}catch(I){q=I}var L=X._ctx,G=L.table,X=G.hook.reading.fire;this._ctx={table:G,index:L.index,isPrimKey:!L.index||G.schema.primKey.keyPath&&L.index===G.schema.primKey.name,range:R,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:q,or:L.or,valueMapper:X!==ta?X:null}})),this.Table=(w=this,wa(nu.prototype,function(D,K,R){this.db=w,this._tx=R,this.name=D,this.schema=K,this.hook=w._allTables[D]?w._allTables[D].hook:hr(null,{creating:[be,st],reading:[_a,ta],updating:[pn,st],deleting:[Fe,st]})})),this.Transaction=(A=this,wa(cl.prototype,function(D,K,R,q,L){var G=this;D!=="readonly"&&K.forEach(function(X){X=(X=R[X])===null||X===void 0?void 0:X.yProps,X&&(K=K.concat(X.map(function(I){return I.updatesTable})))}),this.db=A,this.mode=D,this.storeNames=K,this.schema=R,this.chromeTransactionDurability=q,this.idbtrans=null,this.on=hr(this,"complete","error","abort"),this.parent=L||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Te(function(X,I){G._resolve=X,G._reject=I}),this._completion.then(function(){G.active=!1,G.on.complete.fire()},function(X){var I=G.active;return G.active=!1,G.on.error.fire(X),G.parent?G.parent._reject(X):I&&G.idbtrans&&G.idbtrans.abort(),Ot(X)})})),this.Version=(_=this,wa(Do.prototype,function(D){this.db=_,this._cfg={version:D,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(O=this,wa(Ua.prototype,function(D,K,R){if(this.db=O,this._ctx={table:D,index:K===":id"?null:K,or:R},this._cmp=this._ascending=nt,this._descending=function(q,L){return nt(L,q)},this._max=function(q,L){return 0<nt(q,L)?q:L},this._min=function(q,L){return nt(q,L)<0?q:L},this._IDBKeyRange=O._deps.IDBKeyRange,!this._IDBKeyRange)throw new Oe.MissingAPI})),this.on("versionchange",function(D){0<D.newVersion?console.warn("Another connection wants to upgrade database '".concat(h.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(h.name,"'. Closing db now to resume the delete request.")),h.close({disableAutoOpen:!1})}),this.on("blocked",function(D){!D.newVersion||D.newVersion<D.oldVersion?console.warn("Dexie.delete('".concat(h.name,"') was blocked")):console.warn("Upgrade '".concat(h.name,"' blocked by other connection holding version ").concat(D.oldVersion/10))}),this._maxKey=Sa(o.IDBKeyRange),this._createTransaction=function(D,K,R,q){return new h.Transaction(D,K,R,h._options.chromeTransactionDurability,q)},this._fireOnBlocked=function(D){h.on("blocked").fire(D),la.filter(function(K){return K.name===h.name&&K!==h&&!K._state.vcFired}).map(function(K){return K.on("versionchange").fire(D)})},this.use(Sr),this.use(hu),this.use(Mo),this.use(ou),this.use(cu);var H=new Proxy(this,{get:function(D,K,R){if(K==="_vip")return!0;if(K==="table")return function(L){return yl(h.table(L),H)};var q=Reflect.get(D,K,R);return q instanceof nu?yl(q,H):K==="tables"?q.map(function(L){return yl(L,H)}):K==="_createTransaction"?function(){return yl(q.apply(this,arguments),H)}:q}});this.vip=H,g.forEach(function(D){return D(h)})}var vl,Sn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",mu=(ls.prototype.subscribe=function(l,o,h){return this._subscribe(l&&typeof l!="function"?l:{next:l,error:o,complete:h})},ls.prototype[Sn]=function(){return this},ls);function ls(l){this._subscribe=l}try{vl={indexedDB:p.indexedDB||p.mozIndexedDB||p.webkitIndexedDB||p.msIndexedDB,IDBKeyRange:p.IDBKeyRange||p.webkitIDBKeyRange}}catch{vl={indexedDB:null,IDBKeyRange:null}}function gu(l){var o,h=!1,g=new mu(function(y){var w=te(l),A,_=!1,O={},B={},H={get closed(){return _},unsubscribe:function(){_||(_=!0,A&&A.abort(),D&&Fn.storagemutated.unsubscribe(R))}};y.start&&y.start(H);var D=!1,K=function(){return va(q)},R=function(L){Pl(O,L),Wi(B,O)&&K()},q=function(){var L,G,X;!_&&vl.indexedDB&&(O={},L={},A&&A.abort(),A=new AbortController,X=(function(I){var ne=Ma();try{w&&Mn();var ae=Qn(l,I);return ae=w?ae.finally(xn):ae}finally{ne&&cr()}})(G={subscr:L,signal:A.signal,requery:K,querier:l,trans:null}),Promise.resolve(X).then(function(I){h=!0,o=I,_||G.signal.aborted||(O={},(function(ne){for(var ae in ne)if(T(ne,ae))return;return 1})(B=L)||D||(Fn(ua,R),D=!0),va(function(){return!_&&y.next&&y.next(I)}))},function(I){h=!1,["DatabaseClosedError","AbortError"].includes(I?.name)||_||va(function(){_||y.error&&y.error(I)})}))};return setTimeout(K,0),H});return g.hasValue=function(){return h},g.getValue=function(){return o},g}var Ya=Bn;function is(l){var o=Ut;try{Ut=!0,Fn.storagemutated.fire(l),ts(l,!0)}finally{Ut=o}}Q(Ya,c(c({},Gn),{delete:function(l){return new Ya(l,{addons:[]}).delete()},exists:function(l){return new Ya(l,{addons:[]}).open().then(function(o){return o.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(l){try{return o=Ya.dependencies,h=o.indexedDB,o=o.IDBKeyRange,(Pi(h)?Promise.resolve(h.databases()).then(function(g){return g.map(function(y){return y.name}).filter(function(y){return y!==Oa})}):Ql(h,o).toCollection().primaryKeys()).then(l)}catch{return Ot(new Oe.MissingAPI)}var o,h},defineClass:function(){return function(l){N(this,l)}},ignoreTransaction:function(l){return ze.trans?pa(ze.transless,l):l()},vip:Fi,async:function(l){return function(){try{var o=Ha(l.apply(this,arguments));return o&&typeof o.then=="function"?o:Te.resolve(o)}catch(h){return Ot(h)}}},spawn:function(l,o,h){try{var g=Ha(l.apply(h,o||[]));return g&&typeof g.then=="function"?g:Te.resolve(g)}catch(y){return Ot(y)}},currentTransaction:{get:function(){return ze.trans||null}},waitFor:function(l,o){return o=Te.resolve(typeof l=="function"?Ya.ignoreTransaction(l):l).timeout(o||6e4),ze.trans?ze.trans.waitFor(o):o},Promise:Te,debug:{get:function(){return Dt},set:function(l){yn(l)}},derive:de,extend:N,props:Q,override:U,Events:hr,on:Fn,liveQuery:gu,extendObservabilitySet:Pl,getByKeyPath:ue,setByKeyPath:pe,delByKeyPath:function(l,o){typeof o=="string"?pe(l,o,void 0):"length"in o&&[].map.call(o,function(h){pe(l,h,void 0)})},shallowClone:_e,deepClone:ce,getObjectDiff:Jl,cmp:nt,asap:re,minKey:-1/0,addons:[],connections:la,errnames:Zt,dependencies:vl,cache:La,semVer:"4.2.0",version:"4.2.0".split(".").map(function(l){return parseInt(l)}).reduce(function(l,o,h){return l+o/Math.pow(10,2*h)})})),Ya.maxKey=Sa(Ya.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Fn(ua,function(l){Ut||(l=new CustomEvent(Rn,{detail:l}),Ut=!0,dispatchEvent(l),Ut=!1)}),addEventListener(Rn,function(l){l=l.detail,Ut||is(l)}));var Nr,Ut=!1,Er=function(){};return typeof BroadcastChannel<"u"&&((Er=function(){(Nr=new BroadcastChannel(Rn)).onmessage=function(l){return l.data&&is(l.data)}})(),typeof Nr.unref=="function"&&Nr.unref(),Fn(ua,function(l){Ut||Nr.postMessage(l)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(l){if(!Bn.disableBfCache&&l.persisted){Dt&&console.debug("Dexie: handling persisted pagehide"),Nr?.close();for(var o=0,h=la;o<h.length;o++)h[o].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(l){!Bn.disableBfCache&&l.persisted&&(Dt&&console.debug("Dexie: handling persisted pageshow"),Er(),is({all:new en(-1/0,[[]])}))})),Te.rejectionMapper=function(l,o){return!l||l instanceof ye||l instanceof TypeError||l instanceof SyntaxError||!l.name||!fa[l.name]?l:(o=new fa[l.name](o||l.message,l),"stack"in l&&V(o,"stack",{get:function(){return this.inner.stack}}),o)},yn(Dt),c(Bn,Object.freeze({__proto__:null,Dexie:Bn,liveQuery:gu,Entity:ql,cmp:nt,PropModification:gr,replacePrefix:function(l,o){return new gr({replacePrefix:[l,o]})},add:function(l){return new gr({add:l})},remove:function(l){return new gr({remove:l})},default:Bn,RangeSet:en,mergeRanges:pl,rangesOverlap:iu}),{default:Bn}),Bn})})(bo)),bo.exports}var Xy=$y();const Cd=ug(Xy),Pm=Symbol.for("Dexie"),Ti=globalThis[Pm]||(globalThis[Pm]=Cd);if(Cd.semVer!==Ti.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Cd.semVer} and ${Ti.semVer}`);const{liveQuery:Ob,mergeRanges:Rb,rangesOverlap:zb,RangeSet:Bb,cmp:Ub,Entity:qb,PropModification:Lb,replacePrefix:Hb,add:Yb,remove:Kb,DexieYProvider:Gb}=Ti;function Ai(r){if(!r)return"";if(r.startsWith("doi:")||r.includes("doi.org")){const u=r.match(/(?:doi:|doi\.org\/)(.+)/);if(u)return`doi:${u[1]}`}if(r.includes("arxiv.org")){const u=r.match(/arxiv\.org\/(?:abs|pdf)\/([^/?\s]+)/);if(u)return`arXiv:${u[1]}`}if(r.includes("overleaf.com"))return r.match(/overleaf\.com\/project\/([^/?\s]+)/)?"Overleaf Project":"Overleaf";if(r.includes("github.com")){const u=r.match(/github\.com\/([^/\s?]+)\/([^/\s?]+)(?:\/([^?\s]+))?/);if(u){const[,d,c,m]=u;return m&&!m.startsWith("?")?`${d}/${c}/${m.split("/")[0]}`:`${d}/${c}`}}try{const u=new URL(r.startsWith("http")?r:`https://${r}`),d=u.hostname.replace(/^www\./,""),c=u.pathname.replace(/\/$/,"");if(c&&c!=="/"){const m=c.split("/")[1];return`${d}/${m}`}return d}catch{return r.length>50?`${r.substring(0,47)}...`:r}}function Qy(r){return r.startsWith("doi:")?`https://doi.org/${r.replace("doi:","")}`:!r.startsWith("http://")&&!r.startsWith("https://")?`https://${r}`:r}function Vy(r){return r?r.startsWith("doi:")||r.includes("doi.org")?"doi":r.includes("arxiv.org")?"arxiv":r.includes("github.com")?"github":r.includes("overleaf.com")?"overleaf":r.includes("zotero.org")||r.startsWith("zotero://")?"zotero":r.startsWith("file://")||r.startsWith("/")||r.match(/^[A-Za-z]:\\/)?"local":"url":"url"}function Py(r,u){if(!r)throw new Error("URL is required");const d=Vy(r),c=Ai(r);return{id:crypto.randomUUID(),type:d,url:r.trim(),title:c||void 0,description:void 0,addedAt:Date.now()}}function _d(r){return r.title||Ai(r.url)}function Tg(r){return Qy(r.url)}function Fy(r){if(r.type==="local")return r.url.startsWith("file://")||r.url.startsWith("/");try{return new URL(Tg(r)),!0}catch{return!1}}function Zy(r){switch(r){case"doi":return"article";case"arxiv":return"science";case"github":return"code";case"overleaf":return"edit";case"zotero":return"bookmark";case"local":return"folder";case"url":default:return"link"}}function Jy(r){switch(r){case"doi":return"DOI";case"arxiv":return"arXiv";case"github":return"GitHub";case"overleaf":return"Overleaf";case"zotero":return"Zotero";case"local":return"Local File";case"url":default:return"Website"}}function Fm(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const u=Math.random()*16|0;return(r==="x"?u:u&3|8).toString(16)})}class Wy extends Ti{sessions;settings;musicPreferences;userPreferences;constructor(){super("ResearchTimerDB"),this.version(1).stores({sessions:"id, mode, startedAt, status, createdAt",settings:"id"}),this.version(2).stores({sessions:"id, mode, startedAt, status, createdAt",settings:"id"}),this.version(3).stores({sessions:"id, mode, startedAt, status, createdAt",settings:"id"}),this.version(4).stores({sessions:"id, mode, startedAt, status, createdAt",settings:"id"}).upgrade(async u=>{const d=await u.table("sessions").toArray();for(const c of d)if(c.link&&!c.links)try{const m=Py(c.link);c.links=[m],await u.table("sessions").put(c),console.log(`Migrated session ${c.id} link to links array`)}catch(m){console.warn(`Failed to migrate link for session ${c.id}:`,m)}console.log(`Completed migration of ${d.length} sessions to v4`)}),this.version(5).stores({sessions:"id, mode, startedAt, status, createdAt",settings:"id"}).upgrade(async u=>{const d=await u.table("settings").get("global");d&&(d.ai={enabled:!1,provider:"openai",model:"gpt-4o-mini",bullets:5,maxChars:300,temperature:.2,includeJournal:!0},d.updatedAt=Date.now(),await u.table("settings").put(d),console.log("Initialized AI settings with privacy-first defaults"))}),this.version(6).stores({sessions:"id, mode, startedAt, status, createdAt",settings:"id"}).upgrade(async u=>{const d=await u.table("settings").get("global"),c=Date.now(),m={id:"app",version:1,createdAt:d?.createdAt||c,updatedAt:c,privacy:{telemetryEnabled:!1,userAnonId:Fm()},ai:d?.ai};await u.table("settings").put(m),d&&await u.table("settings").delete("global"),console.log("Migrated to AppSettings schema with privacy-first defaults")}),this.version(7).stores({sessions:"id, mode, startedAt, status, createdAt",settings:"id",musicPreferences:"id",userPreferences:"id"}).upgrade(async u=>{const d=Date.now(),c={id:"music",enabled:!1,source:null,volume:50,createdAt:d,updatedAt:d};await u.table("musicPreferences").put(c);const m={id:"user",focusMode:null,musicEnabled:!1,musicSource:null,backgroundsEnabled:!1,background:{autoChange:!0,interval:10},onboardingCompleted:!1,createdAt:d,updatedAt:d};await u.table("userPreferences").put(m),console.log("Initialized music and user preferences")}),this.on("ready",async()=>{if(!await this.settings.get("app")){const d=Date.now(),c={id:"app",version:1,createdAt:d,updatedAt:d,privacy:{telemetryEnabled:!1,userAnonId:Fm()}};await this.settings.put(c),console.log("Initialized default app settings")}})}}const $e=new Wy;function Ud(r){const[u,d]=E.useState(null),[c,m]=E.useState(!0),[p,x]=E.useState(null),j=E.useCallback(async()=>{try{m(!0),x(null);const T=await $e.sessions.get(r);if(!T)throw new Error("Session not found");d({mode:T.mode,journal:T.journal,journalDraft:T.journalDraft})}catch(T){console.error("Failed to load journal:",T),x(T instanceof Error?T.message:"Failed to load journal")}finally{m(!1)}},[r]),N=E.useCallback(async(T,Q,ee)=>{try{const V=Date.now(),de={journal:T,journalDraft:void 0,updatedAt:V};Q!==void 0&&(de.aiSummary=Q||void 0),ee!==void 0&&(de.aiSummaryMeta=ee||void 0),await $e.sessions.update(r,de),d(fe=>fe?{...fe,journal:T,journalDraft:void 0}:null)}catch(V){throw console.error("Failed to save journal:",V),new Error("Failed to save journal")}},[r]),b=E.useCallback(async T=>{try{const Q=Date.now();await $e.sessions.update(r,{journalDraft:T,updatedAt:Q}),d(ee=>ee?{...ee,journalDraft:T}:null)}catch(Q){console.error("Failed to save journal draft:",Q)}},[r]),S=E.useCallback(async()=>{try{const T=Date.now();await $e.sessions.update(r,{journalDraft:void 0,updatedAt:T}),d(Q=>Q?{...Q,journalDraft:void 0}:null)}catch(T){console.error("Failed to clear journal draft:",T)}},[r]);return E.useEffect(()=>{r&&j()},[r,j]),{data:u,loading:c,error:p,save:N,saveDraft:b,clearDraft:S,reload:j}}function Iy(r,u,d){var c,m;typeof r=="function"?(c=u||[],m=d):(c=[],m=u);var p=da.useRef({hasResult:!1,result:m,error:null}),x=da.useReducer(function(b){return b+1},0);x[0];var j=x[1],N=da.useMemo(function(){var b=typeof r=="function"?r():r;if(!b||typeof b.subscribe!="function")throw r===b?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!p.current.hasResult&&typeof window<"u"&&(typeof b.hasValue!="function"||b.hasValue()))if(typeof b.getValue=="function")p.current.result=b.getValue(),p.current.hasResult=!0;else{var S=b.subscribe(function(T){p.current.result=T,p.current.hasResult=!0});typeof S=="function"?S():S.unsubscribe()}return b},c);if(da.useDebugValue(p.current.result),da.useEffect(function(){var b=N.subscribe(function(S){var T=p.current;(T.error!==null||T.result!==S)&&(T.error=null,T.result=S,T.hasResult=!0,j())},function(S){var T=p.current;T.error!==S&&(T.error=S,j())});return typeof b=="function"?b:b.unsubscribe.bind(b)},c),p.current.error)throw p.current.error;return p.current.result}function Ag(r,u,d){return Iy(function(){return Ti.liveQuery(r)},u||[],d)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(r){var u=Ti.DexieYProvider;u&&u.release(r)});async function Eo(r,u=3,d){const c=[0,500,1500];let m;for(let p=0;p<u;p++)try{if(d?.aborted)throw new Error("Request was cancelled");if(p>0&&(await new Promise(x=>setTimeout(x,c[p-1])),d?.aborted))throw new Error("Request was cancelled");return await r()}catch(x){if(m=x instanceof Error?x:new Error(String(x)),d?.aborted||m.message.includes("cancelled")||!(m.message.includes("429")||m.message.includes("5")||m.message.includes("timeout")||m.message.includes("network"))||p===u-1)throw m}throw m}function Ci(r){if(typeof r=="object"&&r!==null&&"name"in r&&r.name==="AbortError"||String(r).includes("cancelled"))return"Request was cancelled";if(String(r).includes("NetworkError")||String(r).includes("fetch"))return"Network connection failed";if(String(r).includes("401")||String(r).includes("Unauthorized"))return"Invalid API key or unauthorized";if(String(r).includes("429"))return"Rate limit exceeded - please try again later";if(String(r).includes("500")||String(r).includes("502")||String(r).includes("503"))return"Server temporarily unavailable";if(String(r).includes("timeout"))return"Request timed out";const u=typeof r=="object"&&r!==null&&"message"in r&&typeof r.message=="string"?r.message:String(r);return u.length>100?u.substring(0,97)+"...":u}class ev{name="openai";async testConnection(u){if(!u.apiKey)return{ok:!1,message:"OpenAI API key is required"};try{const d=await fetch("https://api.openai.com/v1/models",{method:"GET",headers:{Authorization:`Bearer ${u.apiKey}`,"Content-Type":"application/json"},signal:u.signal});if(!d.ok)return d.status===401?{ok:!1,message:"Invalid OpenAI API key"}:{ok:!1,message:`OpenAI API responded with ${d.status}`};const m=(await d.json()).data||[];return u.model&&!m.some(x=>x.id===u.model)?{ok:!1,message:`Model "${u.model}" not found or not accessible with your API key`}:{ok:!0,message:`Connected to OpenAI. ${m.length} model(s) available.`}}catch(d){return{ok:!1,message:Ci(d)}}}async summarize(u,d){if(!d.apiKey)throw new Error("OpenAI API key is required");return Eo(async()=>{const c=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${d.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:d.model,messages:[{role:"system",content:"You are a helpful assistant that creates concise, factual summaries of research sessions. Follow the format and length requirements exactly."},{role:"user",content:u}],temperature:d.temperature||.2,max_tokens:d.maxTokens||200}),signal:d.signal});if(!c.ok)throw c.status===429||c.status>=500?new Error(`OpenAI server error: ${c.status}`):new Error(`OpenAI request failed: ${c.status} ${c.statusText}`);const m=await c.json();if(!m.choices||m.choices.length===0||!m.choices[0].message?.content)throw new Error("Invalid response from OpenAI: missing content");return{text:m.choices[0].message.content.trim(),tokensIn:m.usage?.prompt_tokens,tokensOut:m.usage?.completion_tokens}},3,d.signal)}}class tv{name="anthropic";async testConnection(u){if(!u.apiKey)return{ok:!1,message:"Anthropic API key is required"};try{const d=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"x-api-key":u.apiKey||"","anthropic-version":"2023-06-01","Content-Type":"application/json"},body:JSON.stringify({model:u.model||"claude-3-haiku-20240307",max_tokens:10,messages:[{role:"user",content:"Hi"}]}),signal:u.signal});return d.ok?{ok:!0,message:"Connected to Anthropic Claude successfully"}:d.status===401?{ok:!1,message:"Invalid Anthropic API key"}:d.status===400&&(await d.json().catch(()=>null))?.error?.message?.includes("model")?{ok:!1,message:`Model "${u.model}" not found or not accessible`}:{ok:!1,message:`Anthropic API responded with ${d.status}`}}catch(d){return{ok:!1,message:Ci(d)}}}async summarize(u,d){if(!d.apiKey)throw new Error("Anthropic API key is required");return Eo(async()=>{const c=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"x-api-key":d.apiKey||"","anthropic-version":"2023-06-01","Content-Type":"application/json"},body:JSON.stringify({model:d.model,max_tokens:d.maxTokens||200,temperature:d.temperature||.2,messages:[{role:"user",content:u}]}),signal:d.signal});if(!c.ok)throw c.status===429||c.status>=500?new Error(`Anthropic server error: ${c.status}`):new Error(`Anthropic request failed: ${c.status} ${c.statusText}`);const m=await c.json();if(!m.content||m.content.length===0||!m.content[0].text)throw new Error("Invalid response from Anthropic: missing content");return{text:m.content[0].text.trim(),tokensIn:m.usage?.input_tokens,tokensOut:m.usage?.output_tokens}},3,d.signal)}}class nv{name="gemini";async testConnection(u){if(!u.apiKey)return{ok:!1,message:"Google AI API key is required"};try{const d=u.model||"gemini-1.5-pro",c=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${d}:generateContent?key=${u.apiKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:"Hi"}]}],generationConfig:{maxOutputTokens:10}}),signal:u.signal});return c.ok?{ok:!0,message:"Connected to Google Gemini successfully"}:c.status===401||c.status===403?{ok:!1,message:"Invalid Google AI API key or permission denied"}:c.status===404?{ok:!1,message:`Model "${d}" not found`}:{ok:!1,message:`Google AI API responded with ${c.status}`}}catch(d){return{ok:!1,message:Ci(d)}}}async summarize(u,d){if(!d.apiKey)throw new Error("Google AI API key is required");return Eo(async()=>{const c=d.model||"gemini-1.5-pro",m=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${c}:generateContent?key=${d.apiKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:u}]}],generationConfig:{temperature:d.temperature||.2,maxOutputTokens:d.maxTokens||200}}),signal:d.signal});if(!m.ok)throw m.status===429||m.status>=500?new Error(`Google AI server error: ${m.status}`):new Error(`Google AI request failed: ${m.status} ${m.statusText}`);const p=await m.json();if(!p.candidates||p.candidates.length===0||!p.candidates[0].content||!p.candidates[0].content.parts||p.candidates[0].content.parts.length===0||!p.candidates[0].content.parts[0].text)throw new Error("Invalid response from Google AI: missing content");return{text:p.candidates[0].content.parts[0].text.trim(),tokensIn:p.usageMetadata?.promptTokenCount,tokensOut:p.usageMetadata?.candidatesTokenCount}},3,d.signal)}}class av{name="groq";async testConnection(u){if(!u.apiKey)return{ok:!1,message:"Groq API key is required"};try{const d=await fetch("https://api.groq.com/openai/v1/models",{method:"GET",headers:{Authorization:`Bearer ${u.apiKey}`,"Content-Type":"application/json"},signal:u.signal});if(!d.ok)return d.status===401?{ok:!1,message:"Invalid Groq API key"}:{ok:!1,message:`Groq API responded with ${d.status}`};const m=(await d.json()).data||[];return u.model&&!m.some(x=>x.id===u.model)?{ok:!1,message:`Model "${u.model}" not found or not accessible with your API key`}:{ok:!0,message:`Connected to Groq. ${m.length} model(s) available.`}}catch(d){return{ok:!1,message:Ci(d)}}}async summarize(u,d){if(!d.apiKey)throw new Error("Groq API key is required");return Eo(async()=>{const c=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${d.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:d.model,messages:[{role:"system",content:"You are a helpful assistant that creates concise, factual summaries of research sessions. Follow the format and length requirements exactly."},{role:"user",content:u}],temperature:d.temperature||.2,max_tokens:d.maxTokens||200,stream:!1}),signal:d.signal});if(!c.ok)throw c.status===429||c.status>=500?new Error(`Groq server error: ${c.status}`):new Error(`Groq request failed: ${c.status} ${c.statusText}`);const m=await c.json();if(!m.choices||m.choices.length===0||!m.choices[0].message?.content)throw new Error("Invalid response from Groq: missing content");return{text:m.choices[0].message.content.trim(),tokensIn:m.usage?.prompt_tokens,tokensOut:m.usage?.completion_tokens}},3,d.signal)}}function rv(r){switch(r.kind){case"lit":return[r.keyClaim&&`**Key Claim:** ${r.keyClaim}`,r.method&&`**Method:** ${r.method}`,r.limitation&&`**Limitation:** ${r.limitation}`].filter(Boolean).join(`
`);case"writing":return[r.wordsAdded!==null&&`**Words Added:** ${r.wordsAdded}`,r.sectionsTouched&&`**Sections:** ${r.sectionsTouched}`].filter(Boolean).join(`
`);case"analysis":return[r.scriptOrNotebook&&`**Script/Notebook:** ${r.scriptOrNotebook}`,r.datasetRef&&`**Dataset:** ${r.datasetRef}`,r.nextStep&&`**Next Step:** ${r.nextStep}`].filter(Boolean).join(`
`);case"deep":case"break":return r.whatMoved?`**Progress:** ${r.whatMoved}`:"";default:return""}}function lv(r){const{mode:u,goal:d,notes:c,journalMarkdown:m,bullets:p,maxChars:x}=r,j=[];return d?.trim()&&j.push(`Session Goal: ${d.trim()}`),c?.trim()&&j.push(`Notes: ${c.trim()}`),m?.trim()&&j.push(`Journal Entry:
${m.trim()}`),j.length===0?`Please provide ${p} brief factual bullets summarizing a ${u} research session with minimal available information. Total length must be  ${x} characters. Use format:
- First bullet point
- Second bullet point
- etc.

Do not fabricate details. If information is sparse, acknowledge this in the summary.`:`Please summarize this ${u} research session into exactly ${p} concise factual bullets. Total response length must be  ${x} characters.

Session Information:
${j.join(`

`)}

Requirements:
- Exactly ${p} bullet points using "- " format
- Be factual and precise - do not fabricate information
- Quote short key phrases when useful
- Total length  ${x} characters
- Focus on concrete outcomes and insights
- If information is limited, provide minimal factual bullets

Format:
- First key point or outcome
- Second key point or outcome
- etc.`}function iv(r,u){const d=u.includeJournal&&r.journal?rv(r.journal):void 0;return lv({mode:r.mode,goal:r.goal,notes:r.notes,journalMarkdown:d,bullets:u.bullets,maxChars:u.maxChars})}function Zm(r){switch(r){case"openai":return new ev;case"anthropic":return new tv;case"gemini":return new nv;case"groq":return new av;default:throw new Error(`Unknown AI provider: ${r}`)}}function Cg(){const[r,u]=E.useState("idle"),[d,c]=E.useState(null),[m,p]=E.useState(null),x=E.useRef(null),j=Ag(async()=>(await $e.settings.get("app"))?.ai,[]);E.useEffect(()=>{u("idle"),c(null),p(null)},[j]);const N=j?.enabled??!1,b=E.useCallback(()=>!(!j||!N||!j.provider||!j.model||!j.apiKey),[j,N]),S=E.useCallback(async()=>{if(!j||!N)return{ok:!1,message:"AI is not enabled or configured"};if(!b())return{ok:!1,message:"AI provider not properly configured"};try{const ee=Zm(j.provider),V=new AbortController;return x.current=V,await ee.testConnection({model:j.model,apiKey:j.apiKey,signal:V.signal})}catch(ee){return{ok:!1,message:Ci(ee)}}},[j,N,b]),T=E.useCallback(async ee=>{if(!j||!N)return c("AI is not enabled"),u("error"),null;if(!b())return c("AI provider not configured"),u("error"),null;u("loading"),c(null),p(null);const V=new AbortController;x.current=V;try{const de=Zm(j.provider),fe=iv(ee,{bullets:j.bullets||5,maxChars:j.maxChars||300,includeJournal:j.includeJournal??!0});if(!ee.goal?.trim()&&!ee.notes?.trim()&&!ee.journal){const se="- Session completed; notes were sparse.";return p(se),u("success"),{text:se,tokensIn:0,tokensOut:0}}const he=await de.summarize(fe,{model:j.model,apiKey:j.apiKey,temperature:j.temperature||.2,maxTokens:200,signal:V.signal});return p(he.text),u("success"),he}catch(de){if(V.signal.aborted)return u("idle"),null;const fe=Ci(de);return c(fe),u("error"),null}},[j,N,b]),Q=E.useCallback(()=>{x.current&&x.current.abort(),u("idle"),c(null)},[]);return{enabled:N,isConfigured:b(),status:r,error:d,result:m,testConnection:S,generateSummary:T,cancel:Q}}const $t=[{id:"lit",name:"Lit Review",duration:25,description:"Literature review and reading"},{id:"analysis",name:"Analysis",duration:45,description:"Data analysis and research"},{id:"writing",name:"Writing",duration:30,description:"Writing and documentation"},{id:"deep",name:"Deep Work",duration:90,description:"Deep focus sessions"},{id:"break",name:"Break",duration:15,description:"Rest and recovery"}],kn=300,_g=({open:r,mode:u,sessionId:d,session:c,onSave:m,onSkip:p,onCancel:x})=>{const{data:j,saveDraft:N}=Ud(d),[b,S]=E.useState({}),[T,Q]=E.useState({}),[ee,V]=E.useState(!1),[de,fe]=E.useState(!1),[he,se]=E.useState(""),[,U]=E.useState(!1),Y=Cg(),re=E.useRef(null),ue=E.useRef(null),pe=E.useRef(null),_e=E.useRef(void 0),Le=$t.find(C=>C.id===u),me=C=>{switch(C){case"lit":return{kind:"lit",keyClaim:"",method:"",limitation:""};case"writing":return{kind:"writing",wordsAdded:null,sectionsTouched:""};case"analysis":return{kind:"analysis",scriptOrNotebook:"",datasetRef:"",nextStep:""};case"deep":case"break":return{kind:C,whatMoved:""};default:return{}}},Ae=E.useCallback(()=>{const C={};if(u==="writing"&&"wordsAdded"in b&&b.wordsAdded!==null&&b.wordsAdded!==void 0){const te=Number(b.wordsAdded);(isNaN(te)||te<0)&&(C.wordsAdded="Words added must be a number  0 or left blank")}if(u==="analysis"){const te="scriptOrNotebook"in b?b.scriptOrNotebook?.trim():"",ge="datasetRef"in b?b.datasetRef?.trim():"",ye="nextStep"in b?b.nextStep?.trim():"";(te||ge)&&!ye&&(C.nextStep="Next step is required when script/notebook or dataset is provided")}return Q(C),Object.keys(C).length===0},[u,b]),Ce=E.useCallback(C=>{const te={...C};Object.keys(te).forEach(ye=>{const De=te;typeof De[ye]=="string"&&(De[ye]=De[ye].trim())});const ge=te;return ge.kind=u,te},[u]),ce=E.useCallback(()=>{if(!Ae())return;const C=Ce(b),te=de&&he.trim()?he.trim():void 0,ge=te?{provider:"openai",model:"gpt-4o-mini",createdAt:Date.now()}:void 0;m(C,te,ge)},[Ae,Ce,b,de,he,m]),dt=E.useCallback(()=>{Y.cancel(),p()},[Y,p]),Pe=E.useCallback(()=>{(ee||Y.status==="loading")&&!window.confirm("You have unsaved changes. Are you sure you want to cancel?")||(Y.cancel(),x())},[ee,Y,x]);E.useEffect(()=>{if(!r||!j)return;const C=j.journal||j.journalDraft||me(u);S(C),V(!1),Q({})},[r,j,u]),E.useEffect(()=>{if(!r)return;const C=ge=>{ge.key==="Escape"?(ge.preventDefault(),Pe()):ge.key==="Enter"&&(ge.ctrlKey||ge.metaKey)&&(ge.preventDefault(),ce())},te=ge=>{if(ge.key!=="Tab"||!re.current)return;const ye=re.current.querySelectorAll('input, textarea, button, [tabindex]:not([tabindex="-1"])'),De=ye[0],Ye=ye[ye.length-1];ge.shiftKey?document.activeElement===De&&(ge.preventDefault(),Ye.focus()):document.activeElement===Ye&&(ge.preventDefault(),De.focus())};return document.addEventListener("keydown",C),document.addEventListener("keydown",te),setTimeout(()=>{["lit","deep","break"].includes(u)?ue.current?.focus():pe.current?.focus()},100),()=>{document.removeEventListener("keydown",C),document.removeEventListener("keydown",te)}},[r,u,Pe,ce]),E.useEffect(()=>{if(!(!ee||!r))return _e.current&&clearTimeout(_e.current),_e.current=setTimeout(()=>{N(b)},5e3),()=>{_e.current&&clearTimeout(_e.current)}},[b,ee,r,N]);const Z=(C,te)=>{S(ge=>({...ge,[C]:te})),V(!0),T[C]&&Q(ge=>({...ge,[C]:""}))},xe=async()=>{if(!c)return;const C=await Y.generateSummary(c);C&&(se(C.text),U(!0))},Me=()=>de?s.jsxs("div",{className:"border-t border-gray-300 dark:border-gray-600 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200",children:"AI Summary"}),s.jsxs("div",{className:"flex items-center gap-2",children:[Y.status==="idle"&&!he&&s.jsx(We,{variant:"secondary",size:"sm",onClick:xe,disabled:!c||!Y.enabled||!Y.isConfigured,children:"Generate"}),Y.status==="loading"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-gray-300 border-t-blue-600 rounded-full"}),s.jsx(We,{variant:"ghost",size:"sm",onClick:Y.cancel,children:"Cancel"})]}),Y.status==="error"&&s.jsx(We,{variant:"secondary",size:"sm",onClick:xe,disabled:!c||!Y.enabled||!Y.isConfigured,children:"Retry"}),(Y.status==="success"||he)&&s.jsx(We,{variant:"ghost",size:"sm",onClick:()=>{se(""),U(!1)},children:"Clear"})]})]}),Y.status==="error"&&s.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 mb-2",children:Y.error}),(Y.result||he)&&s.jsx(it,{label:"AI Summary",htmlFor:"aiSummary",hint:"Editable before saving",children:s.jsx("textarea",{id:"aiSummary",value:he||Y.result||"",onChange:C=>{se(C.target.value),U(!0)},onFocus:()=>U(!0),className:"w-full",rows:4,placeholder:"AI-generated summary will appear here...",readOnly:Y.status==="loading"})})]}):null,Ve=()=>{switch(u){case"lit":return s.jsxs(s.Fragment,{children:[s.jsxs(it,{label:"Key Claim",htmlFor:"keyClaim",hint:`${("keyClaim"in b&&b.keyClaim||"").length}/${kn} characters`,children:[s.jsx("textarea",{ref:ue,id:"keyClaim",value:"keyClaim"in b&&b.keyClaim||"",onChange:C=>Z("keyClaim",C.target.value.slice(0,kn)),className:"w-full",rows:3,placeholder:"What is the main claim or finding from this literature?",maxLength:kn,"aria-describedby":"keyClaim-help"}),s.jsx("div",{id:"keyClaim-help",className:"sr-only",children:"Describe the key claim or finding from the literature you reviewed"})]}),s.jsxs(it,{label:"Method",htmlFor:"method",hint:`${("method"in b&&b.method||"").length}/${kn} characters`,children:[s.jsx("textarea",{id:"method",value:"method"in b&&b.method||"",onChange:C=>Z("method",C.target.value.slice(0,kn)),className:"w-full",rows:3,placeholder:"How was this research conducted?",maxLength:kn,"aria-describedby":"method-help"}),s.jsx("div",{id:"method-help",className:"sr-only",children:"Describe the methodology used in the research"})]}),s.jsxs(it,{label:"Limitation",htmlFor:"limitation",hint:`${("limitation"in b&&b.limitation||"").length}/${kn} characters`,children:[s.jsx("textarea",{id:"limitation",value:"limitation"in b&&b.limitation||"",onChange:C=>Z("limitation",C.target.value.slice(0,kn)),className:"w-full",rows:3,placeholder:"What are the key limitations or gaps?",maxLength:kn,"aria-describedby":"limitation-help"}),s.jsx("div",{id:"limitation-help",className:"sr-only",children:"Note any limitations, gaps, or areas for improvement"})]})]});case"writing":return s.jsxs(s.Fragment,{children:[s.jsxs(it,{label:"Words Added",htmlFor:"wordsAdded",hint:"Leave blank if not applicable",children:[s.jsx("input",{ref:pe,id:"wordsAdded",type:"number",min:"0",value:"wordsAdded"in b&&b.wordsAdded||"",onChange:C=>Z("wordsAdded",C.target.value?parseInt(C.target.value):null),className:`w-full ${T.wordsAdded?"border-red-500":""}`,placeholder:"320","aria-describedby":"wordsAdded-help wordsAdded-error","aria-invalid":!!T.wordsAdded}),s.jsx("div",{id:"wordsAdded-help",className:"sr-only",children:"Approximate number of words added during this writing session"}),T.wordsAdded&&s.jsx("div",{id:"wordsAdded-error",className:"text-sm text-red-600 dark:text-red-400 mt-1",children:T.wordsAdded})]}),s.jsxs(it,{label:"Sections Touched",htmlFor:"sectionsTouched",hint:`${("sectionsTouched"in b&&b.sectionsTouched||"").length}/${kn} characters`,children:[s.jsx("textarea",{id:"sectionsTouched",value:"sectionsTouched"in b&&b.sectionsTouched||"",onChange:C=>Z("sectionsTouched",C.target.value.slice(0,kn)),className:"w-full",rows:3,placeholder:"Introduction, Methods section - improved flow and clarity",maxLength:kn,"aria-describedby":"sectionsTouched-help"}),s.jsx("div",{id:"sectionsTouched-help",className:"sr-only",children:"Which sections or parts did you work on?"})]})]});case"analysis":return s.jsxs(s.Fragment,{children:[s.jsxs(it,{label:"Script/Notebook",htmlFor:"scriptOrNotebook",children:[s.jsx("input",{ref:pe,id:"scriptOrNotebook",type:"text",value:"scriptOrNotebook"in b&&b.scriptOrNotebook||"",onChange:C=>Z("scriptOrNotebook",C.target.value),className:"w-full",placeholder:"analysis_v2.ipynb, data_cleaning.py","aria-describedby":"scriptOrNotebook-help"}),s.jsx("div",{id:"scriptOrNotebook-help",className:"sr-only",children:"Name of the script, notebook, or file you worked on"})]}),s.jsxs(it,{label:"Dataset Reference",htmlFor:"datasetRef",children:[s.jsx("input",{id:"datasetRef",type:"text",value:"datasetRef"in b&&b.datasetRef||"",onChange:C=>Z("datasetRef",C.target.value),className:"w-full",placeholder:"survey_data_2024.csv, /data/experiments/batch_2","aria-describedby":"datasetRef-help"}),s.jsx("div",{id:"datasetRef-help",className:"sr-only",children:"Dataset file, path, or URL you analyzed"})]}),s.jsxs(it,{label:"Next Step",htmlFor:"nextStep",hint:"What's one actionable next step?",children:[s.jsx("textarea",{id:"nextStep",value:"nextStep"in b&&b.nextStep||"",onChange:C=>Z("nextStep",C.target.value),className:`w-full ${T.nextStep?"border-red-500":""}`,rows:2,placeholder:"Run correlation analysis between variables X and Y","aria-describedby":"nextStep-help nextStep-error","aria-invalid":!!T.nextStep}),s.jsx("div",{id:"nextStep-help",className:"sr-only",children:"One specific next step to continue this analysis"}),T.nextStep&&s.jsx("div",{id:"nextStep-error",className:"text-sm text-red-600 dark:text-red-400 mt-1",children:T.nextStep})]})]});case"deep":case"break":return s.jsxs(it,{label:"What Moved Forward?",htmlFor:"whatMoved",hint:`${("whatMoved"in b&&b.whatMoved||"").length}/${kn} characters`,children:[s.jsx("textarea",{ref:ue,id:"whatMoved",value:"whatMoved"in b&&b.whatMoved||"",onChange:C=>Z("whatMoved",C.target.value.slice(0,kn)),className:"w-full",rows:4,placeholder:u==="break"?"How did this break help you recharge or gain perspective?":"What progress did you make? What insights emerged?",maxLength:kn,"aria-describedby":"whatMoved-help"}),s.jsx("div",{id:"whatMoved-help",className:"sr-only",children:u==="break"?"Reflect on how this break contributed to your work":"Capture what you accomplished and any insights"})]});default:return null}};return r?Eg.createPortal(s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:Pe}),s.jsxs("div",{ref:re,className:"relative w-full max-w-md transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 shadow-xl transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-300 dark:border-gray-600",children:[s.jsxs("h3",{id:"modal-title",className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:[Le?.name,"  Quick Journal"]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Capture your insights from this session"})]}),s.jsxs("div",{className:"px-6 py-4 space-y-4 max-h-96 overflow-y-auto",children:[Ve(),s.jsx("div",{className:"border-t border-gray-300 dark:border-gray-600 pt-4",children:s.jsxs(it,{label:"AI Summary Options",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-800 dark:text-gray-200",children:[s.jsx("input",{type:"checkbox",checked:de,disabled:!Y.enabled||!Y.isConfigured,onChange:C=>{fe(C.target.checked),C.target.checked||(se(""),U(!1))},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"}),"Use AI to condense notes/journal",s.jsx("span",{className:"ml-1 px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full",children:"Beta"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6",children:Y.enabled?Y.isConfigured?"AI will generate a 3-5 bullet summary that you can edit before saving":"Configure AI provider in Settings to use this feature":"Enable AI in Settings to use this feature"})]})}),Me()]}),s.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-300 dark:border-gray-600",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-end",children:[s.jsx(We,{variant:"ghost",onClick:Pe,children:"Cancel"}),s.jsx(We,{variant:"secondary",onClick:dt,children:"Skip"}),s.jsxs(We,{variant:"primary",onClick:ce,children:["Save ",s.jsx("span",{className:"hidden sm:inline",children:"(Ctrl+Enter)"})]})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Press Esc to cancel  Auto-saves draft after 5s"})]})]})]})}),document.body):null},pt=da.forwardRef(({className:r="",children:u,...d},c)=>s.jsx("div",{ref:c,className:`academic-card transition-shadow duration-200 ${r}`,...d,children:u}));pt.displayName="Card";const Ft=da.forwardRef(({className:r="",children:u,...d},c)=>s.jsx("div",{ref:c,className:`p-6 pb-4 border-b border-gray-200/50 dark:border-gray-700/50 ${r}`,...d,children:u}));Ft.displayName="CardHeader";const yt=da.forwardRef(({className:r="",children:u,...d},c)=>s.jsx("div",{ref:c,className:`px-6 py-6 ${r}`,...d,children:u}));yt.displayName="CardContent";const sv=da.forwardRef(({className:r="",children:u,...d},c)=>s.jsx("div",{ref:c,className:`px-6 pt-4 pb-6 border-t border-gray-200/50 dark:border-gray-700/50 ${r}`,...d,children:u}));sv.displayName="CardFooter";const uv=()=>{const[r,u]=E.useState(null),[d,c]=E.useState("youtube"),[m,p]=E.useState(""),[x,j]=E.useState(""),[N,b]=E.useState(null),[S,T]=E.useState(50),[Q,ee]=E.useState(!1),V=E.useRef(null),de=E.useRef(null);E.useEffect(()=>{(async()=>{try{const Ce=await $e.musicPreferences.get("music");Ce&&(u(Ce),c(Ce.source||"youtube"),p(Ce.youtubeUrl||""),j(Ce.spotifyUrl||""),T(Ce.volume))}catch(Ce){console.error("Failed to load music preferences:",Ce)}})()},[]);const fe=async Ae=>{try{const Ce=await $e.musicPreferences.get("music");if(Ce){const ce={...Ce,...Ae,updatedAt:Date.now()};await $e.musicPreferences.put(ce),u(ce)}}catch(Ce){console.error("Failed to save music preferences:",Ce)}},he=Ae=>{const Ce=/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,ce=Ae.match(Ce);return ce?ce[1]:null},se=Ae=>{const Ce=/spotify\.com\/(track|playlist|album)\/([a-zA-Z0-9]+)/,ce=Ae.match(Ce);return ce?ce[2]:null},U=Ae=>{c(Ae),fe({source:Ae})},Y=()=>{m&&fe({youtubeUrl:m,source:"youtube",enabled:!0})},re=()=>{x&&fe({spotifyUrl:x,source:"spotify",enabled:!0})},ue=Ae=>{const Ce=Ae.target.files?.[0];Ce&&(b(Ce),fe({localFile:Ce.name,source:"local",enabled:!0}))},pe=Ae=>{T(Ae),fe({volume:Ae}),V.current&&(V.current.volume=Ae/100)},_e=()=>{V.current&&(Q?V.current.pause():V.current.play(),ee(!Q))},Le=m?he(m):null,me=x?se(x):null;return r?.enabled?s.jsxs(pt,{"data-music-enabled":"true",children:[s.jsx(Ft,{children:s.jsx("h2",{className:"font-display text-xl font-medium bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Focus Music"})}),s.jsx(yt,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:[s.jsxs("button",{onClick:()=>U("youtube"),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors ${d==="youtube"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[s.jsx("span",{className:"material-icons text-sm mr-2",children:"play_circle"}),"YouTube"]}),s.jsxs("button",{onClick:()=>U("spotify"),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors ${d==="spotify"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[s.jsx("span",{className:"material-icons text-sm mr-2",children:"library_music"}),"Spotify"]}),s.jsxs("button",{onClick:()=>U("local"),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors ${d==="local"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[s.jsx("span",{className:"material-icons text-sm mr-2",children:"upload_file"}),"Local"]})]}),d==="youtube"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(it,{label:"YouTube URL",htmlFor:"youtube-url",children:s.jsx("input",{id:"youtube-url",type:"url",value:m,onChange:Ae=>p(Ae.target.value),placeholder:"https://www.youtube.com/watch?v=...",className:"w-full"})}),s.jsx("div",{className:"flex gap-2",children:s.jsx(We,{onClick:Y,disabled:!m,variant:"primary",size:"sm",children:"Save & Play"})}),Le&&r.youtubeUrl&&s.jsx("div",{className:"aspect-video rounded-lg overflow-hidden",children:s.jsx("iframe",{src:`https://www.youtube.com/embed/${Le}?autoplay=0&controls=1`,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"YouTube Music Player"})})]}),d==="spotify"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(it,{label:"Spotify URL",htmlFor:"spotify-url",children:s.jsx("input",{id:"spotify-url",type:"url",value:x,onChange:Ae=>j(Ae.target.value),placeholder:"https://open.spotify.com/track/...",className:"w-full"})}),s.jsx("div",{className:"flex gap-2",children:s.jsx(We,{onClick:re,disabled:!x,variant:"primary",size:"sm",children:"Save & Play"})}),me&&r.spotifyUrl&&s.jsx("div",{className:"aspect-video rounded-lg overflow-hidden",children:s.jsx("iframe",{src:`https://open.spotify.com/embed/track/${me}`,className:"w-full h-full",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",title:"Spotify Music Player"})})]}),d==="local"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(it,{label:"Upload Audio File",htmlFor:"local-file",children:s.jsx("input",{ref:de,id:"local-file",type:"file",accept:"audio/*",onChange:ue,className:"w-full"})}),N&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Selected: ",N.name]}),s.jsxs("audio",{ref:V,controls:!0,className:"w-full",onLoadedData:()=>{V.current&&(V.current.volume=S/100)},children:[s.jsx("source",{src:URL.createObjectURL(N)}),"Your browser does not support the audio element."]})]})]}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[d==="local"&&N&&s.jsx(We,{onClick:_e,variant:"secondary",size:"sm",leftIcon:Q?"pause":"play_arrow","data-music-play":"true",children:Q?"Pause":"Play"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"material-icons text-sm text-gray-500",children:"volume_up"}),s.jsx("input",{type:"range",min:"0",max:"100",value:S,onChange:Ae=>pe(Number(Ae.target.value)),className:"w-20"}),s.jsxs("span",{className:"text-sm text-gray-500 w-8",children:[S,"%"]})]})]})})})]})})]}):null},ov=({isOpen:r,onClose:u,title:d,children:c,className:m=""})=>(E.useEffect(()=>{const p=x=>{x.key==="Escape"&&u()};return r&&(document.addEventListener("keydown",p),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",p),document.body.style.overflow="unset"}},[r,u]),r?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:u}),s.jsxs("div",{className:`relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl border border-gray-200/30 dark:border-gray-700/30 max-h-[90vh] overflow-y-auto ${m}`,children:[d&&s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:d}),s.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:s.jsx("span",{className:"material-icons",children:"close"})})]}),c]})]}):null),Dg=({isOpen:r=!0,onComplete:u})=>{const[d,c]=E.useState(1),[m,p]=E.useState({focusMode:null,musicEnabled:!1,musicSource:null,backgroundsEnabled:!1});E.useEffect(()=>{r&&(async()=>{try{(await $e.userPreferences.get("user"))?.onboardingCompleted&&r&&u()}catch(Q){console.error("Failed to check onboarding status:",Q)}})()},[r,u]);const x=()=>{d<3&&c(T=>T+1)},j=()=>{d>1&&c(T=>T-1)},N=async()=>{try{const T=Date.now(),Q={id:"user",focusMode:m.focusMode,musicEnabled:m.musicEnabled,musicSource:m.musicSource,backgroundsEnabled:m.backgroundsEnabled,background:{autoChange:!0,interval:10},onboardingCompleted:!0,createdAt:T,updatedAt:T};if(await $e.userPreferences.put(Q),m.musicEnabled){const ee=await $e.musicPreferences.get("music");ee&&await $e.musicPreferences.put({...ee,enabled:!0,source:m.musicSource,updatedAt:T})}u()}catch(T){console.error("Failed to save onboarding preferences:",T)}},b=T=>{p(Q=>({...Q,...T}))},S=()=>{switch(d){case 1:return m.focusMode!==null;case 2:return!0;case 3:return!0;default:return!1}};return s.jsx(ov,{isOpen:r,onClose:()=>{},title:"",className:"max-w-2xl",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"flex justify-center items-center space-x-4 mb-4",children:[1,2,3].map(T=>s.jsxs(da.Fragment,{children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors ${T===d?"bg-blue-600 text-white":T<d?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:T<d?s.jsx("span",{className:"material-icons text-sm",children:"check"}):T}),T<3&&s.jsx("div",{className:`w-16 h-0.5 transition-colors ${T<d?"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`})]},T))}),s.jsxs("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:["Step ",d," of 3"]})]}),s.jsxs("div",{className:"min-h-[300px]",children:[d===1&&s.jsxs("div",{className:"text-center space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h2",{className:"font-display text-2xl font-bold text-gray-900 dark:text-white",children:"Welcome to Research Timer Pro! "}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"What's your primary focus activity? This helps us tailor your experience."})]}),s.jsx("div",{className:"grid grid-cols-1 gap-3 max-w-sm mx-auto",children:[{id:"deep",name:"Deep Research",description:"Complex analysis, writing papers",duration:25,icon:""},{id:"reading",name:"Reading & Review",description:"Papers, books, documentation",duration:30,icon:""},{id:"coding",name:"Programming",description:"Coding, debugging, development",duration:25,icon:""},{id:"writing",name:"Academic Writing",description:"Papers, proposals, reports",duration:45,icon:""}].map(T=>s.jsx("button",{onClick:()=>b({focusMode:T.id}),className:`p-4 rounded-lg border-2 transition-all text-left ${m.focusMode===T.id?"border-blue-600 bg-blue-600/10 dark:bg-blue-600/20":"border-gray-200 dark:border-gray-700 hover:border-blue-600/50"}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-2xl",children:T.icon}),s.jsxs("div",{className:"text-left flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:T.name}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:T.description}),s.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium mt-1",children:["Default: ",T.duration," minutes"]})]})]})},T.id))})]}),d===2&&s.jsxs("div",{className:"text-center space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h2",{className:"font-display text-2xl font-bold text-gray-900 dark:text-white",children:"Focus Environment "}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"How do you prefer to work? Choose what helps you concentrate best."})]}),s.jsxs("div",{className:"space-y-3 max-w-sm mx-auto",children:[s.jsx("button",{onClick:()=>b({musicEnabled:!1,musicSource:null}),className:`w-full p-4 rounded-lg border-2 transition-all text-left ${m.musicEnabled?"border-gray-200 dark:border-gray-700 hover:border-blue-600/50":"border-blue-600 bg-blue-600/10 dark:bg-blue-600/20"}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-xl",children:""}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Silent Focus"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pure concentration in silence"})]})]})}),s.jsx("button",{onClick:()=>b({musicEnabled:!0,musicSource:"youtube"}),className:`w-full p-4 rounded-lg border-2 transition-all text-left ${m.musicEnabled&&m.musicSource==="youtube"?"border-blue-600 bg-blue-600/10 dark:bg-blue-600/20":"border-gray-200 dark:border-gray-700 hover:border-blue-600/50"}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-xl",children:""}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Background Music"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ambient sounds and lo-fi beats"})]})]})}),s.jsx("button",{onClick:()=>b({musicEnabled:!0,musicSource:"local"}),className:`w-full p-4 rounded-lg border-2 transition-all text-left ${m.musicEnabled&&m.musicSource==="local"?"border-blue-600 bg-blue-600/10 dark:bg-blue-600/20":"border-gray-200 dark:border-gray-700 hover:border-blue-600/50"}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-xl",children:""}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"My Music"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload your own audio files"})]})]})})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:" You can change this later in Settings"})]}),d===3&&s.jsxs("div",{className:"text-center space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h2",{className:"font-display text-2xl font-bold text-gray-900 dark:text-white",children:"Perfect! You're all set! "}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your Research Timer Pro is ready to boost your productivity."})]}),s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-6 rounded-lg max-w-md mx-auto",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"text-4xl",children:""}),s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Quick Start Tips"}),s.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-2 text-left",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-blue-600 mr-2",children:""}),"Use ",s.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs",children:"Space"})," to start/pause timer"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-blue-600 mr-2",children:""}),"Timer auto-floats when you minimize the browser"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-blue-600 mr-2",children:""}),"Track your progress in Timeline and Analytics"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-blue-600 mr-2",children:""}),"Customize everything in Settings"]})]})]})}),s.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg max-w-md mx-auto",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-800 dark:text-green-200",children:[s.jsx("span",{className:"material-icons text-sm",children:"check_circle"}),s.jsx("p",{className:"text-sm font-medium",children:"Ready to start your first focus session!"})]})})]})]}),s.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx(We,{onClick:j,variant:"ghost",disabled:d===1,children:"Back"}),d<3?s.jsx(We,{onClick:x,disabled:!S(),variant:"primary",children:"Next"}):s.jsx(We,{onClick:N,variant:"primary",children:"Get Started! "})]})]})})},on=[];for(let r=0;r<256;++r)on.push((r+256).toString(16).slice(1));function cv(r,u=0){return(on[r[u+0]]+on[r[u+1]]+on[r[u+2]]+on[r[u+3]]+"-"+on[r[u+4]]+on[r[u+5]]+"-"+on[r[u+6]]+on[r[u+7]]+"-"+on[r[u+8]]+on[r[u+9]]+"-"+on[r[u+10]]+on[r[u+11]]+on[r[u+12]]+on[r[u+13]]+on[r[u+14]]+on[r[u+15]]).toLowerCase()}let jd;const dv=new Uint8Array(16);function fv(){if(!jd){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");jd=crypto.getRandomValues.bind(crypto)}return jd(dv)}const hv=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Jm={randomUUID:hv};function mv(r,u,d){r=r||{};const c=r.random??r.rng?.()??fv();if(c.length<16)throw new Error("Random bytes length must be >= 16");return c[6]=c[6]&15|64,c[8]=c[8]&63|128,cv(c)}function gv(r,u,d){return Jm.randomUUID&&!r?Jm.randomUUID():mv(r)}function pv({duration:r,onComplete:u,onTick:d,interval:c=100}){const[m,p]=E.useState(!1),[x,j]=E.useState(!1),[N,b]=E.useState(r),[S,T]=E.useState(0),[Q,ee]=E.useState(!1),[V,de]=E.useState(r),fe=E.useRef(null),he=E.useRef(0),se=E.useRef(null),U=E.useCallback(()=>{if(!fe.current)return;const dt=Date.now()-fe.current-he.current,Pe=Math.max(0,V-dt);T(dt),b(Pe),d?.({remainingMs:Pe,elapsedMs:dt,isRunning:m,isPaused:x,isCompleted:Pe===0}),Pe===0&&!Q&&(ee(!0),p(!1),u?.(),se.current&&(clearInterval(se.current),se.current=null))},[V,m,x,Q,u,d]),Y=E.useCallback(()=>{Q||(fe.current=Date.now(),he.current=0,p(!0),j(!1),se.current=setInterval(U,c))},[Q,U,c]),re=E.useRef(null),ue=E.useCallback(()=>{!m||x||(re.current=Date.now(),j(!0),p(!1),se.current&&(clearInterval(se.current),se.current=null))},[m,x]),pe=E.useCallback(()=>{if(!x||!re.current)return;const ce=Date.now()-re.current;he.current+=ce,re.current=null,j(!1),p(!0),se.current=setInterval(U,c)},[x,U,c]),_e=E.useCallback(()=>{p(!1),j(!1),ee(!1),b(V),T(0),fe.current=null,he.current=0,re.current=null,se.current&&(clearInterval(se.current),se.current=null)},[V]),Le=E.useCallback(()=>{p(!1),j(!1),se.current&&(clearInterval(se.current),se.current=null)},[]),me=E.useCallback(ce=>{m||(de(ce),b(ce),T(0),ee(!1))},[m]);return E.useEffect(()=>{m||(de(r),b(r),T(0),ee(!1))},[r,m]),E.useEffect(()=>()=>{se.current&&clearInterval(se.current)},[]),[{remainingMs:N,elapsedMs:S,isRunning:m,isPaused:x,isCompleted:Q},{start:Y,pause:ue,resume:pe,reset:_e,stop:Le,setDuration:me}]}function yv(r,u){let d,c=!1;const m=(...p)=>{c||(clearTimeout(d),d=setTimeout(()=>{c||r(...p)},u))};return m.cancel=()=>{c=!0,clearTimeout(d)},m}class vv{audioContext=null;enabled=!0;constructor(){this.initAudioContext()}async initAudioContext(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(u){console.warn("Web Audio API not supported:",u)}}async ensureAudioContext(){this.audioContext||await this.initAudioContext(),this.audioContext&&this.audioContext.state==="suspended"&&await this.audioContext.resume()}async playTone(u,d,c="sine"){if(!(!this.enabled||!this.audioContext))try{await this.ensureAudioContext();const m=this.audioContext.createOscillator(),p=this.audioContext.createGain();m.connect(p),p.connect(this.audioContext.destination),m.frequency.value=u,m.type=c,p.gain.setValueAtTime(0,this.audioContext.currentTime),p.gain.linearRampToValueAtTime(.3,this.audioContext.currentTime+.01),p.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+d),m.start(this.audioContext.currentTime),m.stop(this.audioContext.currentTime+d)}catch(m){console.warn("Failed to play sound:",m)}}async playStart(){await this.playTone(800,.2),setTimeout(()=>this.playTone(1e3,.2),100)}async playPause(){await this.playTone(600,.3)}async playResume(){await this.playTone(700,.15),setTimeout(()=>this.playTone(900,.15),80)}async playStop(){await this.playTone(1e3,.15),setTimeout(()=>this.playTone(800,.15),80),setTimeout(()=>this.playTone(600,.2),160)}async playComplete(){await this.playTone(800,.2),setTimeout(()=>this.playTone(1e3,.2),100),setTimeout(()=>this.playTone(1200,.3),200)}async playTick(){this.enabled&&await this.playTone(800,.05,"square")}setEnabled(u){this.enabled=u}isEnabled(){return this.enabled}}const Zr=new vv;let Wm=!1;const xv=()=>{if(Wm)return;const r=()=>{Zr.initAudioContext(),Wm=!0,document.removeEventListener("click",r),document.removeEventListener("keydown",r),document.removeEventListener("touchstart",r)};document.addEventListener("click",r),document.addEventListener("keydown",r),document.addEventListener("touchstart",r)};function bv({onComplete:r,onMetadataUpdate:u,autoSaveDelayMs:d=800}={}){const[c,m]=E.useState(null),[p,x]=E.useState(0),j=E.useRef({}),N=E.useRef(!0);E.useEffect(()=>{xv()},[]);const[b,S]=pv({duration:p,onComplete:()=>Q(),interval:100}),T=E.useCallback(yv(async(re,ue)=>{if(N.current)try{const pe=Date.now();await $e.sessions.update(re,{...ue,updatedAt:pe}),m(_e=>{if(!_e||_e.id!==re)return _e;const Le={..._e,...ue,updatedAt:pe};return u?.(Le),Le})}catch(pe){console.error("Failed to save session metadata:",pe)}},d),[d,u]),Q=E.useCallback(async()=>{if(c)try{const re=Date.now(),ue={...c,...j.current,endedAt:re,status:"completed",updatedAt:re};await $e.sessions.update(c.id,{endedAt:re,status:"completed",updatedAt:re,...j.current}),m(ue),Zr.playComplete(),r?.(ue),j.current={}}catch(re){console.error("Failed to complete session:",re)}},[c,r]),ee=E.useCallback(async(re,ue)=>{const pe=ue??re.duration*60*1e3,_e=Date.now(),Le={id:gv(),mode:re.id,plannedMs:pe,startedAt:_e,status:"running",goal:"",notes:"",tags:[],link:"",createdAt:_e,updatedAt:_e};try{await $e.sessions.add(Le),m(Le),j.current={},x(pe),Zr.playStart(),S.setDuration(pe),S.reset(),S.start()}catch(me){console.error("Failed to start session:",me)}},[S]),V=E.useCallback(()=>{S.pause(),Zr.playPause()},[S]),de=E.useCallback(()=>{S.resume(),Zr.playResume()},[S]),fe=E.useCallback(async(re=!1)=>{if(c)try{const ue=Date.now(),pe=re?"cancelled":"completed",_e={...c,...j.current,endedAt:ue,status:pe,updatedAt:ue};await $e.sessions.update(c.id,{endedAt:ue,status:pe,updatedAt:ue,...j.current}),m(_e),S.stop(),re?Zr.playStop():Zr.playComplete(),re||r?.(_e),j.current={}}catch(ue){console.error("Failed to stop session:",ue)}},[c,S,r]),he=E.useCallback(()=>{S.reset(),m(null),x(1500*1e3),j.current={},Zr.playStop()},[S]),se=E.useCallback(re=>{c&&(j.current={...j.current,...re},m(ue=>ue&&{...ue,...re}),T(c.id,re))},[c,T]);return E.useEffect(()=>(N.current=!0,()=>{N.current=!1,T.cancel?.()}),[T]),[{currentSession:c,isRunning:b.isRunning,isPaused:b.isPaused,isCompleted:b.isCompleted,remainingMs:b.remainingMs,elapsedMs:b.elapsedMs,plannedMs:p},{startSession:ee,pauseSession:V,resumeSession:de,stopSession:fe,resetSession:he,updateMetadata:se}]}const wv={workDuration:25,shortBreakDuration:5,longBreakDuration:15,sessionsPerCycle:4,autoStartBreaks:!1,autoStartWork:!1};function Sv(r={},u,d){const[c,m]=E.useState({...wv,...r}),[p,x]=E.useState(c.workDuration*60*1e3),[j,N]=E.useState(!1),[b,S]=E.useState(!1),[T,Q]=E.useState("work"),[ee,V]=E.useState(1),[de,fe]=E.useState(0),[he,se]=E.useState(0),U=E.useRef(null),Y=E.useRef(0),re=E.useRef(0),ue=E.useCallback(()=>{switch(T){case"work":return c.workDuration*60*1e3;case"shortBreak":return c.shortBreakDuration*60*1e3;case"longBreak":return c.longBreakDuration*60*1e3;default:return c.workDuration*60*1e3}},[T,c]),pe=Math.max(0,Math.min(100,(ue()-p)/ue()*100)),_e=E.useCallback(()=>{const Me=Date.now()-Y.current,Ve=re.current+Me,C=ue(),te=Math.max(0,C-Ve);if(x(te),te<=0){N(!1),S(!1),re.current=0,u?.(T);let ge,ye=ee,De=de,Ye=he;T==="work"?(De+=1,ee>=c.sessionsPerCycle?(ge="longBreak",ye=1,Ye+=1):(ge="shortBreak",ye+=1)):ge="work",Q(ge),V(ye),fe(De),se(Ye),d?.(ge);const Ue=(()=>{switch(ge){case"work":return c.workDuration*60*1e3;case"shortBreak":return c.shortBreakDuration*60*1e3;case"longBreak":return c.longBreakDuration*60*1e3}})();x(Ue),(ge!=="work"&&c.autoStartBreaks||ge==="work"&&c.autoStartWork)&&setTimeout(()=>{Y.current=Date.now(),re.current=0,N(!0),S(!1)},1e3)}},[T,ee,de,he,c,u,d,ue]);E.useEffect(()=>{if(j&&!b)return U.current=setInterval(()=>{x(()=>{const Me=Date.now()-Y.current,Ve=re.current+Me,C=ue(),te=Math.max(0,C-Ve);return te<=0?(setTimeout(()=>_e(),0),0):te})},100),()=>{U.current&&clearInterval(U.current)};U.current&&(clearInterval(U.current),U.current=null)},[j,b,_e,ue]),E.useEffect(()=>()=>{U.current&&clearInterval(U.current)},[]);const Le=E.useCallback(()=>{Y.current=Date.now(),re.current=0,N(!0),S(!1)},[]),me=E.useCallback(()=>{if(j){const xe=Date.now();re.current+=xe-Y.current,N(!1),S(!0)}},[j]),Ae=E.useCallback(()=>{b&&(Y.current=Date.now(),N(!0),S(!1))},[b]),Ce=E.useCallback(()=>{N(!1),S(!1),re.current=0,x(ue())},[ue]),ce=E.useCallback(()=>{x(0)},[]),dt=E.useCallback(xe=>{m(Me=>{const Ve={...Me,...xe};if(!j&&!b){const C=(()=>{switch(T){case"work":return Ve.workDuration*60*1e3;case"shortBreak":return Ve.shortBreakDuration*60*1e3;case"longBreak":return Ve.longBreakDuration*60*1e3}})();x(C)}return Ve})},[j,b,T]);return[{timeRemaining:p,isRunning:j,isPaused:b,currentMode:T,currentSession:ee,completedPomodoros:de,completedCycles:he,progress:pe},{start:Le,pause:me,resume:Ae,reset:Ce,skip:ce,updateSettings:dt}]}function jv(r,u={}){const{enabled:d=!0,preventDefault:c=!0}=u;E.useEffect(()=>{if(!d)return;const m=p=>{const x=p.target;if(x.tagName==="INPUT"||x.tagName==="TEXTAREA"||x.contentEditable==="true")return;const N=p.key.toLowerCase();let b;switch(N){case" ":b=r.space;break;case"r":b=r.r;break;case"1":b=r[1];break;case"2":b=r[2];break;case"3":b=r[3];break;case"4":b=r[4];break;case"5":b=r[5];break;case"escape":b=r.escape;break}b&&(c&&p.preventDefault(),b())};return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[r,d,c])}function kv(r={}){const{onTick:u,enableNotifications:d=!0}=r,c=E.useRef(null),m=E.useRef("default");E.useEffect(()=>{d&&"Notification"in window&&Notification.requestPermission().then(j=>{m.current=j})},[d]);const p=E.useCallback(()=>{},[u]);return E.useEffect(()=>(c.current=p,document.addEventListener("visibilitychange",p),()=>{document.removeEventListener("visibilitychange",p)}),[p]),{showNotification:E.useCallback((j,N,b)=>{if(!(!d||!("Notification"in window))&&m.current==="granted"){const S=new Notification(j,{body:N,icon:"/icon-192.png",badge:"/icon-192.png",tag:"research-timer",requireInteraction:!0,...b});return setTimeout(()=>{S.close()},1e4),S}},[d]),notificationPermission:m.current,isDocumentHidden:()=>document.hidden}}function Nv(r){const u=Math.ceil(r/1e3),d=Math.floor(u/60),c=u%60;return`${d.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`}function Ev(r){const u=Math.floor(r/6e4);if(u<60)return`${u}m`;const d=Math.floor(u/60),c=u%60;return c===0?`${d}h`:`${d}h ${c}m`}function Jr(r){return Math.floor(r/(1e3*60))}function Tv(r){if(!r.trim())return!0;try{const u=new URL(r);return u.protocol==="http:"||u.protocol==="https:"}catch{return!1}}function Av(r){return r.trim()?/^(doi:|DOI:)?10\.\d{4,}\/\S+$/i.test(r):!0}function Cv(r){return r.trim()?Tv(r)||Av(r):!0}function _v(r){return r.trim()?/^10\.\d{4,}\/\S+$/.test(r)?`doi:${r}`:r:""}class Ei{static instance;permission="default";constructor(){this.permission=Notification.permission}static getInstance(){return Ei.instance||(Ei.instance=new Ei),Ei.instance}async requestPermission(){return"Notification"in window?(this.permission=await Notification.requestPermission(),this.permission):"denied"}async notify(u,d={}){if(!("Notification"in window))return console.warn("Browser does not support notifications"),!1;if(this.permission!=="granted"&&await this.requestPermission()!=="granted")return!1;try{const c=new Notification(u,{body:d.body||"",icon:d.icon||"/vite.svg",tag:d.tag||"research-timer",requireInteraction:d.requireInteraction||!1});return d.requireInteraction||setTimeout(()=>c.close(),5e3),!0}catch(c){return console.error("Failed to show notification:",c),!1}}get hasPermission(){return this.permission==="granted"}get canRequestPermission(){return"Notification"in window&&this.permission!=="denied"}}async function Dv(r,u){return await Ei.getInstance().notify("Session Complete!",{body:`${r} session finished (${Math.round(u/6e4)} minutes)`,tag:"session-complete",requireInteraction:!1})}const Mv=()=>{const[r,u]=E.useState(""),[d,c]=E.useState($t[0].id),[m,p]=E.useState(""),[x,j]=E.useState(""),[N,b]=E.useState(""),[S,T]=E.useState(!1),[Q,ee]=E.useState(null),[V,de]=E.useState(null),[fe,he]=E.useState(!1),[,se]=E.useState(null),U=$t.find(be=>be.id===d)||$t[0],[Y,re]=Sv({workDuration:r?parseInt(r):U.duration,shortBreakDuration:5,longBreakDuration:15,sessionsPerCycle:4,autoStartBreaks:!1,autoStartWork:!1},be=>{be==="work"?(b("Work session complete! Time for a break."),_e.showNotification("Work Session Complete! ","Great job! Take a well-deserved break."),ue.currentSession&&pe.stopSession(!1)):(b("Break time over! Ready for another session?"),_e.showNotification("Break Complete! ","Time to get back to work!")),setTimeout(()=>b(""),3e3)},be=>{console.log("Mode changed to:",be)}),[ue,pe]=bv({onComplete:async be=>{const Fe=$t.find(pn=>pn.id===be.mode);await Dv(Fe?.name||be.mode,be.plannedMs),document.hidden&&_e.showNotification("Research Timer Complete!",`${Fe?.name||be.mode} session finished. Time for a break!`),ee(be.id),T(!0)}}),_e=kv({});E.useEffect(()=>{(async()=>{try{const Fe=await $e.userPreferences.get("user");se(Fe||null),Fe?.onboardingCompleted||he(!0)}catch(Fe){console.error("Failed to load user preferences:",Fe)}})()},[]);const Le=ue.currentSession?.goal||"",me=ue.currentSession?.notes||"",Ae=E.useMemo(()=>ue.currentSession?.tags||[],[ue.currentSession?.tags]),Ce=ue.currentSession?.link||"",ce=Y.timeRemaining,dt=Nv(ce),Pe=E.useCallback(()=>N||(Y.isRunning?`${Y.currentMode==="work"?"Work":"Break"} - Running`:Y.isPaused?`${Y.currentMode==="work"?"Work":"Break"} - Paused`:`${Y.currentMode==="work"?"Work":"Break"} - Ready`),[N,Y.isRunning,Y.isPaused,Y.currentMode]);E.useEffect(()=>{const be=r&&!isNaN(parseInt(r))?parseInt(r):U.duration;re.updateSettings({workDuration:be})},[r,U.duration,re]);const Z=be=>{ue.currentSession&&pe.updateMetadata({goal:be})},xe=be=>{ue.currentSession&&pe.updateMetadata({notes:be})},Me=be=>{ue.currentSession&&pe.updateMetadata({tags:be})},Ve=be=>{const Fe=_v(be),pn=Cv(Fe);j(pn?"":"Please enter a valid URL or DOI"),ue.currentSession&&pn&&pe.updateMetadata({link:Fe})},C=()=>{const be=m.trim();if(be&&!Ae.includes(be)){const Fe=[...Ae,be];Me(Fe),p("")}},te=be=>{const Fe=Ae.filter(pn=>pn!==be);Me(Fe)},ge=be=>{be.key==="Enter"||be.key===","?(be.preventDefault(),C()):be.key==="Backspace"&&m===""&&Ae.length>0&&te(Ae[Ae.length-1])},ye=E.useCallback(()=>{if(Y.isRunning)re.pause();else if(Y.isPaused)re.resume();else{const be=r&&!isNaN(parseInt(r))?parseInt(r):U.duration,Fe=r?{...U,duration:be}:U;pe.startSession(Fe,be*60*1e3),re.start()}},[Y.isRunning,Y.isPaused,r,U,re,pe]),De=E.useCallback(()=>{re.reset(),ue.currentSession&&pe.stopSession(!0),b("")},[re,ue.currentSession,pe]),Ye=be=>{ue.currentSession||(c(be),u(""))},Ue=async be=>{if(Q)try{await Gn.save(be),b("Journal saved successfully!"),setTimeout(()=>b(""),3e3)}catch(Fe){console.error("Failed to save journal:",Fe),b("Failed to save journal"),setTimeout(()=>b(""),3e3)}finally{T(!1),ee(null)}},Zt=()=>{b("Journal skipped"),setTimeout(()=>b(""),2e3),T(!1),ee(null)},vt=()=>{T(!1),ee(null)},Oe=E.useCallback(()=>{if(V&&!V.closed){V.focus();return}const be=320,Fe=400,pn=window.screen.width-be-50,Nt=window.open("","floating-timer",`width=${be},height=${Fe},left=${pn},top=50,resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,status=no,directories=no`);if(Nt){de(Nt),Nt.document.write(`
        <!DOCTYPE html>
        <html class="${document.documentElement.classList.contains("dark")?"dark":""}" lang="en">
        <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>Research Timer Pro</title>
          <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
          <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Lora:wght@400;500&display=swap" rel="stylesheet">
          <style>
            :root {
              --background-light: #FFFFFF;
              --card-light: #F8FAFC;
              --text-light: #1A202C;
              --text-muted-light: #2D3748;
              --border-light: #CBD5E0;
              --background-dark: #111827;
              --card-dark: #1F2937;
              --text-dark: #F9FAFB;
              --text-muted-dark: #D1D5DB;
              --border-dark: #374151;
              --primary-accent: #63B3ED;
              --primary-accent-hover: #4299E1;
            }
            :root {
              --background: var(--background-light);
              --card: var(--card-light);
              --text-primary: var(--text-light);
              --text-secondary: var(--text-muted-light);
              --border: var(--border-light);
            }
            .dark {
              --background: var(--background-dark);
              --card: var(--card-dark);
              --text-primary: var(--text-dark);
              --text-secondary: var(--text-muted-dark);
              --border: var(--border-dark);
            }
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body {
              font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
              background-color: var(--background);
              color: var(--text-primary);
              height: 100vh;
              display: flex;
              flex-direction: column;
              padding: 16px;
              overflow-y: auto;
              transition: background-color 0.3s, color 0.3s;
            }
            .header {
              display: flex;
              align-items: center;
              justify-content: space-between;
              margin-bottom: 16px;
              padding-bottom: 12px;
              border-bottom: 1px solid var(--border);
            }
            .logo {
              font-size: 14px;
              font-weight: 600;
              color: var(--text-primary);
            }
            .mode-badge {
              background: var(--card);
              padding: 6px 12px;
              border-radius: 12px;
              font-size: 11px;
              font-weight: 500;
              border: 1px solid var(--border);
              color: var(--text-primary);
            }
            .timer-section {
              text-align: center;
              margin: 16px 0;
            }
            .timer-display {
              font-size: 2.5rem;
              font-weight: bold;
              font-family: 'Lora', serif;
              margin-bottom: 8px;
              color: var(--text-primary);
            }
            .dark .timer-display {
              color: white;
            }
            .preset-info {
              font-size: 13px;
              color: var(--text-secondary);
              margin-bottom: 4px;
            }
            .status {
              font-size: 12px;
              color: var(--text-secondary);
              margin-bottom: 16px;
            }
            .progress-section {
              background: var(--card);
              border: 1px solid var(--border);
              border-radius: 8px;
              padding: 12px;
              margin-bottom: 16px;
            }
            .progress-title {
              font-size: 12px;
              font-weight: 500;
              margin-bottom: 8px;
              color: var(--text-primary);
            }
            .progress-stats {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 8px;
              font-size: 11px;
            }
            .stat {
              text-align: center;
            }
            .stat-value {
              font-size: 16px;
              font-weight: 600;
              display: block;
              color: var(--primary-accent);
            }
            .stat-label {
              color: var(--text-secondary);
            }
            .session-details {
              background: var(--card);
              border: 1px solid var(--border);
              border-radius: 8px;
              padding: 12px;
              margin-bottom: 16px;
              font-size: 11px;
            }
            .detail-row {
              display: flex;
              align-items: flex-start;
              margin-bottom: 6px;
            }
            .detail-row:last-child { margin-bottom: 0; }
            .detail-icon {
              font-size: 14px;
              margin-right: 6px;
              color: var(--text-secondary);
              flex-shrink: 0;
            }
            .detail-text {
              flex: 1;
              color: var(--text-primary);
              line-height: 1.3;
              word-break: break-word;
            }
            .controls {
              display: flex;
              gap: 8px;
              margin-bottom: 16px;
            }
            button {
              padding: 10px 12px;
              border: 1px solid var(--border);
              border-radius: 6px;
              background: var(--card);
              color: var(--text-primary);
              cursor: pointer;
              font-size: 12px;
              font-weight: 500;
              transition: all 0.2s;
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 4px;
            }
            button:hover {
              background: var(--border);
              transform: translateY(-1px);
            }
            /* Light mode button styling */
            :root button {
              border-color: var(--border-light);
              background: var(--card-light);
              color: var(--text-light);
              box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            }
            :root button:hover {
              background: var(--background-light);
              border-color: var(--primary-accent);
              box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
            }
            .btn-primary {
              background: var(--primary-accent);
              color: #1A202C;
              border-color: var(--primary-accent);
              font-weight: 600;
            }
            .btn-primary:hover {
              background: var(--primary-accent-hover);
              box-shadow: 0 2px 4px rgba(99, 179, 237, 0.2);
            }
            .dark .btn-primary {
              color: #111827;
              border-color: var(--primary-accent);
            }
            .dark button {
              border-color: var(--border);
              background: var(--card);
              color: var(--text-primary);
            }
            .dark button:hover {
              background: var(--background);
              border-color: var(--primary-accent);
            }
            .material-icons { font-size: 16px; }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="logo">Research Timer Pro</div>
            <div class="mode-badge" id="modeBadge">Work</div>
          </div>

          <div class="timer-section">
            <div class="preset-info" id="presetInfo"></div>
            <div class="timer-display" id="timerDisplay">25:00</div>
            <div class="status" id="statusDisplay">Ready to focus</div>
          </div>

          <div class="progress-section">
            <div class="progress-title">Session Progress</div>
            <div class="progress-stats">
              <div class="stat">
                <span class="stat-value" id="currentSession">1</span>
                <span class="stat-label">Current</span>
              </div>
              <div class="stat">
                <span class="stat-value" id="completedCount">0</span>
                <span class="stat-label">Completed</span>
              </div>
            </div>
          </div>

          <div class="session-details" id="sessionDetails">
            <div class="detail-row" id="goalRow" style="display:none;">
              <span class="material-icons detail-icon">flag</span>
              <span class="detail-text" id="goalText"></span>
            </div>
            <div class="detail-row" id="notesRow" style="display:none;">
              <span class="material-icons detail-icon">note</span>
              <span class="detail-text" id="notesText"></span>
            </div>
            <div class="detail-row" id="tagsRow" style="display:none;">
              <span class="material-icons detail-icon">label</span>
              <span class="detail-text" id="tagsText"></span>
            </div>
            <div class="detail-row" id="linkRow" style="display:none;">
              <span class="material-icons detail-icon">link</span>
              <span class="detail-text" id="linkText"></span>
            </div>
          </div>

          <div class="controls">
            <button class="btn-primary" style="flex: 1;" onclick="console.log(' Timer toggle button clicked'); window.opener && window.opener.postMessage({action: 'toggle'}, '*')">
              <span class="material-icons" id="playIcon">play_arrow</span>
              <span id="playText">Start</span>
            </button>
            <button style="flex: 1;" onclick="console.log(' Timer reset button clicked'); window.opener && window.opener.postMessage({action: 'reset'}, '*')">
              <span class="material-icons">refresh</span>
              Reset
            </button>
          </div>

        </body>
        </html>
      `),Nt.document.close(),Nt.addEventListener("beforeunload",()=>{de(null)});const Dt=()=>{if(Nt&&!Nt.closed){const Nn=document.documentElement.classList.contains("dark");console.log(" Updating floating window theme. Main window is dark:",Nn),Nn?(Nt.document.documentElement.classList.add("dark"),console.log(" Applied dark class to floating window")):(Nt.document.documentElement.classList.remove("dark"),console.log(" Removed dark class from floating window")),Nt.document.body.style.visibility="hidden",setTimeout(()=>{Nt&&!Nt.closed&&(Nt.document.body.style.visibility="visible")},10)}};Dt();const yn=new MutationObserver(Dt);yn.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),Nt.addEventListener("beforeunload",()=>{yn.disconnect(),de(null)})}},[V]),fa=E.useCallback(be=>{console.log(" Floating window message received:",be.data),be.data.action==="toggle"?(console.log(" Toggle action - current state:",{isRunning:Y.isRunning,isPaused:Y.isPaused}),ye()):be.data.action==="reset"&&(console.log(" Reset action"),De())},[ye,De,Y.isRunning,Y.isPaused]);E.useEffect(()=>(window.addEventListener("message",fa),()=>window.removeEventListener("message",fa)),[fa]),E.useEffect(()=>{const be=()=>{document.hidden&&Y.isRunning&&(!V||V.closed)&&setTimeout(()=>{Y.isRunning&&Oe()},1e3)},Fe=()=>{!document.hidden&&V&&V.closed};return document.addEventListener("visibilitychange",be),window.addEventListener("focus",Fe),()=>{document.removeEventListener("visibilitychange",be),window.removeEventListener("focus",Fe)}},[Y.isRunning,V,Oe]),E.useEffect(()=>{if(V&&!V.closed){const be=V.document,Fe=be.getElementById("timerDisplay"),pn=be.getElementById("statusDisplay"),ha=be.getElementById("playIcon"),Nt=be.getElementById("playText"),Dt=be.getElementById("presetInfo"),yn=be.getElementById("modeBadge"),Nn=be.getElementById("currentSession"),tl=be.getElementById("completedCount"),aa=be.getElementById("goalRow"),cn=be.getElementById("goalText"),Tt=be.getElementById("notesRow"),vn=be.getElementById("notesText"),Mt=be.getElementById("tagsRow"),sr=be.getElementById("tagsText"),ma=be.getElementById("linkRow"),$n=be.getElementById("linkText");if(Fe&&(Fe.textContent=dt),pn&&(pn.textContent=Pe()),yn&&(Y.currentMode==="work"?(yn.textContent="Work Session",yn.style.background="rgba(59, 130, 246, 0.8)"):Y.currentMode==="shortBreak"?(yn.textContent="Short Break",yn.style.background="rgba(34, 197, 94, 0.8)"):(yn.textContent="Long Break",yn.style.background="rgba(168, 85, 247, 0.8)")),Dt)if(Y.currentMode==="work")r?Dt.textContent=`Custom Duration: ${r} minutes`:Dt.textContent=U.name;else{const Dn=Y.currentMode==="shortBreak"?5:15;Dt.textContent=`${Dn} minute break`}Nn&&(Nn.textContent=Y.currentSession.toString()),tl&&(tl.textContent=Y.completedPomodoros.toString()),aa&&cn&&(Le?(cn.textContent=Le,aa.style.display="flex"):aa.style.display="none"),Tt&&vn&&(me?(vn.textContent=me.length>100?me.substring(0,100)+"...":me,Tt.style.display="flex"):Tt.style.display="none"),Mt&&sr&&(Ae.length>0?(sr.textContent=Ae.map(Dn=>`#${Dn}`).join(", "),Mt.style.display="flex"):Mt.style.display="none"),ma&&$n&&(Ce?($n.textContent=Ce.length>50?Ce.substring(0,50)+"...":Ce,ma.style.display="flex"):ma.style.display="none"),ha&&Nt&&(Y.isRunning?(ha.textContent="pause",Nt.textContent="Pause"):Y.isPaused?(ha.textContent="play_arrow",Nt.textContent="Resume"):(ha.textContent="play_arrow",Nt.textContent="Start"))}},[dt,Y,Pe,U.name,r,Le,me,Ae,Ce,V]);const Gn=Ud(Q||""),st=Gn.data;jv({space:ye,r:De,1:()=>Ye($t[0].id),2:()=>Ye($t[1].id),3:()=>Ye($t[2].id),4:()=>Ye($t[3].id),5:()=>Ye($t[4].id)});const ta=Y.progress,_a=2*Math.PI*56,na=_a-ta/100*_a;return s.jsxs("div",{className:"transition-all duration-300 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-display font-medium text-gray-900 dark:text-white",children:"Research Timer Pro"}),s.jsx("p",{className:"mt-3 text-lg text-gray-600 dark:text-gray-300",children:"Boost your research productivity with accurate timing and insights"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"lg:col-span-2 xl:col-span-2 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200/50 dark:border-gray-700/50",children:[s.jsxs("div",{className:"relative w-56 h-56 sm:w-64 sm:h-64 mx-auto mb-6 flex items-center justify-center",children:[s.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full",viewBox:"0 0 120 120",children:[s.jsx("circle",{className:"text-gray-300 dark:text-gray-600",cx:"60",cy:"60",fill:"transparent",r:"56",stroke:"currentColor",strokeWidth:"4"}),s.jsx("circle",{className:"progress-ring__circle text-blue-600 dark:text-blue-400",cx:"60",cy:"60",fill:"transparent",r:"56",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"4",style:{strokeDasharray:_a,strokeDashoffset:na}})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-3xl sm:text-4xl lg:text-5xl font-mono text-gray-900 dark:text-white tabular-nums",children:dt}),s.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-gray-500 dark:text-gray-300 mt-1 sm:mt-2",children:Y.currentMode==="work"?r?`Custom: ${r}min`:U.name:Y.currentMode==="shortBreak"?"Short Break":Y.currentMode==="longBreak"?"Long Break":"Ready"}),s.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-400 mt-1",children:["Session ",Y.currentSession,"  ",Y.completedPomodoros," completed"]})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-center mb-4 text-gray-700 dark:text-gray-200",children:"Research Mode"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4 mb-4",children:$t.map(be=>s.jsxs("button",{onClick:()=>Ye(be.id),className:`p-4 border rounded-lg text-center transition-colors ${d===be.id&&!r?"border-blue-600 bg-blue-600/10 dark:bg-blue-600/20 ring-2 ring-blue-600":"border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"}`,disabled:!!ue.currentSession,children:[s.jsx("span",{className:`block text-sm ${d===be.id&&!r?"text-blue-600 dark:text-gray-300":"text-gray-500 dark:text-gray-300"}`,children:be.name}),s.jsxs("span",{className:`block font-semibold ${d===be.id&&!r?"text-blue-600 dark:text-white":"text-gray-800 dark:text-gray-200"}`,children:[be.duration,"m"]})]},be.id))}),s.jsxs("div",{className:"text-center",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Or set custom duration (minutes)"}),s.jsx("input",{type:"number",min:"1",max:"480",placeholder:"e.g. 30",value:r,onChange:be=>{u(be.target.value)},disabled:!!ue.currentSession,className:`w-24 text-center bg-white dark:bg-gray-800 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-600 sm:text-sm ${r?"border-blue-600 ring-2 ring-blue-600":"border-gray-300 dark:border-gray-600"} placeholder-gray-400 dark:placeholder-gray-500`}),s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-300 ml-2",children:"minutes"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-3 sm:gap-4",children:[s.jsxs("button",{className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-600/90 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 text-white font-semibold py-3 px-6 rounded-lg transition-colors w-full sm:w-auto",onClick:ye,"aria-label":Y.isRunning?"Pause timer":Y.isPaused?"Resume timer":"Start timer",children:[s.jsx("span",{className:"material-icons text-xl","aria-hidden":"true",children:Y.isRunning?"pause":(Y.isPaused,"play_arrow")}),s.jsx("span",{className:"hidden sm:inline",children:Y.isRunning?"Pause":Y.isPaused?"Resume":"Start"}),s.jsx("span",{className:"sm:hidden",children:Y.isRunning?"Pause":Y.isPaused?"Resume":"Start"})]}),s.jsxs("button",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 font-semibold py-3 px-6 rounded-lg transition-colors w-full sm:w-auto",onClick:De,"aria-label":"Reset timer",children:[s.jsx("span",{className:"material-icons text-xl","aria-hidden":"true",children:"restart_alt"}),"Reset"]}),s.jsxs("button",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200 focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 font-semibold py-3 px-6 rounded-lg transition-colors w-full sm:w-auto",onClick:Oe,"aria-label":"Open floating timer window",children:[s.jsx("span",{className:"material-icons text-xl","aria-hidden":"true",children:"open_in_new"}),s.jsx("span",{className:"hidden sm:inline",children:"Float Window"}),s.jsx("span",{className:"sm:hidden",children:"Float"})]})]})]}),s.jsxs("div",{className:"lg:col-span-2 xl:col-span-1 space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200/50 dark:border-gray-700/50 h-fit",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300 flex items-center",children:[s.jsx("span",{className:"material-icons mr-2 text-blue-600",children:"edit_note"}),"Session Notes"]}),s.jsx("textarea",{className:"w-full bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm placeholder-gray-400 dark:placeholder-gray-500 resize-none",placeholder:"Keep track of your progress, ideas, and insights...",rows:6,value:me,onChange:be=>xe(be.target.value)})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200/50 dark:border-gray-700/50 h-fit",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300 flex items-center",children:[s.jsx("span",{className:"material-icons mr-2 text-purple-600",children:"psychology"}),"AI Summary"]}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:["Configure AI in ",s.jsx("a",{href:"/settings",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium",children:"Settings"})," for session summaries."]}),s.jsx("div",{className:"p-4 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800 rounded-lg border border-gray-200 dark:border-gray-600",children:s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"AI summary will appear here after your session..."})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200/50 dark:border-gray-700/50",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-6 text-gray-700 dark:text-gray-300 flex items-center",children:[s.jsx("span",{className:"material-icons mr-2 text-green-600",children:"flag"}),"Session Details"]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",htmlFor:"goal",children:"Goal"}),s.jsx("input",{className:"w-full bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm placeholder-gray-400 dark:placeholder-gray-500",id:"goal",name:"goal",placeholder:"What do you want to accomplish this session?",type:"text",value:Le,onChange:be=>Z(be.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",htmlFor:"tags",children:"Tags"}),s.jsxs("div",{className:"flex items-center flex-wrap gap-2 p-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg",children:[Ae.map(be=>s.jsxs("span",{className:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-sm font-medium px-3 py-1 rounded-full flex items-center",children:["#",be,s.jsx("button",{className:"ml-2 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",onClick:()=>te(be),children:s.jsx("span",{className:"material-icons text-sm",children:"close"})})]},be)),s.jsx("input",{className:"flex-1 bg-transparent border-none focus:ring-0 p-0 sm:text-sm placeholder-gray-400 dark:placeholder-gray-500 min-w-0",id:"tags",name:"tags",placeholder:"Add tags...",type:"text",value:m,onChange:be=>p(be.target.value),onKeyDown:ge,onBlur:C})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Press Enter or comma to add tags. Backspace to remove last tag."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",htmlFor:"link",children:"Link (DOI or URL)"}),s.jsx("input",{className:`w-full bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm placeholder-gray-400 dark:placeholder-gray-500 ${x?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`,id:"link",name:"link",placeholder:"https://example.com or doi:10.1234/example",type:"url",value:Ce,onChange:be=>Ve(be.target.value)}),x&&s.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:x})]})]})]}),s.jsx("div",{children:s.jsx(uv,{})})]}),s.jsx("footer",{className:"mt-16 text-center",children:s.jsxs("button",{className:"inline-flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[s.jsx("span",{className:"material-icons",children:"keyboard"}),"Keyboard Shortcuts"]})}),s.jsx(_g,{open:S,mode:st?.mode||"deep",sessionId:Q||"",onSave:Ue,onSkip:Zt,onCancel:vt}),s.jsx(Dg,{isOpen:fe,onComplete:()=>{he(!1),(async()=>{try{const Fe=await $e.userPreferences.get("user");se(Fe||null)}catch(Fe){console.error("Failed to reload preferences:",Fe)}})()}})]})};function Ov({link:r,onRemove:u,onEdit:d,showRemove:c=!1,showEdit:m=!1,size:p="md",className:x=""}){const j=_d(r),N=Tg(r),b=Fy(r),S=Zy(r.type),T=Jy(r.type),Q=E.useCallback(()=>{b&&window.open(N,"_blank","noopener,noreferrer")},[N,b]),ee=E.useCallback(se=>{se.stopPropagation(),u?.(r.id)},[r.id,u]),V=E.useCallback(se=>{se.stopPropagation(),d?.(r.id)},[r.id,d]),de=p==="sm"?"px-2 py-1 text-xs":"px-3 py-1.5 text-sm",fe=p==="sm"?"w-3 h-3":"w-4 h-4",he=p==="sm"?"w-4 h-4":"w-5 h-5";return s.jsxs("div",{className:`inline-flex items-center gap-1.5 ${de} rounded-full
                  bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300
                  border border-gray-200 dark:border-gray-700
                  ${b?"cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700":""}
                  transition-colors ${x}`,onClick:b?Q:void 0,title:r.description||`${T}: ${j}
${N}`,children:[s.jsx("div",{className:`${fe} flex-shrink-0 flex items-center justify-center`,children:Rv(S,fe)}),s.jsx("span",{className:"flex-1 truncate font-medium",children:j}),r.description&&p==="md"&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:""}),s.jsx("span",{className:"text-gray-500 dark:text-gray-400 truncate",children:r.description})]}),s.jsxs("div",{className:"flex items-center gap-1 ml-1",children:[m&&d&&s.jsx("button",{onClick:V,className:`${he} flex items-center justify-center
                       text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300
                       rounded-full hover:bg-gray-200 dark:hover:bg-gray-600
                       transition-colors`,title:"Edit link",type:"button",children:s.jsx(Kv,{className:he})}),c&&u&&s.jsx("button",{onClick:ee,className:`${he} flex items-center justify-center
                       text-gray-400 hover:text-red-500 dark:text-gray-500 dark:hover:text-red-400
                       rounded-full hover:bg-red-50 dark:hover:bg-red-900/20
                       transition-colors`,title:"Remove link",type:"button",children:s.jsx(Gv,{className:he})})]})]})}function Rv(r,u){switch(r){case"article":return s.jsx(zv,{className:u});case"science":return s.jsx(Bv,{className:u});case"code":return s.jsx(Uv,{className:u});case"edit":return s.jsx(qv,{className:u});case"bookmark":return s.jsx(Lv,{className:u});case"folder":return s.jsx(Hv,{className:u});case"link":default:return s.jsx(Yv,{className:u})}}function zv({className:r}){return s.jsx("svg",{className:r,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})}function Bv({className:r}){return s.jsx("svg",{className:r,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M6 3a1 1 0 011-1h2a1 1 0 011 1v1h3a1 1 0 110 2H7a1 1 0 110-2h1V3zM6 8a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm-1 4a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm0 3a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z",clipRule:"evenodd"})})}function Uv({className:r}){return s.jsx("svg",{className:r,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})})}function qv({className:r}){return s.jsx("svg",{className:r,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}function Lv({className:r}){return s.jsx("svg",{className:r,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"})})}function Hv({className:r}){return s.jsx("svg",{className:r,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})})}function Yv({className:r}){return s.jsx("svg",{className:r,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z",clipRule:"evenodd"})})}function Kv({className:r}){return s.jsx("svg",{className:r,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}function Gv({className:r}){return s.jsx("svg",{className:r,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}function $v({links:r,onRemove:u,onEdit:d,showRemove:c=!1,showEdit:m=!1,size:p="md",maxVisible:x,direction:j="horizontal",className:N=""}){if(!r||r.length===0)return null;const b=[...r].sort((ee,V)=>V.addedAt-ee.addedAt),S=x?b.slice(0,x):b,T=b.length-S.length,Q=j==="horizontal"?"flex flex-wrap items-center gap-2":"flex flex-col gap-2";return s.jsxs("div",{className:`${Q} ${N}`,children:[S.map(ee=>s.jsx(Ov,{link:ee,onRemove:u,onEdit:d,showRemove:c,showEdit:m,size:p},ee.id)),T>0&&s.jsxs("div",{className:`inline-flex items-center justify-center
                     ${p==="sm"?"px-2 py-1 text-xs":"px-3 py-1.5 text-sm"}
                     rounded-full bg-gray-100 dark:bg-gray-800
                     text-gray-500 dark:text-gray-400
                     border border-gray-200 dark:border-gray-700`,title:`${T} more link${T===1?"":"s"}`,children:["+",T]})]})}function qd(r={}){const[u,d]=E.useState([]),[c,m]=E.useState(!0),[p,x]=E.useState(null),j=E.useCallback(async()=>{try{m(!0),x(null);let S=$e.sessions.orderBy("startedAt").reverse();r.dateRange&&(S=S.filter(Q=>Q.startedAt>=r.dateRange.from.getTime()&&Q.startedAt<=r.dateRange.to.getTime()));const T=await S.toArray();d(T)}catch(S){console.error("Failed to fetch sessions:",S),x("Failed to load sessions")}finally{m(!1)}},[r.dateRange]);E.useEffect(()=>{j()},[r.dateRange?.from,r.dateRange?.to,j]);const N=E.useMemo(()=>{let S=u;return r.mode&&r.mode!=="all"&&(S=S.filter(T=>T.mode===r.mode)),r.tag&&(S=S.filter(T=>T.tags.some(Q=>Q.toLowerCase().includes(r.tag.toLowerCase())))),S},[u,r.mode,r.tag]),b=E.useMemo(()=>{const S=new Set;return u.forEach(T=>{T.tags.forEach(Q=>S.add(Q))}),Array.from(S).sort()},[u]);return{sessions:N,allTags:b,loading:c,error:p,refetch:j}}const Xv=()=>{const[r,u]=E.useState("all"),[d,c]=E.useState(""),[m,p]=E.useState("all"),[x,j]=E.useState(!1),[N,b]=E.useState(null),S=E.useMemo(()=>{const me=new Date,Ae=new Date(me.getFullYear(),me.getMonth(),me.getDate());switch(m){case"today":return{from:Ae,to:new Date(Ae.getTime()+1440*60*1e3-1)};case"week":{const Ce=new Date(Ae);return Ce.setDate(Ae.getDate()-Ae.getDay()),{from:Ce,to:new Date(Ce.getTime()+10080*60*1e3-1)}}case"7days":return{from:new Date(Ae.getTime()-10080*60*1e3),to:me};case"30days":return{from:new Date(Ae.getTime()-720*60*60*1e3),to:me};default:return}},[m]),{sessions:T,allTags:Q,loading:ee,error:V}=qd({mode:r,tag:d,dateRange:S}),de=T.find(me=>me.id===N),fe=Ud(N||""),he=()=>{const me=pe(T);Le(me,`sessions-${new Date().toISOString().split("T")[0]}.md`,"text/markdown")},se=()=>{const me=_e(T);Le(me,`sessions-${new Date().toISOString().split("T")[0]}.csv`,"text/csv")},U=me=>{b(me),j(!0)},Y=async(me,Ae,Ce)=>{if(N)try{await fe.save(me,Ae,Ce),j(!1),b(null)}catch(ce){console.error("Failed to save journal:",ce)}},re=()=>{j(!1),b(null)},ue=()=>{j(!1),b(null)},pe=me=>{const Ae=`# Research Sessions Export

Exported: ${new Date().toLocaleString()}
Total Sessions: ${me.length}

`,Ce=me.map(ce=>{const dt=$t.find(xe=>xe.id===ce.mode),Pe=ce.endedAt?Jr(ce.endedAt-ce.startedAt):Jr(ce.plannedMs);let Z="";if(ce.journal)switch(Z=`
**Journal:**
`,ce.journal.kind){case"lit":Z+=`- **Key Claim:** ${ce.journal.keyClaim||"None"}
`,Z+=`- **Method:** ${ce.journal.method||"None"}
`,Z+=`- **Limitation:** ${ce.journal.limitation||"None"}
`;break;case"writing":Z+=`- **Words Added:** ${ce.journal.wordsAdded??"Not specified"}
`,Z+=`- **Sections Touched:** ${ce.journal.sectionsTouched||"None"}
`;break;case"analysis":Z+=`- **Script/Notebook:** ${ce.journal.scriptOrNotebook||"None"}
`,Z+=`- **Dataset Reference:** ${ce.journal.datasetRef||"None"}
`,Z+=`- **Next Step:** ${ce.journal.nextStep||"None"}
`;break;case"deep":case"break":Z+=`- **What Moved Forward:** ${ce.journal.whatMoved||"None"}
`;break}return`## ${dt?.name||ce.mode} - ${new Date(ce.startedAt).toLocaleDateString()}

**Time:** ${new Date(ce.startedAt).toLocaleTimeString()}
**Duration:** ${Pe} minutes
**Status:** ${ce.status}

**Goal:** ${ce.goal||"No goal specified"}

**Notes:**
${ce.notes||"No notes"}

**Tags:** ${(ce.tags||[]).length>0?(ce.tags||[]).join(", "):"None"}

**Links:** ${ce.links&&ce.links.length>0?ce.links.map(xe=>`${xe.title||xe.url}${xe.description?" ("+xe.description+")":""}`).join(", "):ce.link||"None"}${Z}

---

`}).join("");return Ae+Ce},_e=me=>{const Ae=["Date","Time","Mode","Duration (min)","Status","Goal","Notes","Tags","Links","Journal"],Ce=me.map(ce=>{const dt=$t.find(xe=>xe.id===ce.mode),Pe=ce.endedAt?Jr(ce.endedAt-ce.startedAt):Jr(ce.plannedMs);let Z="";if(ce.journal)switch(ce.journal.kind){case"lit":Z=`Key Claim: ${ce.journal.keyClaim||""} | Method: ${ce.journal.method||""} | Limitation: ${ce.journal.limitation||""}`;break;case"writing":Z=`Words Added: ${ce.journal.wordsAdded??""} | Sections Touched: ${ce.journal.sectionsTouched||""}`;break;case"analysis":Z=`Script/Notebook: ${ce.journal.scriptOrNotebook||""} | Dataset: ${ce.journal.datasetRef||""} | Next Step: ${ce.journal.nextStep||""}`;break;case"deep":case"break":Z=`What Moved Forward: ${ce.journal.whatMoved||""}`;break}return[new Date(ce.startedAt).toLocaleDateString(),new Date(ce.startedAt).toLocaleTimeString(),dt?.name||ce.mode,Pe.toString(),ce.status,`"${(ce.goal||"").replace(/"/g,'""')}"`,`"${(ce.notes||"").replace(/"/g,'""')}"`,`"${(ce.tags||[]).join(", ")}"`,ce.links&&ce.links.length>0?`"${ce.links.map(xe=>xe.title||xe.url).join(", ")}"`:`"${ce.link||""}"`,`"${Z.replace(/"/g,'""')}"`]});return[Ae.join(","),...Ce.map(ce=>ce.join(","))].join(`
`)},Le=(me,Ae,Ce)=>{const ce=new Blob([me],{type:Ce}),dt=URL.createObjectURL(ce),Pe=document.createElement("a");Pe.href=dt,Pe.download=Ae,document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe),URL.revokeObjectURL(dt)};return s.jsxs("div",{className:"transition-all duration-300",children:[s.jsxs("div",{className:"text-center space-y-4 p-6 pb-8",children:[s.jsx("h1",{className:"font-display text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent drop-shadow-lg",children:"Timeline"}),s.jsxs("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:[T.length," session",T.length!==1?"s":"",ee&&" (loading...)"]})]}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 space-y-6",children:[s.jsxs(pt,{children:[s.jsx(Ft,{children:s.jsx("h2",{className:"font-display text-xl font-medium bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Filters"})}),s.jsx(yt,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(it,{label:"Date Range",htmlFor:"date-range",children:s.jsxs("select",{id:"date-range",value:m,onChange:me=>p(me.target.value),className:"w-full",children:[s.jsx("option",{value:"all",children:"All Time"}),s.jsx("option",{value:"today",children:"Today"}),s.jsx("option",{value:"week",children:"This Week"}),s.jsx("option",{value:"7days",children:"Last 7 Days"}),s.jsx("option",{value:"30days",children:"Last 30 Days"})]})}),s.jsx(it,{label:"Focus Mode",htmlFor:"mode-filter",children:s.jsxs("select",{id:"mode-filter",value:r,onChange:me=>u(me.target.value),className:"w-full",children:[s.jsx("option",{value:"all",children:"All Modes"}),$t.map(me=>s.jsx("option",{value:me.id,children:me.name},me.id))]})}),s.jsxs(it,{label:"Filter by Tag",htmlFor:"tag-filter",children:[s.jsx("input",{id:"tag-filter",type:"text",value:d,onChange:me=>c(me.target.value),className:"w-full",placeholder:"Type to filter tags...",list:"tag-suggestions"}),s.jsx("datalist",{id:"tag-suggestions",children:Q.map(me=>s.jsx("option",{value:me},me))})]})]})})]}),s.jsxs(pt,{children:[s.jsx(Ft,{children:s.jsx("h2",{className:"font-display text-xl font-medium",children:"Export Sessions"})}),s.jsx(yt,{children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(We,{variant:"secondary",leftIcon:"description",onClick:he,disabled:T.length===0,children:"Export as Markdown"}),s.jsx(We,{variant:"secondary",leftIcon:"table_chart",onClick:se,disabled:T.length===0,children:"Export as CSV"})]})})]}),s.jsxs("div",{className:"space-y-4",children:[ee&&s.jsx(pt,{children:s.jsx(yt,{className:"py-8 text-center",children:s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading sessions..."})})}),V&&s.jsx(pt,{children:s.jsx(yt,{className:"py-8 text-center",children:s.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Error: ",V]})})}),!ee&&!V&&T.length>0?T.map(me=>{const Ae=$t.find(ce=>ce.id===me.mode),Ce=me.endedAt?Jr(me.endedAt-me.startedAt):Jr(me.plannedMs);return s.jsx(pt,{children:s.jsx(yt,{className:"py-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[new Date(me.startedAt).toLocaleDateString()," at"," ",new Date(me.startedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),s.jsx("div",{className:"text-sm font-medium text-blue-600",children:Ae?.name||me.mode}),s.jsx("div",{className:`text-xs px-2 py-0.5 rounded-full ${me.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":me.status==="cancelled"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,children:me.status}),me.journal&&s.jsxs("div",{className:"text-xs px-2 py-0.5 rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",children:[s.jsx("span",{className:"material-icons text-xs mr-1",children:"edit_note"}),"Journaled"]}),me.aiSummary&&s.jsxs("div",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[s.jsx("span",{className:"material-icons text-xs mr-1",children:"auto_awesome"}),"AI"]})]}),s.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-gray-200",children:me.goal||"No goal specified"}),me.aiSummary?s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-3",children:[s.jsx("div",{className:"font-medium text-blue-600 dark:text-blue-400 mb-1",children:"AI Summary:"}),s.jsx("div",{className:"prose prose-sm dark:prose-invert prose-p:my-0 prose-ul:my-0 prose-li:my-0",children:me.aiSummary.split(`
`).map((ce,dt)=>s.jsx("div",{children:ce},dt))})]}):me.notes?s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:me.notes}):null,s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[me.tags.map(ce=>s.jsx("span",{onClick:()=>c(ce),role:"button",tabIndex:0,className:"px-2 py-0.5 text-xs rounded-full bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:`Click to filter by ${ce}`,children:ce},ce)),me.links&&me.links.length>0?s.jsx($v,{links:me.links,size:"sm",maxVisible:3}):me.link&&s.jsxs("a",{href:me.link.startsWith("doi:")?`https://doi.org/${me.link.replace("doi:","")}`:me.link,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-600/80 inline-flex items-center",children:[s.jsx("span",{className:"material-icons text-sm mr-1",children:"link"}),me.link.length>30?`${me.link.substring(0,30)}...`:me.link]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 ml-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-lg font-mono font-medium text-gray-800 dark:text-gray-200",children:[Ce,"m"]}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[Ev(me.plannedMs)," planned"]})]}),s.jsx(We,{variant:"ghost",size:"sm",leftIcon:"edit_note",onClick:()=>U(me.id),children:me.journal?"Edit Journal":"Add Journal"})]})]})})},me.id)}):!ee&&!V?s.jsx(pt,{children:s.jsx(yt,{className:"py-12 text-center",children:s.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[s.jsx("span",{className:"material-icons text-4xl mb-4 block",children:"timeline"}),s.jsx("div",{className:"text-lg font-medium mb-2",children:r!=="all"||d||m!=="all"?"No sessions match your filters":"No sessions yet"}),s.jsx("div",{className:"text-sm",children:r!=="all"||d||m!=="all"?s.jsx("button",{onClick:()=>{u("all"),c(""),p("all")},className:"text-blue-600 hover:text-blue-600/80",children:"Clear filters"}):"Start your first focus session to see it here"})]})})}):null]})]}),de&&s.jsx(_g,{open:x,mode:de.mode,sessionId:N||"",session:de,onSave:Y,onSkip:re,onCancel:ue})]})},Mg=6048e5,Qv=864e5,Im=Symbol.for("constructDateFrom");function ar(r,u){return typeof r=="function"?r(u):r&&typeof r=="object"&&Im in r?r[Im](u):r instanceof Date?new r.constructor(u):new Date(u)}function rn(r,u){return ar(u||r,r)}function Og(r,u,d){const c=rn(r,d?.in);return isNaN(u)?ar(r,NaN):(u&&c.setDate(c.getDate()+u),c)}let Vv={};function To(){return Vv}function rr(r,u){const d=To(),c=u?.weekStartsOn??u?.locale?.options?.weekStartsOn??d.weekStartsOn??d.locale?.options?.weekStartsOn??0,m=rn(r,u?.in),p=m.getDay(),x=(p<c?7:0)+p-c;return m.setDate(m.getDate()-x),m.setHours(0,0,0,0),m}function jo(r,u){return rr(r,{...u,weekStartsOn:1})}function Rg(r,u){const d=rn(r,u?.in),c=d.getFullYear(),m=ar(d,0);m.setFullYear(c+1,0,4),m.setHours(0,0,0,0);const p=jo(m),x=ar(d,0);x.setFullYear(c,0,4),x.setHours(0,0,0,0);const j=jo(x);return d.getTime()>=p.getTime()?c+1:d.getTime()>=j.getTime()?c:c-1}function eg(r){const u=rn(r),d=new Date(Date.UTC(u.getFullYear(),u.getMonth(),u.getDate(),u.getHours(),u.getMinutes(),u.getSeconds(),u.getMilliseconds()));return d.setUTCFullYear(u.getFullYear()),+r-+d}function zg(r,...u){const d=ar.bind(null,u.find(c=>typeof c=="object"));return u.map(d)}function Ir(r,u){const d=rn(r,u?.in);return d.setHours(0,0,0,0),d}function Bg(r,u,d){const[c,m]=zg(d?.in,r,u),p=Ir(c),x=Ir(m),j=+p-eg(p),N=+x-eg(x);return Math.round((j-N)/Qv)}function Pv(r,u){const d=Rg(r,u),c=ar(r,0);return c.setFullYear(d,0,4),c.setHours(0,0,0,0),jo(c)}function _i(r,u,d){return Og(r,u*7,d)}function Fv(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Zv(r){return!(!Fv(r)&&typeof r!="number"||isNaN(+rn(r)))}function Jv(r,u,d){const[c,m]=zg(d?.in,r,u),p=tg(c,m),x=Math.abs(Bg(c,m));c.setDate(c.getDate()-p*x);const j=+(tg(c,m)===-p),N=p*(x-j);return N===0?0:N}function tg(r,u){const d=r.getFullYear()-u.getFullYear()||r.getMonth()-u.getMonth()||r.getDate()-u.getDate()||r.getHours()-u.getHours()||r.getMinutes()-u.getMinutes()||r.getSeconds()-u.getSeconds()||r.getMilliseconds()-u.getMilliseconds();return d<0?-1:d>0?1:d}function Zs(r,u){const d=rn(r,u?.in);return d.setHours(23,59,59,999),d}function Wv(r,u){const d=rn(r,u?.in);return d.setFullYear(d.getFullYear(),0,1),d.setHours(0,0,0,0),d}function Iv(r,u){const d=u?.weekStartsOn,c=rn(r,u?.in),m=c.getDay(),p=(m<d?-7:0)+6-(m-d);return c.setDate(c.getDate()+p),c.setHours(23,59,59,999),c}const ex={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tx=(r,u,d)=>{let c;const m=ex[r];return typeof m=="string"?c=m:u===1?c=m.one:c=m.other.replace("{{count}}",u.toString()),d?.addSuffix?d.comparison&&d.comparison>0?"in "+c:c+" ago":c};function kd(r){return(u={})=>{const d=u.width?String(u.width):r.defaultWidth;return r.formats[d]||r.formats[r.defaultWidth]}}const nx={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ax={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rx={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},lx={date:kd({formats:nx,defaultWidth:"full"}),time:kd({formats:ax,defaultWidth:"full"}),dateTime:kd({formats:rx,defaultWidth:"full"})},ix={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},sx=(r,u,d,c)=>ix[r];function Ps(r){return(u,d)=>{const c=d?.context?String(d.context):"standalone";let m;if(c==="formatting"&&r.formattingValues){const x=r.defaultFormattingWidth||r.defaultWidth,j=d?.width?String(d.width):x;m=r.formattingValues[j]||r.formattingValues[x]}else{const x=r.defaultWidth,j=d?.width?String(d.width):r.defaultWidth;m=r.values[j]||r.values[x]}const p=r.argumentCallback?r.argumentCallback(u):u;return m[p]}}const ux={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ox={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cx={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dx={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fx={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},hx={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mx=(r,u)=>{const d=Number(r),c=d%100;if(c>20||c<10)switch(c%10){case 1:return d+"st";case 2:return d+"nd";case 3:return d+"rd"}return d+"th"},gx={ordinalNumber:mx,era:Ps({values:ux,defaultWidth:"wide"}),quarter:Ps({values:ox,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Ps({values:cx,defaultWidth:"wide"}),day:Ps({values:dx,defaultWidth:"wide"}),dayPeriod:Ps({values:fx,defaultWidth:"wide",formattingValues:hx,defaultFormattingWidth:"wide"})};function Fs(r){return(u,d={})=>{const c=d.width,m=c&&r.matchPatterns[c]||r.matchPatterns[r.defaultMatchWidth],p=u.match(m);if(!p)return null;const x=p[0],j=c&&r.parsePatterns[c]||r.parsePatterns[r.defaultParseWidth],N=Array.isArray(j)?yx(j,T=>T.test(x)):px(j,T=>T.test(x));let b;b=r.valueCallback?r.valueCallback(N):N,b=d.valueCallback?d.valueCallback(b):b;const S=u.slice(x.length);return{value:b,rest:S}}}function px(r,u){for(const d in r)if(Object.prototype.hasOwnProperty.call(r,d)&&u(r[d]))return d}function yx(r,u){for(let d=0;d<r.length;d++)if(u(r[d]))return d}function vx(r){return(u,d={})=>{const c=u.match(r.matchPattern);if(!c)return null;const m=c[0],p=u.match(r.parsePattern);if(!p)return null;let x=r.valueCallback?r.valueCallback(p[0]):p[0];x=d.valueCallback?d.valueCallback(x):x;const j=u.slice(m.length);return{value:x,rest:j}}}const xx=/^(\d+)(th|st|nd|rd)?/i,bx=/\d+/i,wx={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Sx={any:[/^b/i,/^(a|c)/i]},jx={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},kx={any:[/1/i,/2/i,/3/i,/4/i]},Nx={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ex={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Tx={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ax={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Cx={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},_x={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Dx={ordinalNumber:vx({matchPattern:xx,parsePattern:bx,valueCallback:r=>parseInt(r,10)}),era:Fs({matchPatterns:wx,defaultMatchWidth:"wide",parsePatterns:Sx,defaultParseWidth:"any"}),quarter:Fs({matchPatterns:jx,defaultMatchWidth:"wide",parsePatterns:kx,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Fs({matchPatterns:Nx,defaultMatchWidth:"wide",parsePatterns:Ex,defaultParseWidth:"any"}),day:Fs({matchPatterns:Tx,defaultMatchWidth:"wide",parsePatterns:Ax,defaultParseWidth:"any"}),dayPeriod:Fs({matchPatterns:Cx,defaultMatchWidth:"any",parsePatterns:_x,defaultParseWidth:"any"})},Mx={code:"en-US",formatDistance:tx,formatLong:lx,formatRelative:sx,localize:gx,match:Dx,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ox(r,u){const d=rn(r,u?.in);return Bg(d,Wv(d))+1}function Rx(r,u){const d=rn(r,u?.in),c=+jo(d)-+Pv(d);return Math.round(c/Mg)+1}function Ug(r,u){const d=rn(r,u?.in),c=d.getFullYear(),m=To(),p=u?.firstWeekContainsDate??u?.locale?.options?.firstWeekContainsDate??m.firstWeekContainsDate??m.locale?.options?.firstWeekContainsDate??1,x=ar(u?.in||r,0);x.setFullYear(c+1,0,p),x.setHours(0,0,0,0);const j=rr(x,u),N=ar(u?.in||r,0);N.setFullYear(c,0,p),N.setHours(0,0,0,0);const b=rr(N,u);return+d>=+j?c+1:+d>=+b?c:c-1}function zx(r,u){const d=To(),c=u?.firstWeekContainsDate??u?.locale?.options?.firstWeekContainsDate??d.firstWeekContainsDate??d.locale?.options?.firstWeekContainsDate??1,m=Ug(r,u),p=ar(u?.in||r,0);return p.setFullYear(m,0,c),p.setHours(0,0,0,0),rr(p,u)}function Bx(r,u){const d=rn(r,u?.in),c=+rr(d,u)-+zx(d,u);return Math.round(c/Mg)+1}function gt(r,u){const d=r<0?"-":"",c=Math.abs(r).toString().padStart(u,"0");return d+c}const Pr={y(r,u){const d=r.getFullYear(),c=d>0?d:1-d;return gt(u==="yy"?c%100:c,u.length)},M(r,u){const d=r.getMonth();return u==="M"?String(d+1):gt(d+1,2)},d(r,u){return gt(r.getDate(),u.length)},a(r,u){const d=r.getHours()/12>=1?"pm":"am";switch(u){case"a":case"aa":return d.toUpperCase();case"aaa":return d;case"aaaaa":return d[0];case"aaaa":default:return d==="am"?"a.m.":"p.m."}},h(r,u){return gt(r.getHours()%12||12,u.length)},H(r,u){return gt(r.getHours(),u.length)},m(r,u){return gt(r.getMinutes(),u.length)},s(r,u){return gt(r.getSeconds(),u.length)},S(r,u){const d=u.length,c=r.getMilliseconds(),m=Math.trunc(c*Math.pow(10,d-3));return gt(m,u.length)}},ki={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ng={G:function(r,u,d){const c=r.getFullYear()>0?1:0;switch(u){case"G":case"GG":case"GGG":return d.era(c,{width:"abbreviated"});case"GGGGG":return d.era(c,{width:"narrow"});case"GGGG":default:return d.era(c,{width:"wide"})}},y:function(r,u,d){if(u==="yo"){const c=r.getFullYear(),m=c>0?c:1-c;return d.ordinalNumber(m,{unit:"year"})}return Pr.y(r,u)},Y:function(r,u,d,c){const m=Ug(r,c),p=m>0?m:1-m;if(u==="YY"){const x=p%100;return gt(x,2)}return u==="Yo"?d.ordinalNumber(p,{unit:"year"}):gt(p,u.length)},R:function(r,u){const d=Rg(r);return gt(d,u.length)},u:function(r,u){const d=r.getFullYear();return gt(d,u.length)},Q:function(r,u,d){const c=Math.ceil((r.getMonth()+1)/3);switch(u){case"Q":return String(c);case"QQ":return gt(c,2);case"Qo":return d.ordinalNumber(c,{unit:"quarter"});case"QQQ":return d.quarter(c,{width:"abbreviated",context:"formatting"});case"QQQQQ":return d.quarter(c,{width:"narrow",context:"formatting"});case"QQQQ":default:return d.quarter(c,{width:"wide",context:"formatting"})}},q:function(r,u,d){const c=Math.ceil((r.getMonth()+1)/3);switch(u){case"q":return String(c);case"qq":return gt(c,2);case"qo":return d.ordinalNumber(c,{unit:"quarter"});case"qqq":return d.quarter(c,{width:"abbreviated",context:"standalone"});case"qqqqq":return d.quarter(c,{width:"narrow",context:"standalone"});case"qqqq":default:return d.quarter(c,{width:"wide",context:"standalone"})}},M:function(r,u,d){const c=r.getMonth();switch(u){case"M":case"MM":return Pr.M(r,u);case"Mo":return d.ordinalNumber(c+1,{unit:"month"});case"MMM":return d.month(c,{width:"abbreviated",context:"formatting"});case"MMMMM":return d.month(c,{width:"narrow",context:"formatting"});case"MMMM":default:return d.month(c,{width:"wide",context:"formatting"})}},L:function(r,u,d){const c=r.getMonth();switch(u){case"L":return String(c+1);case"LL":return gt(c+1,2);case"Lo":return d.ordinalNumber(c+1,{unit:"month"});case"LLL":return d.month(c,{width:"abbreviated",context:"standalone"});case"LLLLL":return d.month(c,{width:"narrow",context:"standalone"});case"LLLL":default:return d.month(c,{width:"wide",context:"standalone"})}},w:function(r,u,d,c){const m=Bx(r,c);return u==="wo"?d.ordinalNumber(m,{unit:"week"}):gt(m,u.length)},I:function(r,u,d){const c=Rx(r);return u==="Io"?d.ordinalNumber(c,{unit:"week"}):gt(c,u.length)},d:function(r,u,d){return u==="do"?d.ordinalNumber(r.getDate(),{unit:"date"}):Pr.d(r,u)},D:function(r,u,d){const c=Ox(r);return u==="Do"?d.ordinalNumber(c,{unit:"dayOfYear"}):gt(c,u.length)},E:function(r,u,d){const c=r.getDay();switch(u){case"E":case"EE":case"EEE":return d.day(c,{width:"abbreviated",context:"formatting"});case"EEEEE":return d.day(c,{width:"narrow",context:"formatting"});case"EEEEEE":return d.day(c,{width:"short",context:"formatting"});case"EEEE":default:return d.day(c,{width:"wide",context:"formatting"})}},e:function(r,u,d,c){const m=r.getDay(),p=(m-c.weekStartsOn+8)%7||7;switch(u){case"e":return String(p);case"ee":return gt(p,2);case"eo":return d.ordinalNumber(p,{unit:"day"});case"eee":return d.day(m,{width:"abbreviated",context:"formatting"});case"eeeee":return d.day(m,{width:"narrow",context:"formatting"});case"eeeeee":return d.day(m,{width:"short",context:"formatting"});case"eeee":default:return d.day(m,{width:"wide",context:"formatting"})}},c:function(r,u,d,c){const m=r.getDay(),p=(m-c.weekStartsOn+8)%7||7;switch(u){case"c":return String(p);case"cc":return gt(p,u.length);case"co":return d.ordinalNumber(p,{unit:"day"});case"ccc":return d.day(m,{width:"abbreviated",context:"standalone"});case"ccccc":return d.day(m,{width:"narrow",context:"standalone"});case"cccccc":return d.day(m,{width:"short",context:"standalone"});case"cccc":default:return d.day(m,{width:"wide",context:"standalone"})}},i:function(r,u,d){const c=r.getDay(),m=c===0?7:c;switch(u){case"i":return String(m);case"ii":return gt(m,u.length);case"io":return d.ordinalNumber(m,{unit:"day"});case"iii":return d.day(c,{width:"abbreviated",context:"formatting"});case"iiiii":return d.day(c,{width:"narrow",context:"formatting"});case"iiiiii":return d.day(c,{width:"short",context:"formatting"});case"iiii":default:return d.day(c,{width:"wide",context:"formatting"})}},a:function(r,u,d){const m=r.getHours()/12>=1?"pm":"am";switch(u){case"a":case"aa":return d.dayPeriod(m,{width:"abbreviated",context:"formatting"});case"aaa":return d.dayPeriod(m,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return d.dayPeriod(m,{width:"narrow",context:"formatting"});case"aaaa":default:return d.dayPeriod(m,{width:"wide",context:"formatting"})}},b:function(r,u,d){const c=r.getHours();let m;switch(c===12?m=ki.noon:c===0?m=ki.midnight:m=c/12>=1?"pm":"am",u){case"b":case"bb":return d.dayPeriod(m,{width:"abbreviated",context:"formatting"});case"bbb":return d.dayPeriod(m,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return d.dayPeriod(m,{width:"narrow",context:"formatting"});case"bbbb":default:return d.dayPeriod(m,{width:"wide",context:"formatting"})}},B:function(r,u,d){const c=r.getHours();let m;switch(c>=17?m=ki.evening:c>=12?m=ki.afternoon:c>=4?m=ki.morning:m=ki.night,u){case"B":case"BB":case"BBB":return d.dayPeriod(m,{width:"abbreviated",context:"formatting"});case"BBBBB":return d.dayPeriod(m,{width:"narrow",context:"formatting"});case"BBBB":default:return d.dayPeriod(m,{width:"wide",context:"formatting"})}},h:function(r,u,d){if(u==="ho"){let c=r.getHours()%12;return c===0&&(c=12),d.ordinalNumber(c,{unit:"hour"})}return Pr.h(r,u)},H:function(r,u,d){return u==="Ho"?d.ordinalNumber(r.getHours(),{unit:"hour"}):Pr.H(r,u)},K:function(r,u,d){const c=r.getHours()%12;return u==="Ko"?d.ordinalNumber(c,{unit:"hour"}):gt(c,u.length)},k:function(r,u,d){let c=r.getHours();return c===0&&(c=24),u==="ko"?d.ordinalNumber(c,{unit:"hour"}):gt(c,u.length)},m:function(r,u,d){return u==="mo"?d.ordinalNumber(r.getMinutes(),{unit:"minute"}):Pr.m(r,u)},s:function(r,u,d){return u==="so"?d.ordinalNumber(r.getSeconds(),{unit:"second"}):Pr.s(r,u)},S:function(r,u){return Pr.S(r,u)},X:function(r,u,d){const c=r.getTimezoneOffset();if(c===0)return"Z";switch(u){case"X":return rg(c);case"XXXX":case"XX":return Ol(c);case"XXXXX":case"XXX":default:return Ol(c,":")}},x:function(r,u,d){const c=r.getTimezoneOffset();switch(u){case"x":return rg(c);case"xxxx":case"xx":return Ol(c);case"xxxxx":case"xxx":default:return Ol(c,":")}},O:function(r,u,d){const c=r.getTimezoneOffset();switch(u){case"O":case"OO":case"OOO":return"GMT"+ag(c,":");case"OOOO":default:return"GMT"+Ol(c,":")}},z:function(r,u,d){const c=r.getTimezoneOffset();switch(u){case"z":case"zz":case"zzz":return"GMT"+ag(c,":");case"zzzz":default:return"GMT"+Ol(c,":")}},t:function(r,u,d){const c=Math.trunc(+r/1e3);return gt(c,u.length)},T:function(r,u,d){return gt(+r,u.length)}};function ag(r,u=""){const d=r>0?"-":"+",c=Math.abs(r),m=Math.trunc(c/60),p=c%60;return p===0?d+String(m):d+String(m)+u+gt(p,2)}function rg(r,u){return r%60===0?(r>0?"-":"+")+gt(Math.abs(r)/60,2):Ol(r,u)}function Ol(r,u=""){const d=r>0?"-":"+",c=Math.abs(r),m=gt(Math.trunc(c/60),2),p=gt(c%60,2);return d+m+u+p}const lg=(r,u)=>{switch(r){case"P":return u.date({width:"short"});case"PP":return u.date({width:"medium"});case"PPP":return u.date({width:"long"});case"PPPP":default:return u.date({width:"full"})}},qg=(r,u)=>{switch(r){case"p":return u.time({width:"short"});case"pp":return u.time({width:"medium"});case"ppp":return u.time({width:"long"});case"pppp":default:return u.time({width:"full"})}},Ux=(r,u)=>{const d=r.match(/(P+)(p+)?/)||[],c=d[1],m=d[2];if(!m)return lg(r,u);let p;switch(c){case"P":p=u.dateTime({width:"short"});break;case"PP":p=u.dateTime({width:"medium"});break;case"PPP":p=u.dateTime({width:"long"});break;case"PPPP":default:p=u.dateTime({width:"full"});break}return p.replace("{{date}}",lg(c,u)).replace("{{time}}",qg(m,u))},qx={p:qg,P:Ux},Lx=/^D+$/,Hx=/^Y+$/,Yx=["D","DD","YY","YYYY"];function Kx(r){return Lx.test(r)}function Gx(r){return Hx.test(r)}function $x(r,u,d){const c=Xx(r,u,d);if(console.warn(c),Yx.includes(r))throw new RangeError(c)}function Xx(r,u,d){const c=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${u}\`) for formatting ${c} to the input \`${d}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Qx=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Vx=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Px=/^'([^]*?)'?$/,Fx=/''/g,Zx=/[a-zA-Z]/;function lr(r,u,d){const c=To(),m=c.locale??Mx,p=c.firstWeekContainsDate??c.locale?.options?.firstWeekContainsDate??1,x=c.weekStartsOn??c.locale?.options?.weekStartsOn??0,j=rn(r,d?.in);if(!Zv(j))throw new RangeError("Invalid time value");let N=u.match(Vx).map(S=>{const T=S[0];if(T==="p"||T==="P"){const Q=qx[T];return Q(S,m.formatLong)}return S}).join("").match(Qx).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const T=S[0];if(T==="'")return{isToken:!1,value:Jx(S)};if(ng[T])return{isToken:!0,value:S};if(T.match(Zx))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return{isToken:!1,value:S}});m.localize.preprocessor&&(N=m.localize.preprocessor(j,N));const b={firstWeekContainsDate:p,weekStartsOn:x,locale:m};return N.map(S=>{if(!S.isToken)return S.value;const T=S.value;(Gx(T)||Kx(T))&&$x(T,u,String(r));const Q=ng[T[0]];return Q(j,T,m.localize,b)}).join("")}function Jx(r){const u=r.match(Px);return u?u[1].replace(Fx,"'"):r}function Wx(r,u){return+rn(r)>+rn(u)}function Ix(r,u){return+rn(r)<+rn(u)}function Nd(r,u,d){return Og(r,-u,d)}function Ed(r,u,d){return _i(r,-1,d)}const mo=({label:r,value:u,tooltip:d})=>{const[c,m]=E.useState(!1);return s.jsx(pt,{className:"relative",children:s.jsx(yt,{className:"pt-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:r}),s.jsx("p",{className:"text-3xl font-bold text-gray-800 dark:text-gray-200",children:u})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{className:"ml-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-full p-1",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),onFocus:()=>m(!0),onBlur:()=>m(!1),"aria-describedby":`tooltip-${r.replace(/\s+/g,"-").toLowerCase()}`,children:[s.jsx("span",{className:"material-icons text-sm",children:"info"}),s.jsxs("span",{className:"sr-only",children:["Show formula for ",r]})]}),c&&s.jsxs("div",{id:`tooltip-${r.replace(/\s+/g,"-").toLowerCase()}`,className:"absolute right-0 top-8 z-10 w-72 p-3 text-xs bg-gray-900 text-white rounded-lg shadow-lg border border-gray-700",role:"tooltip",children:[s.jsx("div",{className:"mb-2 font-medium text-gray-200",children:"Formula:"}),s.jsx("div",{className:"text-gray-300 leading-relaxed",children:d}),s.jsx("div",{className:"absolute -top-1 right-4 w-2 h-2 bg-gray-900 border-l border-t border-gray-700 transform rotate-45"})]})]})]})})})};function eb(r){const u=Math.floor(r/60),d=r%60;return`${u}:${d.toString().padStart(2,"0")}`}function tb(r){return`${Math.round(r)}%`}function Wr(r){if(r<60)return`${r}min`;const u=Math.floor(r/60),d=r%60;return d===0?`${u}h`:`${u}h ${d}min`}const ig=({data:r,ariaLabel:u})=>{if(r.length===0)return s.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No data available"});const d=Math.max(...r.map(c=>c.value));return s.jsxs("div",{role:"img","aria-label":u,className:"space-y-3",children:[s.jsxs("div",{className:"sr-only",children:["Distribution showing ",r.length," items.",r.map((c,m)=>`${c.label}: ${Wr(c.value)}${m<r.length-1?", ":""}`).join("")]}),r.map((c,m)=>{const p=d>0?c.value/d*100:0;return s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-20 text-sm text-gray-600 dark:text-gray-400 text-right flex-shrink-0",children:c.label}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("div",{className:"h-6 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-600 rounded-full transition-all duration-300 ease-out",style:{width:`${p}%`},role:"progressbar","aria-valuenow":c.value,"aria-valuemax":d,"aria-label":`${c.label}: ${Wr(c.value)}`})}),s.jsx("div",{className:"absolute inset-0 flex items-center px-3",children:s.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:Wr(c.value)})})]}),s.jsxs("div",{className:"w-12 text-xs text-gray-500 dark:text-gray-400 text-right flex-shrink-0",children:[d>0?Math.round(p):0,"%"]})]},`${c.label}-${m}`)})]})},nb=({matrix:r,rowLabels:u,colLabels:d})=>{if(r.length===0||r[0].length===0)return s.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No data available for heatmap"});const c=Math.max(...r.flat()),m=j=>{if(j===0)return"bg-gray-100 dark:bg-gray-800";const N=c>0?j/c:0;return N<=.2?"bg-blue-600/20":N<=.4?"bg-blue-600/40":N<=.6?"bg-blue-600/60":N<=.8?"bg-blue-600/80":"bg-blue-600"},p=r.flat().reduce((j,N)=>j+N,0),x=r.flat().filter(j=>j>0).length;return s.jsxs("div",{role:"img","aria-label":"Weekly focus time heatmap",className:"w-full",children:[s.jsxs("div",{className:"sr-only",children:["Heatmap showing ",d.length," weeks of focus time data. Total focus time: ",Wr(p)," across ",x," active days. Each cell shows minutes focused on that day."]}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Focus time per day"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Less"}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("div",{className:"w-3 h-3 rounded bg-gray-100 dark:bg-gray-800"}),s.jsx("div",{className:"w-3 h-3 rounded bg-blue-600/20"}),s.jsx("div",{className:"w-3 h-3 rounded bg-blue-600/40"}),s.jsx("div",{className:"w-3 h-3 rounded bg-blue-600/60"}),s.jsx("div",{className:"w-3 h-3 rounded bg-blue-600/80"}),s.jsx("div",{className:"w-3 h-3 rounded bg-blue-600"})]}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"More"})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("div",{className:"inline-block min-w-full",children:[s.jsxs("div",{className:"flex mb-1",children:[s.jsx("div",{className:"w-12"})," ",d.map((j,N)=>s.jsx("div",{className:"flex-1 min-w-[40px] text-center",children:s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 transform -rotate-45 origin-bottom-left",children:j})},N))]}),r.map((j,N)=>s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("div",{className:"w-12 text-xs text-gray-500 dark:text-gray-400 text-right pr-2",children:u[N]}),j.map((b,S)=>s.jsx("div",{className:"flex-1 min-w-[40px] px-0.5",children:s.jsx("div",{className:`
                      w-full h-8 rounded border border-gray-200 dark:border-gray-700
                      ${m(b)}
                      flex items-center justify-center cursor-help
                      hover:ring-2 hover:ring-blue-500 hover:ring-opacity-50
                      transition-all duration-200
                    `,title:`${u[N]}, ${d[S]}: ${Wr(b)}`,role:"gridcell","aria-label":`${u[N]}, ${d[S]}: ${Wr(b)} focused`,children:s.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:b>0?b:""})})},S))]},N))]})}),s.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Total:"})," ",Wr(p)]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Active days:"})," ",x]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Best day:"})," ",Wr(c)]})]})]})};function Oi(r,u){const d=new Date(r);return!Ix(d,u.start)&&!Wx(d,u.end)}function Ri(r){return!r.endedAt||r.status!=="completed"?0:r.endedAt-r.startedAt}function Rl(r){return r.filter(u=>u.mode!=="break"&&u.status==="completed")}function Lg(r,u){const c=Rl(r).filter(m=>!u||Oi(m.startedAt,u)).reduce((m,p)=>m+Ri(p),0);return Math.round(c/6e4)}function Hg(r,u){return r.filter(d=>d.status==="completed").filter(d=>!u||Oi(d.startedAt,u)).length}function Yg(r,u){const d=Rl(r).filter(p=>!u||Oi(p.startedAt,u));if(d.length===0)return 0;const m=d.reduce((p,x)=>p+Ri(x),0)/d.length;return Math.round(m/6e4*10)/10}function Kg(r,u){const d=Rl(r).filter(m=>!u||Oi(m.startedAt,u));if(d.length===0)return 0;const c=d.filter(m=>{const p=Ri(m),x=m.plannedMs;return p>=.9*x});return Math.round(c.length/d.length*100)}function Gg(r,u){const d=Rl(r).filter(m=>!u||Oi(m.startedAt,u)),c={};return d.forEach(m=>{const p=Math.round(Ri(m)/6e4);c[m.mode]=(c[m.mode]||0)+p}),c}function $g(r,u,d=10){const c=Rl(r).filter(N=>!u||Oi(N.startedAt,u)),m={};c.forEach(N=>{const b=Math.round(Ri(N)/6e4);N.tags.forEach(S=>{m[S]=(m[S]||0)+b})});const p=Object.entries(m).sort((N,b)=>b[1]-N[1]),x={};let j=0;return p.forEach(([N,b],S)=>{S<d?x[N]=b:j+=b}),[x,j]}function ab(r,u){const c=rr(new Date,{weekStartsOn:1}),m=Array(7).fill(null).map(()=>Array(u).fill(0));return Rl(r).forEach(x=>{const j=new Date(x.startedAt),N=(j.getDay()+6)%7;for(let b=0;b<u;b++){const S=rr(_i(c,-(u-1-b)),{weekStartsOn:1}),T=Zs(_i(S,1));if(j>=S&&j<T){const Q=Math.round(Ri(x)/6e4);m[N][b]+=Q;break}}}),m}function rb(r){const u=Rl(r);if(u.length===0)return{current:0,longest:0};const d=new Set;u.forEach(b=>{const S=lr(Ir(new Date(b.startedAt)),"yyyy-MM-dd");d.add(S)});let c=0,p=Ir(new Date);for(;;){const b=lr(p,"yyyy-MM-dd");if(d.has(b))c++,p=new Date(p),p.setDate(p.getDate()-1);else break}const x=Array.from(d).sort();let j=0,N=0;for(let b=0;b<x.length;b++)if(b===0)N=1;else{const S=new Date(x[b-1]),T=new Date(x[b]);Jv(T,S)===1?N++:(j=Math.max(j,N),N=1)}return j=Math.max(j,N),{current:c,longest:j}}function lb(r){const{sessions:u,loading:d,error:c}=qd({});return{...E.useMemo(()=>{if(d||c||!u)return{totalFocusTime:0,sessionsCompleted:0,avgSessionLength:0,completionRate:0,modeDistribution:[],tagDistribution:[],heatmapMatrix:[],heatmapRowLabels:[],heatmapColLabels:[],currentStreak:0,longestStreak:0};const p=Lg(u,r),x=Hg(u,r),j=Yg(u,r),N=Kg(u,r),b=Gg(u,r),S=Object.entries(b).map(([ue,pe])=>({label:ue,value:pe})).sort((ue,pe)=>pe.value-ue.value),[T,Q]=$g(u,r,10),ee=Object.entries(T).map(([ue,pe])=>({label:ue,value:pe})).sort((ue,pe)=>pe.value-ue.value);Q>0&&ee.push({label:"Other",value:Q});const V=6,de=ab(u,V),fe=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],se=rr(new Date,{weekStartsOn:1}),U=Array.from({length:V},(ue,pe)=>{const _e=_i(se,-(V-1-pe));return lr(_e,"M/d")}),{current:Y,longest:re}=rb(u);return{totalFocusTime:p,sessionsCompleted:x,avgSessionLength:j,completionRate:N,modeDistribution:S,tagDistribution:ee,heatmapMatrix:de,heatmapRowLabels:fe,heatmapColLabels:U,currentStreak:Y,longestStreak:re}},[u,r,d,c]),loading:d,error:c}}const ib=()=>{const[r,u]=E.useState("last30"),[d,c]=E.useState(""),[m,p]=E.useState(""),x=E.useMemo(()=>{const S=new Date;switch(r){case"last7":return{start:Ir(Nd(S,6)),end:Zs(S)};case"last30":return{start:Ir(Nd(S,29)),end:Zs(S)};case"last90":return{start:Ir(Nd(S,89)),end:Zs(S)};case"custom":return d&&m?{start:Ir(new Date(d)),end:Zs(new Date(m))}:void 0;default:return}},[r,d,m]),j=lb(x),N={totalFocusTime:"Total Focus Time = sum of (actual minutes) for completed non-break sessions in range.",sessionsCompleted:"Sessions Completed = count of sessions with status=completed (all modes).",avgSessionLength:"Average Session Length = mean of actual minutes for completed non-break sessions.",completionRate:"Completion Rate = % of completed non-break sessions where actual  90% of planned."},b=S=>{u(S),S!=="custom"&&(c(""),p(""))};return s.jsxs("div",{className:"transition-all duration-300",children:[s.jsxs("div",{className:"text-center space-y-4 p-6 pb-8",children:[s.jsx("h1",{className:"font-display text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent drop-shadow-lg",children:"Analytics"}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Transparent insights from your research sessions"})]}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"bg-white/70 dark:bg-gray-900/70 backdrop-blur-lg rounded-xl p-4 border border-gray-200/30 dark:border-gray-700/30",children:s.jsx(it,{label:"Time Range",htmlFor:"range-select",className:"w-auto",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("select",{id:"range-select",value:r,onChange:S=>b(S.target.value),className:"min-w-[140px]",children:[s.jsx("option",{value:"last7",children:"Last 7 days"}),s.jsx("option",{value:"last30",children:"Last 30 days"}),s.jsx("option",{value:"last90",children:"Last 90 days"}),s.jsx("option",{value:"custom",children:"Custom range"})]}),r==="custom"&&s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"date",value:d,onChange:S=>c(S.target.value),className:"w-36","aria-label":"Start date"}),s.jsx("input",{type:"date",value:m,onChange:S=>p(S.target.value),className:"w-36","aria-label":"End date"})]})]})})})}),j.loading&&s.jsx(pt,{children:s.jsx(yt,{className:"py-8 text-center",children:s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading analytics..."})})}),j.error&&s.jsx(pt,{children:s.jsx(yt,{className:"py-8 text-center",children:s.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Error: ",j.error]})})}),!j.loading&&!j.error&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(mo,{label:"Total Focus Time",value:eb(j.totalFocusTime),tooltip:N.totalFocusTime}),s.jsx(mo,{label:"Sessions Completed",value:j.sessionsCompleted,tooltip:N.sessionsCompleted}),s.jsx(mo,{label:"Average Session Length",value:`${j.avgSessionLength} min`,tooltip:N.avgSessionLength}),s.jsx(mo,{label:"Completion Rate",value:tb(j.completionRate),tooltip:N.completionRate})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(pt,{children:[s.jsxs(Ft,{children:[s.jsx("h2",{className:"font-display text-xl font-medium",children:"Focus Time by Mode"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Minutes spent in each focus mode"})]}),s.jsx(yt,{children:s.jsx(ig,{data:j.modeDistribution,ariaLabel:"Distribution of focus time by session mode"})})]}),s.jsxs(pt,{children:[s.jsxs(Ft,{children:[s.jsx("h2",{className:"font-display text-xl font-medium",children:"Focus Time by Tag"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Top tags by focus time",s.jsx("span",{className:"block text-xs mt-1",children:"Note: Full session minutes attributed to each tag"})]})]}),s.jsx(yt,{children:s.jsx(ig,{data:j.tagDistribution,ariaLabel:"Distribution of focus time by tag"})})]})]}),s.jsxs(pt,{children:[s.jsxs(Ft,{children:[s.jsx("h2",{className:"font-display text-xl font-medium",children:"Weekly Focus Heatmap"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Daily focus time over the last 6 weeks (Monday start)"})]}),s.jsx(yt,{children:s.jsx(nb,{matrix:j.heatmapMatrix,rowLabels:j.heatmapRowLabels,colLabels:j.heatmapColLabels})})]}),s.jsxs(pt,{children:[s.jsxs(Ft,{children:[s.jsx("h2",{className:"font-display text-xl font-medium",children:"Focus Streaks"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Consecutive days with completed focus sessions"})]}),s.jsx(yt,{children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:j.currentStreak}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current streak"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"days in a row"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-secondary mb-2",children:j.longestStreak}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Longest streak"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"personal record"})]})]})})]})]})]})]})};function Ao(){const r=Ag(()=>$e.settings.get("app"),[]);return{settings:r,get:()=>r,saveProfile:async p=>{const x=await $e.settings.get("app");if(!x)throw new Error("App settings not initialized");const j={...x,researcher:p,updatedAt:Date.now()};await $e.settings.put(j)},savePrivacy:async p=>{const x=await $e.settings.get("app");if(!x)throw new Error("App settings not initialized");const j={...x,privacy:p,updatedAt:Date.now()};await $e.settings.put(j)},saveAi:async p=>{const x=await $e.settings.get("app");if(!x)throw new Error("App settings not initialized");const j={...x,ai:p,updatedAt:Date.now()};await $e.settings.put(j)}}}function Xg(r){const u=rr(r,{weekStartsOn:1}),d=Iv(r,{weekStartsOn:1});return d.setHours(23,59,59,999),{start:u,end:d}}function Qg(r,u){const d=lr(r,"EEE dd MMM yyyy"),c=lr(u,"EEE dd MMM yyyy");return`${d}  ${c}`}function go(){return Xg(new Date)}function sb(r){return r.split(`
`).map(u=>u.trim()).filter(u=>u.length>0).slice(0,5)}function ub(r){if(!r.journal)return[];const u=[];switch(r.journal.kind){case"lit":r.journal.keyClaim&&u.push(`**Key Claim:** ${r.journal.keyClaim}`),r.journal.method&&u.push(`**Method:** ${r.journal.method}`),r.journal.limitation&&u.push(`**Limitation:** ${r.journal.limitation}`);break;case"writing":r.journal.wordsAdded!==null&&r.journal.wordsAdded!==void 0&&u.push(`**Words Added:** ${r.journal.wordsAdded}`),r.journal.sectionsTouched&&u.push(`**Sections:** ${r.journal.sectionsTouched}`);break;case"analysis":r.journal.nextStep&&u.push(`**Next Step:** ${r.journal.nextStep}`),r.journal.scriptOrNotebook&&u.push(`**Script:** ${r.journal.scriptOrNotebook}`),r.journal.datasetRef&&u.push(`**Dataset:** ${r.journal.datasetRef}`);break;case"deep":case"break":r.journal.whatMoved&&u.push(`**Progress:** ${r.journal.whatMoved}`);break}return u.slice(0,5)}function ob(r){return r?r.split(`
`).filter(c=>c.trim().length>0).slice(0,3).map(c=>{const m=c.trim();return m.length>200?`${m.substring(0,197)}...`:m}):[]}function cb(r){const u=r.filter(d=>d.status==="completed"&&(d.links&&d.links.length>0||d.link&&d.link.length>0));return u.sort((d,c)=>{const m=p=>{let x=0;p.aiSummary?x+=1e3:p.journal?x+=100:p.notes&&(x+=10);const j=p.endedAt?p.endedAt-p.startedAt:0;return x+=Math.min(j/6e4,90),x};return m(c)-m(d)}),u.slice(0,3)}function db(r){const u=[];return r.forEach(c=>{if(c.journal?.kind==="analysis"&&c.journal.nextStep&&u.push(c.journal.nextStep),c.notes){const m=c.notes.match(/TODO:\s*(.+)/gi);m&&m.forEach(p=>{const x=p.replace(/TODO:\s*/i,"").trim();x&&u.push(x)})}}),[...new Set(u)].slice(0,10).map(c=>c.length>150?`${c.substring(0,147)}...`:c)}function po(r){return r.replace(/\|/g,"\\|").replace(/`/g,"\\`").replace(/\n/g," ").trim()}function yo(r){const u=Math.floor(r/60),d=r%60;return u===0?`${d}m`:d===0?`${u}h`:`${u}h ${d}m`}function sg(r){const{sessions:u,start:d,end:c,analytics:m,researcher:p}=r,x=[];if(x.push("# Weekly Report"),x.push(""),x.push(`**Week:** ${Qg(d,c)}`),x.push(""),p?.name||p?.affiliation){const S=[p.name,p.affiliation].filter(Boolean).join(", ");x.push(`**Researcher:** ${S}`),x.push("")}x.push("## Summary"),x.push(""),x.push(`- **Total Focus Time:** ${yo(m.totalFocusTimeMin)}`),x.push(`- **Sessions Completed:** ${m.sessionsCompleted}`),x.push(`- **Average Session Length:** ${m.avgSessionLengthMin.toFixed(1)} minutes`),x.push(`- **Completion Rate:** ${m.completionRatePct}%`),x.push(""),x.push("## Time Distribution"),x.push(""),Object.keys(m.modeDist).length>0&&(x.push("### By Mode"),x.push(""),Object.entries(m.modeDist).sort((S,T)=>T[1]-S[1]).forEach(([S,T])=>{const ee=$t.find(V=>V.id===S)?.name||S;x.push(`- **${ee}:** ${yo(T)}`)}),x.push("")),Object.keys(m.tagDist).length>0&&(x.push("### Top Focus Areas"),x.push(""),Object.entries(m.tagDist).sort((S,T)=>T[1]-S[1]).forEach(([S,T])=>{x.push(`- **${S}:** ${yo(T)}`)}),m.tagOtherMin>0&&x.push(`- **Other:** ${yo(m.tagOtherMin)}`),x.push(""));const j=cb(u);j.length>0&&(x.push("## Highlights"),x.push(""),j.forEach(S=>{const Q=$t.find(he=>he.id===S.mode)?.name||S.mode,ee=S.links&&S.links.length>0?_d(S.links[0]):S.link?Ai(S.link):"",V=lr(new Date(S.startedAt),"MMM dd");x.push(`### ${Q} - ${V}${ee?` (${ee})`:""}`),x.push(""),S.goal&&(x.push(`**Goal:** ${S.goal}`),x.push(""));let de=[],fe=!1;S.aiSummary?(de=sb(S.aiSummary),fe=!0):S.journal?de=ub(S):S.notes&&(de=ob(S.notes)),de.length>0&&(de.forEach(he=>{const se=he.startsWith("")||he.startsWith("-")?he:` ${he}`;x.push(se)}),fe&&(x.push(""),x.push("*AI-assisted summary*"))),x.push("")})),x.push("## Session Log (Appendix)"),x.push("");const N=u.filter(S=>S.status==="completed").sort((S,T)=>T.startedAt-S.startedAt);N.length>0?(x.push("| Date | Mode | Goal | Tags | Links | Duration | Journal |"),x.push("|------|------|------|------|-------|----------|---------|"),N.forEach(S=>{const Q=$t.find(U=>U.id===S.mode)?.name||S.mode,ee=lr(new Date(S.startedAt),"MMM dd"),V=S.endedAt?Jr(S.endedAt-S.startedAt):0,de=po(S.goal||"-"),fe=po(S.tags.join(", ")||"-"),he=S.links&&S.links.length>0?po(S.links.map(U=>_d(U)).join(", ")):S.link?po(Ai(S.link)):"-",se=S.journal?S.aiSummary?"AI+Journal":"Journal":S.aiSummary?"AI":"-";x.push(`| ${ee} | ${Q} | ${de} | ${fe} | ${he} | ${V}m | ${se} |`)})):x.push("*No completed sessions this week.*"),x.push("");const b=db(u);return x.push("## Next Week Plan"),x.push(""),b.length>0?b.forEach(S=>{x.push(`- [ ] ${S}`)}):(x.push("*No specific plans identified from this week's sessions.*"),x.push(""),x.push("Consider adding TODO items in your session notes or next steps in analysis journals.")),x.push(""),x.push("---"),x.push("*Generated by Research Timer Pro*"),x.join(`
`)}async function fb(r){if(navigator.clipboard&&window.isSecureContext)try{return await navigator.clipboard.writeText(r),!0}catch(u){console.warn("Clipboard API failed, falling back to execCommand",u)}try{const u=document.createElement("textarea");u.value=r,u.style.position="fixed",u.style.left="-999999px",u.style.top="-999999px",document.body.appendChild(u),u.focus(),u.select();const d=document.execCommand("copy");return document.body.removeChild(u),d}catch(u){return console.error("Fallback clipboard copy failed",u),!1}}function hb(r,u,d="text/plain"){try{const c=new Blob([u],{type:d}),m=URL.createObjectURL(c),p=document.createElement("a");p.href=m,p.download=r,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(m)}catch(c){throw console.error("Download failed",c),new Error("Failed to download file")}}function mb(r,u="md"){const d=r.getFullYear(),c=String(r.getMonth()+1).padStart(2,"0"),m=String(r.getDate()).padStart(2,"0");return`weekly-report-${d}-${c}-${m}.${u}`}function gb(){window.print()}const pb=()=>{const[r,u]=E.useState(()=>go().start),[d,c]=E.useState("idle"),{settings:m}=Ao(),p=E.useMemo(()=>{const{start:U,end:Y}=Xg(r);return{start:U,end:Y,display:Qg(U,Y)}},[r]),{sessions:x,loading:j}=qd({dateRange:{from:p.start,to:p.end}}),N=E.useMemo(()=>{const U={start:p.start,end:p.end},[Y,re]=$g(x,U,10);return{totalFocusTimeMin:Lg(x,U),sessionsCompleted:Hg(x,U),avgSessionLengthMin:Yg(x,U),completionRatePct:Kg(x,U),modeDist:Gg(x,U),tagDist:Y,tagOtherMin:re}},[x,p]),b=E.useMemo(()=>{const U=x.filter(Y=>Y.status==="completed"&&Y.link&&Y.link.length>0);return U.sort((Y,re)=>{const ue=pe=>{let _e=0;pe.aiSummary?_e+=1e3:pe.journal?_e+=100:pe.notes&&(_e+=10);const Le=pe.endedAt?pe.endedAt-pe.startedAt:0;return _e+=Math.min(Le/6e4,90),_e};return ue(re)-ue(Y)}),U.slice(0,3)},[x]),S=()=>{u(U=>Ed(U))},T=()=>{u(U=>_i(U,1))},Q=()=>{u(go().start)},ee=()=>{u(Ed(go().start))},V=async()=>{c("copying");try{const U=sg({sessions:x,start:p.start,end:p.end,analytics:N,researcher:m?.researcher}),Y=await fb(U);c(Y?"success":"error"),setTimeout(()=>c("idle"),3e3)}catch(U){console.error("Copy failed:",U),c("error"),setTimeout(()=>c("idle"),3e3)}},de=()=>{try{const U=sg({sessions:x,start:p.start,end:p.end,analytics:N,researcher:m?.researcher}),Y=mb(p.start,"md");hb(Y,U,"text/markdown")}catch(U){console.error("Download failed:",U)}},fe=()=>{gb()},he=U=>{const Y=Math.floor(U/60),re=U%60;return Y===0?`${re}m`:re===0?`${Y}h`:`${Y}h ${re}m`},se=U=>{if(U.aiSummary)return U.aiSummary.split(`
`).filter(Y=>Y.trim().length>0).slice(0,5);if(U.journal){const Y=[];switch(U.journal.kind){case"lit":U.journal.keyClaim&&Y.push(`Key Claim: ${U.journal.keyClaim}`),U.journal.method&&Y.push(`Method: ${U.journal.method}`),U.journal.limitation&&Y.push(`Limitation: ${U.journal.limitation}`);break;case"writing":U.journal.wordsAdded&&Y.push(`Words Added: ${U.journal.wordsAdded}`),U.journal.sectionsTouched&&Y.push(`Sections: ${U.journal.sectionsTouched}`);break;case"analysis":U.journal.nextStep&&Y.push(`Next Step: ${U.journal.nextStep}`),U.journal.scriptOrNotebook&&Y.push(`Script: ${U.journal.scriptOrNotebook}`);break;case"deep":case"break":U.journal.whatMoved&&Y.push(`Progress: ${U.journal.whatMoved}`);break}return Y}return U.notes?U.notes.split(`
`).filter(Y=>Y.trim().length>0).slice(0,3):[]};return s.jsxs("div",{className:"transition-all duration-300",role:"document",children:[s.jsxs("div",{className:"text-center space-y-4 p-6 pb-8",children:[s.jsx("h1",{className:"font-display text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent drop-shadow-lg",children:"Weekly Report"}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:p.display})]}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between bg-white/70 dark:bg-gray-900/70 backdrop-blur-lg rounded-xl p-4 border border-gray-200/30 dark:border-gray-700/30",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(We,{variant:"ghost",size:"sm",leftIcon:"chevron_left",onClick:()=>u(Ed(r)),children:"Previous"}),s.jsx(We,{variant:"ghost",size:"sm",onClick:()=>u(go().start),children:"This Week"}),s.jsx(We,{variant:"ghost",size:"sm",rightIcon:"chevron_right",onClick:()=>u(_i(r,1)),children:"Next"})]}),s.jsxs("div",{className:"flex gap-2 mt-4 sm:mt-0 no-print",children:[s.jsx(We,{variant:"ghost",leftIcon:"content_copy",onClick:V,disabled:j||d==="copying","aria-label":"Copy report as Markdown to clipboard",children:d==="copying"?"Copying...":d==="success"?"Copied!":d==="error"?"Failed":"Copy Markdown"}),s.jsx(We,{variant:"secondary",leftIcon:"download",onClick:de,disabled:j,"aria-label":"Download report as Markdown file",children:"Download .md"}),s.jsx(We,{variant:"secondary",leftIcon:"print",onClick:fe,"aria-label":"Print report to PDF",children:"Print"})]})]}),s.jsx(pt,{className:"no-print",children:s.jsx(yt,{className:"py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(We,{variant:"ghost",size:"sm",leftIcon:"chevron_left",onClick:S,"aria-label":"Previous week",children:"Previous"}),s.jsx(We,{variant:"ghost",size:"sm",leftIcon:"chevron_right",onClick:T,"aria-label":"Next week",children:"Next"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(We,{variant:"secondary",size:"sm",onClick:Q,children:"This Week"}),s.jsx(We,{variant:"secondary",size:"sm",onClick:ee,children:"Last Week"})]})]})})}),j?s.jsx(pt,{children:s.jsx(yt,{className:"py-8 text-center",children:s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading report data..."})})}):s.jsxs(s.Fragment,{children:[s.jsxs(pt,{children:[s.jsx(Ft,{children:s.jsx("h2",{className:"font-display text-xl font-medium",children:"Summary"})}),s.jsx(yt,{children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-semibold text-blue-600",children:he(N.totalFocusTimeMin)}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Focus Time"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-semibold text-blue-600",children:N.sessionsCompleted}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sessions Completed"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-semibold text-blue-600",children:[N.avgSessionLengthMin.toFixed(1),"m"]}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Session Length"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-semibold text-blue-600",children:[N.completionRatePct,"%"]}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completion Rate"})]})]})})]}),s.jsxs(pt,{children:[s.jsx(Ft,{children:s.jsx("h2",{className:"font-display text-xl font-medium",children:"Time Distribution"})}),s.jsxs(yt,{className:"space-y-6",children:[Object.keys(N.modeDist).length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300 mb-3",children:"By Mode"}),s.jsx("div",{className:"space-y-2",children:Object.entries(N.modeDist).sort((U,Y)=>Y[1]-U[1]).map(([U,Y])=>{const ue=$t.find(pe=>pe.id===U)?.name||U;return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:ue}),s.jsx("span",{className:"text-sm font-mono",children:he(Y)})]},U)})})]}),Object.keys(N.tagDist).length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Top Focus Areas"}),s.jsxs("div",{className:"space-y-2",children:[Object.entries(N.tagDist).sort((U,Y)=>Y[1]-U[1]).map(([U,Y])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:U}),s.jsx("span",{className:"text-sm font-mono",children:he(Y)})]},U)),N.tagOtherMin>0&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Other"}),s.jsx("span",{className:"text-sm font-mono",children:he(N.tagOtherMin)})]})]})]})]})]}),b.length>0&&s.jsxs(pt,{children:[s.jsx(Ft,{children:s.jsx("h2",{className:"font-display text-xl font-medium",children:"Highlights"})}),s.jsx(yt,{children:s.jsx("div",{className:"space-y-6",children:b.map(U=>{const re=$t.find(Le=>Le.id===U.mode)?.name||U.mode,ue=U.link?Ai(U.link):"",pe=se(U),_e=!!U.aiSummary;return s.jsxs("div",{className:"border-l-4 border-blue-600 pl-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs("h3",{className:"font-medium",children:[re," - ",lr(new Date(U.startedAt),"MMM dd")]}),ue&&s.jsx("span",{className:"text-sm px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:ue}),_e&&s.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded",children:"AI"})]}),U.goal&&s.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:U.goal}),pe.length>0&&s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:pe.map((Le,me)=>s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-600 mt-1",children:""}),s.jsx("span",{children:Le})]},me))})]},U.id)})})})]}),s.jsxs(pt,{children:[s.jsx(Ft,{children:s.jsx("h2",{className:"font-display text-xl font-medium",children:"Session Log (Appendix)"})}),s.jsx(yt,{children:x.filter(U=>U.status==="completed").length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-300 dark:border-gray-600",children:[s.jsx("th",{className:"text-left py-2 font-medium text-gray-700 dark:text-gray-300",children:"Date"}),s.jsx("th",{className:"text-left py-2 font-medium text-gray-700 dark:text-gray-300",children:"Mode"}),s.jsx("th",{className:"text-left py-2 font-medium text-gray-700 dark:text-gray-300",children:"Goal"}),s.jsx("th",{className:"text-left py-2 font-medium text-gray-700 dark:text-gray-300",children:"Tags"}),s.jsx("th",{className:"text-left py-2 font-medium text-gray-700 dark:text-gray-300",children:"Links"}),s.jsx("th",{className:"text-right py-2 font-medium text-gray-700 dark:text-gray-300",children:"Duration"}),s.jsx("th",{className:"text-center py-2 font-medium text-gray-700 dark:text-gray-300",children:"Journal"})]})}),s.jsx("tbody",{children:x.filter(U=>U.status==="completed").sort((U,Y)=>Y.startedAt-U.startedAt).map(U=>{const re=$t.find(_e=>_e.id===U.mode)?.name||U.mode,ue=U.endedAt?Jr(U.endedAt-U.startedAt):0,pe=U.journal?U.aiSummary?"AI+Journal":"Journal":U.aiSummary?"AI":"-";return s.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[s.jsx("td",{className:"py-2 text-gray-600 dark:text-gray-400",children:lr(new Date(U.startedAt),"MMM dd")}),s.jsx("td",{className:"py-2",children:re}),s.jsx("td",{className:"py-2 max-w-xs truncate",children:U.goal||"-"}),s.jsx("td",{className:"py-2 max-w-xs truncate",children:U.tags.join(", ")||"-"}),s.jsx("td",{className:"py-2 max-w-xs truncate",children:U.link?Ai(U.link):"-"}),s.jsxs("td",{className:"py-2 text-right font-mono",children:[ue,"m"]}),s.jsx("td",{className:"py-2 text-center text-xs",children:pe})]},U.id)})})]})}):s.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No completed sessions this week."})})]}),s.jsxs(pt,{children:[s.jsx(Ft,{children:s.jsx("h2",{className:"font-display text-xl font-medium",children:"Next Week Plan"})}),s.jsx(yt,{children:(()=>{const U=[];x.forEach(re=>{if(re.journal?.kind==="analysis"&&re.journal.nextStep&&U.push(re.journal.nextStep),re.notes){const ue=re.notes.match(/TODO:\s*(.+)/gi);ue&&ue.forEach(pe=>{const _e=pe.replace(/TODO:\s*/i,"").trim();_e&&U.push(_e)})}});const Y=[...new Set(U)].slice(0,10);return Y.length>0?s.jsx("div",{className:"space-y-2",children:Y.map((re,ue)=>s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",className:"mt-1",disabled:!0,"aria-label":`Plan item: ${re}`}),s.jsx("span",{className:"text-sm",children:re})]},ue))}):s.jsxs("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:[s.jsx("p",{children:"No specific plans identified from this week's sessions."}),s.jsx("p",{className:"text-xs mt-2",children:"Add TODO items in session notes or next steps in analysis journals."})]})})()})]})]})]})]})},yb=()=>{const{settings:r,saveProfile:u}=Ao(),[d,c]=E.useState({}),[m,p]=E.useState("");E.useEffect(()=>{r?.researcher&&c(r.researcher)},[r?.researcher]);const x=async(S,T)=>{const Q={...d,[S]:T||void 0};c(Q);try{await u(Q);const ee=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});p(`Saved  ${ee}`),setTimeout(()=>p(""),3e3)}catch(ee){console.error("Failed to save profile:",ee),p("Save failed"),setTimeout(()=>p(""),3e3)}},j=S=>{x("name",S.target.value)},N=S=>{x("affiliation",S.target.value)},b=d.name||d.affiliation;return s.jsxs("div",{className:"space-y-4",children:[s.jsx(it,{label:"Researcher Name",htmlFor:"researcher-name",children:s.jsx("input",{id:"researcher-name",type:"text",value:d.name||"",onChange:S=>c({...d,name:S.target.value}),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Dr. Jane Smith"})}),s.jsx(it,{label:"Affiliation",htmlFor:"affiliation",children:s.jsx("input",{id:"affiliation",type:"text",value:d.affiliation||"",onChange:S=>c({...d,affiliation:S.target.value}),onBlur:N,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"University, Lab, or Institution"})}),m&&s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:m}),b&&s.jsx("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-md",children:s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("strong",{children:"Weekly Report header:"})," ",s.jsx("span",{className:"font-medium",children:d.name}),d.name&&d.affiliation&&s.jsxs("span",{children:[", ",s.jsx("span",{className:"italic",children:d.affiliation})]}),!d.name&&d.affiliation&&s.jsx("span",{className:"italic",children:d.affiliation})]})})]})};async function vb(r){try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(r),!0;const u=document.createElement("textarea");u.value=r,u.style.position="fixed",u.style.left="-999999px",u.style.top="-999999px",document.body.appendChild(u),u.focus(),u.select();const d=document.execCommand("copy");return document.body.removeChild(u),d}catch(u){return console.error("Failed to copy to clipboard:",u),!1}}const xb=()=>{const{settings:r,savePrivacy:u}=Ao(),[d,c]=E.useState(""),m=r?.privacy,p=async()=>{if(!m)return;const j={...m,telemetryEnabled:!m.telemetryEnabled};try{await u(j)}catch(N){console.error("Failed to save privacy settings:",N)}},x=async()=>{if(!m?.userAnonId)return;const j=await vb(m.userAnonId);c(j?"Copied!":"Copy failed"),setTimeout(()=>c(""),2e3)};return m?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Anonymous Telemetry"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Help improve Research Timer Pro by sharing anonymous usage data."})]}),s.jsx("div",{className:"ml-4",children:s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",role:"switch",checked:m.telemetryEnabled,onChange:p,className:"sr-only peer","aria-describedby":"telemetry-description"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-500/20 dark:peer-focus:ring-blue-500/40 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:m.telemetryEnabled?"On":"Off"})]})})]}),m.telemetryEnabled&&s.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Anonymous ID"}),s.jsx("div",{className:"text-xs font-mono text-blue-600 dark:text-blue-300 mt-1 break-all",children:m.userAnonId})]}),s.jsx(We,{variant:"ghost",size:"sm",leftIcon:"content_copy",onClick:x,children:d||"Copy"})]})}),s.jsxs("div",{id:"telemetry-description",className:"space-y-3 text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800/50 rounded-md",children:[s.jsx("div",{className:"font-medium mb-2",children:"When telemetry is ON:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[s.jsx("li",{children:"Only anonymous counters are shared (session counts, mode usage)"}),s.jsx("li",{children:"No personal content is ever sent (notes, journals, links, AI summaries)"}),s.jsx("li",{children:"Only your anonymous ID is used to group events"}),s.jsx("li",{children:"Data helps improve the app experience for everyone"})]})]}),s.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800/50 rounded-md",children:[s.jsx("div",{className:"font-medium mb-2",children:"When telemetry is OFF:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[s.jsx("li",{children:"The app makes zero network requests for analytics"}),s.jsx("li",{children:"No usage data is collected or shared"}),s.jsx("li",{children:"Everything stays completely private on your device"})]})]}),s.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:[s.jsx("div",{className:"font-medium mb-2 text-green-800 dark:text-green-200",children:"Your privacy is always protected:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs text-green-700 dark:text-green-300",children:[s.jsx("li",{children:"AI API keys live only in your browser storage"}),s.jsx("li",{children:"All your data stays on your device (IndexedDB)"}),s.jsx("li",{children:"No accounts, logins, or cloud storage required"})]})]})]})]}):s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading privacy settings..."})};async function bb(){const r=await $e.sessions.orderBy("createdAt").toArray(),u=await $e.settings.get("app");if(!u)throw new Error("App settings not found - database may be corrupted");return{kind:"research-timer-backup",version:1,createdAt:Date.now(),sessions:r,settings:u}}function wb(r){const u=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),d=URL.createObjectURL(u),c=document.createElement("a"),m=new Date().toISOString().split("T")[0];c.href=d,c.download=`research-timer-data-${m}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(d)}async function Sb(r){if(r.kind!=="research-timer-backup")throw new Error("Invalid backup file: not a research timer backup");if(r.version!==1)throw new Error(`Unsupported backup version: ${r.version}. Expected version 1.`);if(!Array.isArray(r.sessions)||!r.settings)throw new Error("Invalid backup file: missing sessions or settings data");const u=await $e.sessions.toArray(),d=new Map(u.map(x=>[x.id,x]));let c=0,m=0,p=0;for(const x of r.sessions){const j=d.get(x.id);j?x.updatedAt>j.updatedAt?m++:p++:c++}return{sessionsToAdd:c,sessionsToUpdate:m,sessionsSkipped:p}}async function jb(r,u){if(r.kind!=="research-timer-backup"||r.version!==1)throw new Error("Invalid backup file");const d=await $e.sessions.toArray(),c=new Map(d.map(j=>[j.id,j]));let m=0,p=0,x=0;return await $e.transaction("rw",[$e.sessions,$e.settings],async()=>{for(const N of r.sessions){const b=c.get(N.id);b?N.updatedAt>b.updatedAt?(await $e.sessions.put(N),p++):x++:(await $e.sessions.add(N),m++)}const j=await $e.settings.get("app");if(!j||r.settings.updatedAt>j.updatedAt){const N={...r.settings,privacy:j?.privacy||r.settings.privacy,ai:j?.ai||r.settings.ai,updatedAt:Date.now()};await $e.settings.put(N)}}),{added:m,updated:p,skipped:x}}const kb=({open:r,onConfirm:u,onCancel:d})=>{const[c,m]=E.useState(""),p=c==="DELETE",x=()=>{p&&u()},j=N=>{N.key==="Escape"?d():N.key==="Enter"&&p&&x()};return r?Eg.createPortal(s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:d}),s.jsxs("div",{className:"relative w-full max-w-md transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 shadow-xl transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"delete-modal-title","aria-describedby":"delete-modal-warning",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-300 dark:border-gray-600",children:s.jsx("h3",{id:"delete-modal-title",className:"text-lg font-medium text-red-600 dark:text-red-400",children:"Delete All Data"})}),s.jsxs("div",{className:"px-6 py-4 space-y-4",children:[s.jsxs("div",{id:"delete-modal-warning",className:"text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("div",{className:"font-medium text-red-600 dark:text-red-400 mb-2",children:" This action cannot be undone"}),s.jsx("p",{className:"mb-4",children:"This will permanently delete all your research sessions, journal entries, AI summaries, settings, and all other data. Everything will be lost forever."}),s.jsxs("p",{className:"mb-4",children:[s.jsx("strong",{children:"Before continuing:"}),' Consider exporting your data as a backup using the "Export All Data" button above.']})]}),s.jsx(it,{label:"Type DELETE to confirm",htmlFor:"confirm-delete",hint:"This confirms you understand the data will be permanently lost",children:s.jsx("input",{id:"confirm-delete",type:"text",value:c,onChange:N=>m(N.target.value),onKeyDown:j,className:`w-full px-3 py-2 border rounded-md bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent ${c&&!p?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"}`,placeholder:"DELETE",autoComplete:"off",autoFocus:!0,"aria-describedby":"delete-modal-warning"})}),c&&!p&&s.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:'Please type "DELETE" exactly to confirm'})]}),s.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-300 dark:border-gray-600",children:[s.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-2 sm:justify-end",children:[s.jsx(We,{variant:"ghost",onClick:d,children:"Cancel"}),s.jsx(We,{variant:"danger",onClick:x,disabled:!p,leftIcon:"delete_forever",children:"Delete All Data"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Press Esc to cancel"})]})]})]})}),document.body):null},Nb=()=>{const r=E.useRef(null),[u,d]=E.useState(!1),[c,m]=E.useState(null),[p,x]=E.useState(null),[j,N]=E.useState(!1),[b,S]=E.useState(""),[T,Q]=E.useState(!1),[ee,V]=E.useState(""),de=Y=>{V(Y),setTimeout(()=>V(""),5e3)},fe=async()=>{d(!0);try{const Y=await bb();wb(Y),de(`Exported ${Y.sessions.length} sessions successfully`)}catch(Y){console.error("Export failed:",Y),de("Export failed. Please try again.")}finally{d(!1)}},he=async Y=>{const re=Y.target.files?.[0];if(re){S(""),m(null),x(null);try{const ue=await re.text(),pe=JSON.parse(ue),_e=await Sb(pe);m(pe),x(_e)}catch(ue){const pe=ue instanceof Error?ue.message:"Invalid backup file";S(pe),console.error("Import preview failed:",ue)}}},se=async()=>{if(!(!c||!p)){N(!0);try{const Y=await jb(c,p);de(`Import complete: ${Y.added} added, ${Y.updated} updated, ${Y.skipped} skipped`),m(null),x(null),S(""),r.current&&(r.current.value="")}catch(Y){const re=Y instanceof Error?Y.message:"Import failed";S(re),console.error("Import failed:",Y)}finally{N(!1)}}},U=async()=>{try{await $e.transaction("rw",[$e.sessions,$e.settings],async()=>{await $e.sessions.clear(),await $e.settings.clear()}),Q(!1),window.location.reload()}catch(Y){console.error("Delete all failed:",Y),de("Failed to delete data. Please try again.")}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200 mb-2",children:"Export Data"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Download all your research sessions, settings, and AI summaries as a JSON backup file."}),s.jsx(We,{variant:"secondary",leftIcon:"download",onClick:fe,disabled:u,children:u?"Exporting...":"Export All Data"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200 mb-2",children:"Import Data"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Restore data from a Research Timer Pro backup file. Existing data will be merged intelligently."}),s.jsx(it,{label:"Backup File",htmlFor:"import-file",children:s.jsx("input",{ref:r,id:"import-file",type:"file",accept:".json",onChange:he,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-600 file:text-white hover:file:bg-blue-600/90"})}),b&&s.jsx("div",{className:"mt-2 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:s.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200",children:[s.jsx("strong",{children:"Import Error:"})," ",b]})}),p&&s.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[s.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-200 mb-3",children:s.jsx("strong",{children:"Import Preview:"})}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-medium text-green-700 dark:text-green-300",children:p.sessionsToAdd}),s.jsx("div",{className:"text-green-600 dark:text-green-400",children:"New Sessions"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300",children:p.sessionsToUpdate}),s.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:"Updates"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:p.sessionsSkipped}),s.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Skipped"})]})]}),s.jsx("div",{className:"mt-4",children:s.jsx(We,{variant:"primary",leftIcon:"merge",onClick:se,disabled:j,children:j?"Importing...":"Merge Data"})}),s.jsx("div",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"Sessions are merged by ID. Newer versions (by updatedAt) will replace older ones. Your privacy settings and AI configuration will be preserved."})]})]}),s.jsxs("div",{className:"border-t border-gray-300 dark:border-gray-600 pt-6",children:[s.jsx("h3",{className:"font-medium text-red-600 dark:text-red-400 mb-2",children:"Danger Zone"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Permanently delete all your sessions, settings, and data. This action cannot be undone. Consider exporting your data first."}),s.jsx(We,{variant:"danger",leftIcon:"delete_forever",onClick:()=>Q(!0),"aria-describedby":"delete-warning",children:"Delete All Data"}),s.jsx("div",{id:"delete-warning",className:"sr-only",children:"This will permanently delete all your research data and cannot be undone"})]}),s.jsx(kb,{open:T,onConfirm:U,onCancel:()=>Q(!1)}),ee&&s.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:s.jsx("div",{className:"bg-green-600 text-white px-4 py-2 rounded-md shadow-lg",children:ee})})]})},Eb=()=>{const[r,u]=E.useState("idle"),[d,c]=E.useState(null),{settings:m,saveAi:p}=Ao(),{testConnection:x}=Cg(),j=E.useCallback(async V=>{const de=m?.ai||{enabled:!1,provider:"openai",model:"gpt-4o-mini",bullets:5,maxChars:300,temperature:.2,includeJournal:!0};await p({...de,...V})},[m?.ai,p]),N=E.useCallback(async()=>{u("testing"),c(null);const V=await x();u(V.ok?"success":"error"),c(V.message||null)},[x]),b={enabled:!1,provider:"openai",model:"gpt-4o-mini",bullets:5,maxChars:300,temperature:.2,includeJournal:!0},S=m?.ai||b,T=[{value:"openai",label:"OpenAI",description:"GPT models via OpenAI API"},{value:"anthropic",label:"Anthropic",description:"Claude models via Anthropic API"},{value:"gemini",label:"Google Gemini",description:"Gemini models via Google AI API"},{value:"groq",label:"Groq",description:"Ultra-fast inference with Llama, Mixtral, and Gemma models"}],Q=V=>{switch(V){case"openai":return"gpt-4o-mini";case"anthropic":return"claude-3-haiku-20240307";case"gemini":return"gemini-1.5-pro";case"groq":return"llama-3.1-70b-versatile";default:return""}},ee=V=>{switch(V){case"openai":return"Available models: gpt-4o, gpt-4o-mini, gpt-4-turbo, gpt-3.5-turbo";case"anthropic":return"Available models: claude-3-5-sonnet-20241022, claude-3-opus-20240229, claude-3-haiku-20240307";case"gemini":return"Available models: gemini-1.5-pro, gemini-1.5-flash, gemini-pro";case"groq":return"Available models: llama-3.1-70b-versatile, llama-3.1-8b-instant, llama3-70b-8192, llama3-8b-8192, mixtral-8x7b-32768, gemma-7b-it, gemma2-9b-it";default:return"The AI model to use for summarization"}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Enable AI Summarization (opt-in)"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Generate concise summaries of your research sessions using AI. All settings are stored locally."})]}),s.jsx("div",{className:"ml-4",children:s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:S.enabled,onChange:V=>j({enabled:V.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-500/20 dark:peer-focus:ring-blue-500/40 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})})]}),S.enabled&&s.jsxs("div",{className:"mt-6 space-y-6 border-t border-gray-300 dark:border-gray-600 pt-6",children:[s.jsxs(it,{label:"AI Provider",htmlFor:"provider",children:[s.jsx("select",{id:"provider",value:S.provider||"ollama",onChange:V=>j({provider:V.target.value,model:Q(V.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:T.map(V=>s.jsx("option",{value:V.value,children:V.label},V.value))}),s.jsx("div",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:T.find(V=>V.value===S.provider)?.description})]}),s.jsx(it,{label:"Model",htmlFor:"model",hint:ee(S.provider||"openai"),children:s.jsx("input",{id:"model",type:"text",value:S.model||"",onChange:V=>j({model:V.target.value}),onBlur:()=>{},placeholder:Q(S.provider||"openai"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),s.jsx(it,{label:"API Key",htmlFor:"apiKey",hint:"Your API key will be stored locally and never shared",children:s.jsx("input",{id:"apiKey",type:"password",value:S.apiKey||"",onChange:V=>j({apiKey:V.target.value}),onBlur:()=>{},placeholder:"Enter your API key",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),s.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-300 dark:border-gray-600",children:[s.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Advanced Settings"}),s.jsx(it,{label:`Summary Bullets: ${S.bullets}`,htmlFor:"bullets",hint:"Number of bullet points in the summary (3-7)",children:s.jsx("input",{id:"bullets",type:"range",min:"3",max:"7",step:"1",value:S.bullets||5,onChange:V=>j({bullets:parseInt(V.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"})}),s.jsx(it,{label:`Max Characters: ${S.maxChars}`,htmlFor:"maxChars",hint:"Maximum length of the summary (150-600 characters)",children:s.jsx("input",{id:"maxChars",type:"range",min:"150",max:"600",step:"50",value:S.maxChars||300,onChange:V=>j({maxChars:parseInt(V.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"})}),s.jsx(it,{label:`Creativity: ${S.temperature?.toFixed(1)}`,htmlFor:"temperature",hint:"Higher values make output more creative, lower values more focused (0.0-1.0)",children:s.jsx("input",{id:"temperature",type:"range",min:"0",max:"1",step:"0.1",value:S.temperature||.2,onChange:V=>j({temperature:parseFloat(V.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Include Journal"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Include journal entries in the summary (recommended)"})]}),s.jsx("div",{className:"ml-4",children:s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:S.includeJournal??!0,onChange:V=>j({includeJournal:V.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-500/20 dark:peer-focus:ring-blue-500/40 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})})]})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-300 dark:border-gray-600",children:[s.jsx(We,{onClick:N,disabled:r==="testing",leftIcon:r==="testing"?"hourglass_empty":r==="success"?"check_circle":r==="error"?"error":"wifi",variant:r==="error"?"danger":"secondary",children:r==="testing"?"Testing Connection...":"Test Connection"}),d&&s.jsx("div",{className:`mt-2 p-3 rounded-md text-sm ${r==="success"?"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200":"bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200"}`,children:d})]})]})]})},Tb=()=>{const[r,u]=E.useState(null),[d,c]=E.useState(!0);E.useEffect(()=>{(async()=>{try{const b=await $e.musicPreferences.get("music");u(b||null)}catch(b){console.error("Failed to load music preferences:",b)}finally{c(!1)}})()},[]);const m=async N=>{if(r)try{const b={...r,...N,updatedAt:Date.now()};await $e.musicPreferences.put(b),u(b)}catch(b){console.error("Failed to update music preferences:",b)}},p=()=>{m({enabled:!r?.enabled})},x=N=>{m({source:N})},j=()=>{m({localFile:void 0})};return d?s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading music settings..."}):r?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Focus Music"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable music during focus sessions"})]}),s.jsx(We,{onClick:p,variant:r.enabled?"primary":"secondary",size:"sm",children:r.enabled?"Enabled":"Disabled"})]}),r.enabled&&s.jsxs(s.Fragment,{children:[s.jsx(it,{label:"Preferred Music Source",htmlFor:"music-source",children:s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["youtube","spotify","local"].map(N=>s.jsx("button",{onClick:()=>x(N),className:`p-3 rounded-lg border text-center capitalize transition-colors ${r.source===N?"border-blue-600 bg-blue-600/10 text-blue-600":"border-gray-200 dark:border-gray-700 hover:border-blue-600/50"}`,children:s.jsx("div",{className:"text-sm font-medium",children:N})},N))})}),s.jsxs("div",{className:"space-y-3",children:[r.youtubeUrl&&s.jsx(it,{label:"Saved YouTube URL",htmlFor:"saved-youtube",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{id:"saved-youtube",value:r.youtubeUrl,readOnly:!0,className:"flex-1 text-sm"}),s.jsx(We,{onClick:()=>m({youtubeUrl:void 0}),variant:"ghost",size:"sm",leftIcon:"delete",children:"Clear"})]})}),r.spotifyUrl&&s.jsx(it,{label:"Saved Spotify URL",htmlFor:"saved-spotify",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{id:"saved-spotify",value:r.spotifyUrl,readOnly:!0,className:"flex-1 text-sm"}),s.jsx(We,{onClick:()=>m({spotifyUrl:void 0}),variant:"ghost",size:"sm",leftIcon:"delete",children:"Clear"})]})}),r.localFile&&s.jsx(it,{label:"Local Audio File",htmlFor:"saved-local",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"flex-1 text-sm text-gray-600 dark:text-gray-400",children:r.localFile}),s.jsx(We,{onClick:j,variant:"ghost",size:"sm",leftIcon:"delete",children:"Clear"})]})})]}),s.jsx(it,{label:`Volume: ${r.volume}%`,htmlFor:"volume",children:s.jsx("input",{id:"volume",type:"range",min:"0",max:"100",value:r.volume,onChange:N=>m({volume:Number(N.target.value)}),className:"w-full"})})]})]}):s.jsx("div",{className:"text-red-500 dark:text-red-400",children:"Failed to load music preferences"})},Fr=[{id:"forest",name:"Forest Canopy",type:"gradient",gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{id:"ocean",name:"Ocean Depth",type:"gradient",gradient:"linear-gradient(135deg, #667db6 0%, #0082c8 100%)"},{id:"sunset",name:"Sunset Sky",type:"gradient",gradient:"linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%)"},{id:"mountain",name:"Mountain Vista",type:"gradient",gradient:"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)"},{id:"space",name:"Deep Space",type:"gradient",gradient:"linear-gradient(135deg, #434343 0%, #000000 100%)"}],Ab=()=>{const[r,u]=E.useState(null),[d,c]=E.useState(null),[,m]=E.useState(0);E.useEffect(()=>{(async()=>{try{const T=await $e.userPreferences.get("user");if(T&&(c(T),T.backgroundsEnabled))if(T.background.staticImage){const Q=Fr.find(ee=>ee.id===T.background.staticImage);u(Q||Fr[0])}else u(Fr[0])}catch(T){console.error("Failed to load background preferences:",T)}})()},[]),E.useEffect(()=>{if(!d?.backgroundsEnabled||!d.background.autoChange||d.background.staticImage)return;const S=d.background.interval*60*1e3,T=window.setInterval(()=>{m(Q=>{const ee=(Q+1)%Fr.length;return u(Fr[ee]),ee})},S);return()=>window.clearInterval(T)},[d]);const p=E.useCallback(async S=>{try{const T=await $e.userPreferences.get("user");if(T){const Q={...T,...S,updatedAt:Date.now()};await $e.userPreferences.put(Q),c(Q)}}catch(T){console.error("Failed to update background preferences:",T)}},[]),x=E.useCallback(async S=>{if(d&&(await p({background:{...d.background,staticImage:S??void 0}}),S)){const T=Fr.find(Q=>Q.id===S);T&&u(T)}},[d,p]),j=E.useCallback(async S=>{d&&await p({background:{...d.background,autoChange:S}})},[d,p]),N=E.useCallback(async S=>{d&&await p({background:{...d.background,interval:S}})},[d,p]),b=E.useCallback(async S=>{await p({backgroundsEnabled:S}),u(S?Fr[0]:null)},[p]);return{currentBackground:r,backgrounds:Fr,preferences:d,setStaticBackground:x,toggleAutoChange:j,setInterval:N,toggleBackgrounds:b}},Cb=()=>{const{preferences:r,backgrounds:u,toggleBackgrounds:d,toggleAutoChange:c,setInterval:m,setStaticBackground:p}=Ab();return r?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Dynamic Backgrounds"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Beautiful, changing backgrounds for better focus"})]}),s.jsx(We,{onClick:()=>d(!r.backgroundsEnabled),variant:r.backgroundsEnabled?"primary":"secondary",size:"sm",children:r.backgroundsEnabled?"Enabled":"Disabled"})]}),r.backgroundsEnabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Auto-change Backgrounds"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Automatically rotate through backgrounds"})]}),s.jsx(We,{onClick:()=>c(!r.background.autoChange),variant:r.background.autoChange?"primary":"secondary",size:"sm",children:r.background.autoChange?"On":"Off"})]}),r.background.autoChange&&s.jsxs(it,{label:`Change interval: ${r.background.interval} minutes`,htmlFor:"interval",children:[s.jsx("input",{id:"interval",type:"range",min:"5",max:"60",step:"5",value:r.background.interval,onChange:x=>m(Number(x.target.value)),className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[s.jsx("span",{children:"5 min"}),s.jsx("span",{children:"60 min"})]})]}),!r.background.autoChange&&s.jsx(it,{label:"Choose Static Background",htmlFor:"static-bg",children:s.jsx("div",{className:"grid grid-cols-2 gap-3",children:u.map(x=>s.jsxs("button",{onClick:()=>p(x.id),className:`p-3 rounded-lg border text-left transition-colors ${r.background.staticImage===x.id?"border-blue-600 bg-blue-600/10":"border-gray-200 dark:border-gray-700 hover:border-blue-600/50"}`,style:{background:x.gradient,position:"relative"},children:[s.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-lg"}),s.jsx("div",{className:"relative z-10",children:s.jsx("div",{className:"font-medium text-white text-sm",children:x.name})})]},x.id))})}),s.jsxs("div",{className:"mt-4",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Available Backgrounds"}),s.jsx("div",{className:"grid grid-cols-5 gap-2",children:u.map(x=>s.jsx("div",{className:"aspect-square rounded-lg",style:{background:x.gradient},title:x.name},x.id))})]})]})]}):s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading background settings..."})},_b=()=>{const[r,u]=E.useState(!1),[d,c]=E.useState(null),[m,p]=E.useState(!0);E.useEffect(()=>{(async()=>{try{const b=await $e.userPreferences.get("user");c(b||null)}catch(b){console.error("Failed to load user preferences:",b)}finally{p(!1)}})()},[]);const x=async()=>{if(d)try{const N={...d,onboardingCompleted:!1,updatedAt:Date.now()};await $e.userPreferences.put(N),c(N),u(!0)}catch(N){console.error("Failed to reset onboarding:",N)}},j=async()=>{u(!1);try{const N=await $e.userPreferences.get("user");c(N||null)}catch(N){console.error("Failed to reload preferences:",N)}};return m?s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading onboarding settings..."}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Onboarding"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:d?.onboardingCompleted?"Welcome setup completed":"Welcome setup not completed"})]}),s.jsx("div",{className:"flex items-center space-x-2",children:d?.onboardingCompleted&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:[s.jsx("span",{className:"material-icons text-xs mr-1",children:"check_circle"}),"Completed"]})})]}),d?.onboardingCompleted&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Current Preferences"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"material-icons text-blue-600 text-sm",children:"schedule"}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Focus Mode: ",d.focusMode?d.focusMode.charAt(0).toUpperCase()+d.focusMode.slice(1):"None"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"material-icons text-blue-600 text-sm",children:"library_music"}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Music: ",d.musicEnabled?(d.musicSource||"Enabled").charAt(0).toUpperCase()+(d.musicSource||"Enabled").slice(1):"Disabled"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"material-icons text-blue-600 text-sm",children:"landscape"}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Backgrounds: ",d.backgroundsEnabled?"Enabled":"Disabled"]})]})]})]}),s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsx(We,{onClick:x,variant:"primary",leftIcon:"refresh",children:"Restart Onboarding Questions"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This will walk you through the initial setup questions again and allow you to update your preferences."})]})]}),s.jsx(Dg,{isOpen:r,onComplete:j})]})},Db=()=>s.jsxs("div",{className:"transition-all duration-300",children:[s.jsxs("div",{className:"text-center space-y-4 p-6 pb-8",children:[s.jsx("h1",{className:"font-display text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent drop-shadow-lg",children:"Settings"}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Customize your Research Timer Pro experience and manage your data"})]}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 space-y-6",children:[s.jsxs(pt,{children:[s.jsx(Ft,{children:s.jsx("h2",{className:"font-display text-xl font-medium bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Profile"})}),s.jsx(yt,{children:s.jsx(yb,{})})]}),s.jsxs(pt,{children:[s.jsx(Ft,{children:s.jsx("h2",{className:"font-display text-xl font-medium bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Privacy"})}),s.jsx(yt,{children:s.jsx(xb,{})})]}),s.jsxs(pt,{children:[s.jsx(Ft,{children:s.jsx("h2",{className:"font-display text-xl font-medium bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Data"})}),s.jsx(yt,{children:s.jsx(Nb,{})})]}),s.jsxs(pt,{children:[s.jsx(Ft,{children:s.jsx("h2",{className:"font-display text-xl font-medium bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AI Features"})}),s.jsx(yt,{children:s.jsx(Eb,{})})]}),s.jsxs(pt,{children:[s.jsx(Ft,{children:s.jsx("h2",{className:"font-display text-xl font-medium bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Music Preferences"})}),s.jsx(yt,{children:s.jsx(Tb,{})})]}),s.jsxs(pt,{children:[s.jsx(Ft,{children:s.jsx("h2",{className:"font-display text-xl font-medium bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Background Preferences"})}),s.jsx(yt,{children:s.jsx(Cb,{})})]}),s.jsxs(pt,{children:[s.jsx(Ft,{children:s.jsx("h2",{className:"font-display text-xl font-medium bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Onboarding"})}),s.jsx(yt,{children:s.jsx(_b,{})})]})]})]});function Mb(){return s.jsx(_y,{children:s.jsx(Ky,{children:s.jsxs(sy,{children:[s.jsx(Ni,{path:"/",element:s.jsx(Mv,{})}),s.jsx(Ni,{path:"/timeline",element:s.jsx(Xv,{})}),s.jsx(Ni,{path:"/analytics",element:s.jsx(ib,{})}),s.jsx(Ni,{path:"/report",element:s.jsx(pb,{})}),s.jsx(Ni,{path:"/settings",element:s.jsx(Db,{})})]})})})}p0.createRoot(document.getElementById("root")).render(s.jsx(E.StrictMode,{children:s.jsx(Mb,{})}));
